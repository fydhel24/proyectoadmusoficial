import{j as e,q as T,r as b,$ as W}from"./app-C9FYWxt2.js";import{A as z,B as I,a as L}from"./app-layout-DmzbA60l.js";import{c as M}from"./createSvgIcon-BeWwfM08.js";import{C as B}from"./CalendarToday-BTrSB7jF.js";import{L as O}from"./LocationOn-CKNQTaSF.js";import $ from"./MapComponent-8OKFCqwT.js";import{B as c}from"./Box-Bq5diqRU.js";import{S as l}from"./Stack-CMdlKPwh.js";import{T as s,P as H}from"./Typography-ChZrof4A.js";import{A as p}from"./Avatar-qwCuc8dx.js";import{G as j}from"./Grid-5B1YnSmD.js";import{C}from"./Card-CqptthBP.js";import{C as S}from"./CardContent-4XCdUaNU.js";import{T as _}from"./Tooltip-CP7aZhJl.js";import{C as G}from"./Chip-C3khZ1EE.js";import{B as w}from"./Button-OrpXgKRb.js";import{D as N,a as U,b as V}from"./DialogTitle-C2zjZyuu.js";import{D as E}from"./DialogActions-DgAbohsO.js";import"./button-Tq1l60An.js";import"./clsx-B-dksMZM.js";import"./avatar-FJwtKWDO.js";import"./createLucideIcon-CxvTyEZH.js";import"./index-BRQOeZDx.js";import"./index-CbpD1ODr.js";import"./index-CTU4SEXm.js";import"./settings-6wmvEXTi.js";import"./app-logo-icon-DeROgz-_.js";import"./DefaultPropsProvider-ZncIBFYl.js";import"./leaflet-D_vT5-xd.js";import"./Popup-BSuHvwSi.js";import"./useThemeProps-VB07dJvB.js";import"./getThemeProps-QoLWqXG_.js";import"./useSlot-DE_1Wxdu.js";import"./useTimeout-BU9dWeAN.js";import"./isMuiElement-DPAZRHqk.js";import"./index-BDY8rXHp.js";import"./useControlled-DFhhtwhL.js";import"./useId-BWw3VObj.js";import"./Fade-Dxqqf-S-.js";import"./Grow-rrETuSGo.js";import"./Popper-BDE_PfVP.js";import"./Portal-DkTiE7_4.js";import"./useSlotProps-DhP8vEMs.js";import"./ButtonBase-DpSlwJZ0.js";import"./CircularProgress-Dq1DDrXf.js";import"./Modal-rnOcQKoj.js";const F=M(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m-2 14-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"})),J=[{title:"Inicio",href:"/"},{title:"Tareas",href:"/bookings"}],P={monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",saturday:"Sábado",sunday:"Domingo"},x={mañana:"primary",tarde:"secondary",noche:"info"},Y=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"];function Ne(){const{bookings:m,user:v}=T().props,f=m.reduce((t,r)=>{var n,d;const o=r.company.name,a=P[(n=r.day_of_week)==null?void 0:n.toLowerCase()]||r.day_of_week,i=((d=r.turno)==null?void 0:d.toLowerCase())||"Sin turno";return t[o]=t[o]||{},t[o][a]=t[o][a]||{},t[o][a][i]=(t[o][a][i]||0)+1,t},{}),[k,h]=b.useState(!1),[g,u]=b.useState(null),A=t=>{var o;const r=(o=m.find(a=>a.company.name===t))==null?void 0:o.company;u(r),h(!0)},y=()=>{h(!1),u(null)},D=t=>{var o;const r=[];for(const[a,i]of Object.entries(f)){const n=i[t];if(n){const d=(o=m.find(R=>R.company.name===a))==null?void 0:o.company;r.push({name:a,shifts:n,company:d})}}return r};return e.jsxs(z,{breadcrumbs:J,children:[e.jsx(W,{title:"Horario Semanal"}),e.jsxs(c,{sx:{px:{xs:2,md:5},py:4},children:[e.jsxs(l,{direction:"row",alignItems:"center",spacing:2,mb:4,children:[e.jsx(B,{color:"primary",sx:{fontSize:36}}),e.jsxs(s,{variant:"h4",fontWeight:"bold",children:["Horario Semanal - ",e.jsx("span",{style:{color:"#1976d2"},children:v.name})]})]}),Object.keys(f).length===0?e.jsxs(c,{mt:6,textAlign:"center",children:[e.jsx(p,{sx:{bgcolor:"grey.300",width:64,height:64,mx:"auto",mb:2},children:e.jsx(F,{sx:{fontSize:40,color:"grey.600"}})}),e.jsx(s,{variant:"h6",color:"text.secondary",children:"No hay tareas programadas para esta semana."})]}):e.jsxs(H,{elevation:3,sx:{borderRadius:2,overflow:"hidden"},children:[e.jsx(c,{sx:{bgcolor:"primary.main",color:"white",p:2},children:e.jsx(s,{variant:"h6",fontWeight:"bold",textAlign:"center",children:"Calendario Semanal"})}),e.jsx(c,{sx:{p:{xs:1,md:2},background:"linear-gradient(135deg, #e0e7ff 0%, #f8fafc 100%)",borderRadius:3},children:e.jsx(j,{container:!0,spacing:2,justifyContent:"center",alignItems:"stretch",children:Y.map(t=>{const r=D(t);return e.jsx(j,{item:!0,xs:12,sm:6,md:4,lg:2,sx:{display:"flex",justifyContent:"center",alignItems:"stretch"},children:e.jsxs(C,{elevation:4,sx:{width:"100%",minWidth:170,maxWidth:220,height:295,borderRadius:4,border:r.length>0?"2.5px solid #1976d2":"1.5px solid #e0e0e0",boxShadow:r.length>0?"0 6px 24px 0 rgba(25, 118, 210, 0.10)":"0 2px 8px 0 rgba(0,0,0,0.04)",background:r.length>0?"linear-gradient(135deg, #e3f0ff 0%, #f8fafc 100%)":"linear-gradient(135deg, #f3f4f6 0%, #f8fafc 100%)",display:"flex",flexDirection:"column",transition:"transform 0.18s, box-shadow 0.18s","&:hover":{transform:"translateY(-4px) scale(1.03)",boxShadow:"0 10px 32px 0 rgba(25, 118, 210, 0.18)"}},children:[e.jsx(c,{sx:{bgcolor:r.length>0?"primary.main":"grey.200",color:r.length>0?"white":"text.secondary",p:1.5,textAlign:"center",borderTopLeftRadius:16,borderTopRightRadius:16,boxShadow:r.length>0?"0 2px 8px 0 rgba(25, 118, 210, 0.10)":void 0,fontSize:"1.1rem",letterSpacing:1},children:e.jsx(s,{variant:"subtitle1",fontWeight:"bold",sx:{letterSpacing:1},children:t})}),e.jsx(S,{sx:{p:1.5,flexGrow:1,overflowY:"auto",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:r.length===0?"center":"flex-start",alignItems:"center",background:"rgba(255,255,255,0.85)",borderBottomLeftRadius:16,borderBottomRightRadius:16},children:r.length===0?e.jsx(c,{sx:{textAlign:"center",py:3},children:e.jsx(s,{variant:"body2",color:"text.secondary",children:"Sin empresas"})}):e.jsx(l,{spacing:1.2,sx:{width:"100%"},children:r.map((o,a)=>{var i;return e.jsx(C,{elevation:0,sx:{borderRadius:2,border:"1.5px solid #e3e6f0",background:"linear-gradient(90deg, #f0f7ff 0%, #f8fafc 100%)","&:hover":{boxShadow:2,borderColor:"#1976d2"},width:"100%",mb:.5},children:e.jsxs(S,{sx:{p:1,"&:last-child":{pb:1}},children:[e.jsxs(l,{direction:"row",spacing:1,alignItems:"center",mb:1,justifyContent:"center",children:[(i=o.company)!=null&&i.logo?e.jsx(p,{src:`/${o.company.logo}`,variant:"rounded",sx:{width:24,height:24,boxShadow:"0 2px 8px #1976d220"}}):e.jsx(p,{sx:{bgcolor:"primary.main",width:24,height:24},children:e.jsx(I,{sx:{fontSize:14}})}),e.jsx(s,{variant:"caption",fontWeight:"bold",noWrap:!0,sx:{color:"#1976d2",fontSize:"0.92rem",letterSpacing:.5},children:o.name})]}),e.jsx(l,{spacing:.5,mb:1,justifyContent:"center",direction:"row",flexWrap:"wrap",children:Object.entries(o.shifts).map(([n,d])=>e.jsx(_,{title:`Turno ${n}: ${d} tarea(s)`,arrow:!0,placement:"top",children:e.jsx(G,{icon:e.jsx(L,{sx:{fontSize:13}}),label:`${n.charAt(0).toUpperCase()+n.slice(1)}`,color:x[n]||"default",size:"small",sx:{fontWeight:"bold",fontSize:"0.70rem",height:22,bgcolor:x[n]==="primary"?"#e3f0ff":x[n]==="secondary"?"#fbe9ff":"#e0f7fa",color:"#1976d2",borderRadius:2,mx:.2,my:.2}})},n))}),e.jsx(w,{variant:"contained",size:"small",fullWidth:!0,sx:{fontSize:"0.70rem",py:.5,minHeight:24,borderRadius:2,background:"linear-gradient(90deg, #1976d2 0%, #42a5f5 100%)",color:"#fff",fontWeight:700,boxShadow:"0 2px 8px #1976d220",mt:.5,"&:hover":{background:"linear-gradient(90deg, #1565c0 0%, #1976d2 100%)"}},startIcon:e.jsx(O,{sx:{fontSize:14}}),onClick:()=>A(o.name),children:"Ubicación"})]})},a)})})})]})},t)})})})]}),e.jsxs(N,{open:k,onClose:y,maxWidth:"md",fullWidth:!0,children:[e.jsx(U,{children:"Ubicación de la empresa"}),e.jsx(V,{children:g?e.jsx($,{company:g}):e.jsx(s,{children:"No se encontró la empresa seleccionada."})}),e.jsx(E,{children:e.jsx(w,{onClick:y,color:"primary",children:"Cerrar"})})]})]})]})}export{Ne as default};
