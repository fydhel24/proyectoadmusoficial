import{q as B,r as k,j as e,$ as M}from"./app-CyHY4qXq.js";import{A as $,B as O,a as F}from"./app-layout-CR2VM0FS.js";import{A as G}from"./AssignmentTurnedIn-CX-q06Ys.js";import{C as H}from"./CalendarToday-DFMA_INL.js";import{L as N}from"./LocationOn-BP2r951W.js";import U from"./MapComponent-DButG_Kf.js";import{B as d}from"./Box-Ceqq6WPS.js";import{S as x}from"./Stack-C_gZWUsa.js";import{T as i,P as E}from"./Typography-DquxNzfk.js";import{A as f}from"./Avatar-8By6PYSK.js";import{G as A}from"./Grid-D8YREuBa.js";import{C as D}from"./Card-Cgz5gidX.js";import{C as R}from"./CardContent-CpFUpGqS.js";import{T as J}from"./Tooltip-2cqQCBjd.js";import{C as P}from"./Chip-h3L_dIbN.js";import{B as T}from"./Button-B5QymhUM.js";import{D as V,a as Y,b as q}from"./DialogTitle-CsQ7IZVm.js";import{D as K}from"./DialogActions-DzIW1MJD.js";import"./button-D9s6bao3.js";import"./clsx-B-dksMZM.js";import"./avatar-DM9x7_D4.js";import"./createLucideIcon-DzD-rnf8.js";import"./index-Rp65u7US.js";import"./index-B36Mxma7.js";import"./index-CQLPyUva.js";import"./settings-DdDrqPmp.js";import"./app-logo-icon-C6G1VvIS.js";import"./createSvgIcon-DFkYpeFR.js";import"./DefaultPropsProvider-CieIQJ4l.js";import"./leaflet-Dc9XhXtg.js";import"./Popup-CgbBwjwa.js";import"./useThemeProps-BouFxohf.js";import"./getThemeProps-CSTSEX59.js";import"./createSimplePaletteValueFilter-CHgcW5pF.js";import"./useSlot-BD1cC_p3.js";import"./TransitionGroupContext-BSxo9aJI.js";import"./isMuiElement-tDv9Kr5f.js";import"./index-DeuVn2yV.js";import"./useTimeout-2kURTJpt.js";import"./useControlled-BWKDwO3o.js";import"./useId-AiqUT9-C.js";import"./Fade-CJOgqix0.js";import"./Grow-BhDWOfCT.js";import"./Popper-CklgSHU3.js";import"./ownerDocument-DW-IO8s5.js";import"./Portal-3K29QfTN.js";import"./useSlotProps-mZ78eGn3.js";import"./ButtonBase-B7jPhJrj.js";import"./CircularProgress-BcU9b_yV.js";import"./Modal-Br5Yv6Vo.js";const Q=[{title:"Inicio",href:"/"},{title:"Tareas",href:"/bookings"}],W={monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",saturday:"Sábado",sunday:"Domingo"},h={mañana:"primary",tarde:"secondary",noche:"info"},X=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"];function qe(){const{bookings:m,user:I}=B().props,g=m.reduce((t,o)=>{var n,l;const r=o.company.name,a=W[(n=o.day_of_week)==null?void 0:n.toLowerCase()]||o.day_of_week,s=((l=o.turno)==null?void 0:l.toLowerCase())||"Sin turno";return t[r]=t[r]||{},t[r][a]=t[r][a]||{},t[r][a][s]=(t[r][a][s]||0)+1,t},{}),[z,y]=k.useState(!1),[u,b]=k.useState(null),L=t=>{var r;const o=(r=m.find(a=>a.company.name===t))==null?void 0:r.company;b(o),y(!0)},j=()=>{y(!1),b(null)},_=t=>{var r;const o=[];for(const[a,s]of Object.entries(g)){const n=s[t];if(n){const l=(r=m.find(c=>c.company.name===a))==null?void 0:r.company;o.push({name:a,shifts:n,company:l})}}return o};return e.jsxs($,{breadcrumbs:Q,children:[e.jsx(M,{title:"Horario Semanal"}),e.jsxs(d,{sx:{px:{xs:2,md:5},py:4},children:[e.jsxs(x,{direction:"row",alignItems:"center",spacing:2,mb:4,children:[e.jsx(H,{color:"primary",sx:{fontSize:36}}),e.jsxs(i,{variant:"h4",fontWeight:"bold",children:["Horario Semanal - ",e.jsx("span",{style:{color:"#1976d2"},children:I.name})]})]}),Object.keys(g).length===0?e.jsxs(d,{mt:6,textAlign:"center",children:[e.jsx(f,{sx:{bgcolor:"grey.300",width:64,height:64,mx:"auto",mb:2},children:e.jsx(G,{sx:{fontSize:40,color:"grey.600"}})}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"No hay tareas programadas para esta semana."})]}):e.jsxs(E,{elevation:3,sx:{borderRadius:2,overflow:"hidden"},children:[e.jsx(d,{sx:{bgcolor:"primary.main",color:"white",p:2},children:e.jsx(i,{variant:"h6",fontWeight:"bold",textAlign:"center",children:"Calendario Semanal"})}),e.jsx(d,{sx:{p:{xs:1,md:2},background:"linear-gradient(135deg, #e0e7ff 0%, #f8fafc 100%)",borderRadius:3},children:e.jsx(A,{container:!0,spacing:2,justifyContent:"center",alignItems:"stretch",children:X.map(t=>{const o=_(t);return e.jsx(A,{item:!0,xs:12,sm:6,md:4,lg:2,sx:{display:"flex",justifyContent:"center",alignItems:"stretch"},children:e.jsxs(D,{elevation:4,sx:{width:"100%",minWidth:170,maxWidth:220,height:295,borderRadius:4,border:o.length>0?"2.5px solid #1976d2":"1.5px solid #e0e0e0",boxShadow:o.length>0?"0 6px 24px 0 rgba(25, 118, 210, 0.10)":"0 2px 8px 0 rgba(0,0,0,0.04)",background:o.length>0?"linear-gradient(135deg, #e3f0ff 0%, #f8fafc 100%)":"linear-gradient(135deg, #f3f4f6 0%, #f8fafc 100%)",display:"flex",flexDirection:"column",transition:"transform 0.18s, box-shadow 0.18s","&:hover":{transform:"translateY(-4px) scale(1.03)",boxShadow:"0 10px 32px 0 rgba(25, 118, 210, 0.18)"}},children:[e.jsx(d,{sx:{bgcolor:o.length>0?"primary.main":"grey.200",color:o.length>0?"white":"text.secondary",p:1.5,textAlign:"center",borderTopLeftRadius:16,borderTopRightRadius:16,boxShadow:o.length>0?"0 2px 8px 0 rgba(25, 118, 210, 0.10)":void 0,fontSize:"1.1rem",letterSpacing:1},children:e.jsx(i,{variant:"subtitle1",fontWeight:"bold",sx:{letterSpacing:1},children:t})}),e.jsx(R,{sx:{p:1.5,flexGrow:1,overflowY:"auto",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:o.length===0?"center":"flex-start",alignItems:"center",background:"rgba(255,255,255,0.85)",borderBottomLeftRadius:16,borderBottomRightRadius:16},children:o.length===0?e.jsx(d,{sx:{textAlign:"center",py:3},children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"Sin empresas"})}):e.jsx(x,{spacing:1.2,sx:{width:"100%"},children:o.map((r,a)=>{var s;return e.jsx(D,{elevation:0,sx:{borderRadius:2,border:"1.5px solid #e3e6f0",background:"linear-gradient(90deg, #f0f7ff 0%, #f8fafc 100%)","&:hover":{boxShadow:2,borderColor:"#1976d2"},width:"100%",mb:.5},children:e.jsxs(R,{sx:{p:1,"&:last-child":{pb:1}},children:[e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",mb:1,justifyContent:"center",children:[(s=r.company)!=null&&s.logo?e.jsx(f,{src:`/${r.company.logo}`,variant:"rounded",sx:{width:24,height:24,boxShadow:"0 2px 8px #1976d220"}}):e.jsx(f,{sx:{bgcolor:"primary.main",width:24,height:24},children:e.jsx(O,{sx:{fontSize:14}})}),e.jsx(i,{variant:"caption",fontWeight:"bold",noWrap:!0,sx:{color:"#1976d2",fontSize:"0.92rem",letterSpacing:.5},children:r.name})]}),e.jsx(x,{spacing:.5,mb:1,justifyContent:"center",direction:"row",flexWrap:"wrap",children:Object.entries(r.shifts).map(([n,l])=>{var w,C;const c=m.find(p=>{var S,v;return p.company.name===r.name&&(W[(S=p.day_of_week)==null?void 0:S.toLowerCase()]||p.day_of_week)===t&&((v=p.turno)==null?void 0:v.toLowerCase())===n});return e.jsxs(d,{sx:{width:"100%"},children:[e.jsx(J,{title:`Turno ${n}: ${l} tarea(s)`,arrow:!0,placement:"top",children:e.jsx(P,{icon:e.jsx(F,{sx:{fontSize:13}}),label:`${n.charAt(0).toUpperCase()+n.slice(1)}`,color:h[n]||"default",size:"small",sx:{fontWeight:"bold",fontSize:"0.70rem",height:22,bgcolor:h[n]==="primary"?"#e3f0ff":h[n]==="secondary"?"#fbe9ff":"#e0f7fa",color:"#1976d2",borderRadius:2,mx:.2,my:.2}})}),c&&e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:`Inicio: ${((w=c.start_time)==null?void 0:w.slice(11,16))||"--:--"} | Fin: ${((C=c.end_time)==null?void 0:C.slice(11,16))||"--:--"}`})]},n)})}),e.jsx(T,{variant:"contained",size:"small",fullWidth:!0,sx:{fontSize:"0.70rem",py:.5,minHeight:24,borderRadius:2,background:"linear-gradient(90deg, #1976d2 0%, #42a5f5 100%)",color:"#fff",fontWeight:700,boxShadow:"0 2px 8px #1976d220",mt:.5,"&:hover":{background:"linear-gradient(90deg, #1565c0 0%, #1976d2 100%)"}},startIcon:e.jsx(N,{sx:{fontSize:14}}),onClick:()=>L(r.name),children:"Ubicación"})]})},a)})})})]})},t)})})})]}),e.jsxs(V,{open:z,onClose:j,maxWidth:"md",fullWidth:!0,children:[e.jsx(Y,{children:"Ubicación de la empresa"}),e.jsx(q,{children:u?e.jsx(U,{company:u}):e.jsx(i,{children:"No se encontró la empresa seleccionada."})}),e.jsx(K,{children:e.jsx(T,{onClick:j,color:"primary",children:"Cerrar"})})]})]})]})}export{qe as default};
