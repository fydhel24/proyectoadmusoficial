import{j as e,r as T,v as R}from"./app-DWYhLQL6.js";import{A as S}from"./app-layout-p7K4X7eV.js";import{C as I}from"./Cancel-DqEYgzrO.js";import{S as V}from"./Save-cVr3gk7X.js";import{c as D}from"./createSvgIcon-C-V1FIKo.js";import{V as h}from"./Visibility-5b2QF7X4.js";import{B as o}from"./Box-BbMU-_RR.js";import{T as i}from"./Typography-IkT196je.js";import{B as p}from"./Button-BrLf_Pls.js";import{T as F}from"./TableContainer-DwTJ9q9t.js";import{P as L}from"./Paper-EniTK7He.js";import{T as W,a as z,b as m,c as M}from"./TableRow-DBOU2XrP.js";import{T as t}from"./TableCell-C5DOKis2.js";import{T as b}from"./Tooltip-D9IkZOyx.js";import{I as g}from"./IconButton-BGvBFu85.js";import{D as B,a as H,b as P}from"./DialogTitle-BRc-au27.js";import{T as U}from"./TextField-MHNYv_sC.js";import{F as _,I as $,S as E}from"./Select-DJEe7ust.js";import{M as O}from"./MenuItem-Bm9YqGqc.js";import{D as G}from"./DialogActions-2fZYmJbN.js";import"./button-wMTuvAkw.js";import"./clsx-B-dksMZM.js";import"./avatar-C0bnmZQz.js";import"./createLucideIcon-DISkT-zV.js";import"./index-vDywYphy.js";import"./index-CvZMSx04.js";import"./index-C-qtZoBa.js";import"./settings-B1FLQ7wV.js";import"./app-logo-icon-HoYzQaBs.js";import"./DefaultPropsProvider-CHy6HlRv.js";import"./createSimplePaletteValueFilter-WGi9SSDd.js";import"./useId-o3zk_1yM.js";import"./ButtonBase-DpqQEAAf.js";import"./useTimeout-CcjJ2cmE.js";import"./TransitionGroupContext-D4TXwhqE.js";import"./CircularProgress-Bo20HsGQ.js";import"./index-DtBJPI5W.js";import"./useSlot-CO4IlLCl.js";import"./useControlled-5UsadrEY.js";import"./Fade-BWgYys4A.js";import"./Grow-IF_zPiYA.js";import"./Popper-BNtv9MeI.js";import"./ownerDocument-DW-IO8s5.js";import"./Portal-Dt5KHSRP.js";import"./useSlotProps-CBCDIG0V.js";import"./Modal-N30Js5sT.js";import"./createChainedFunction-BO_9K8Jh.js";import"./useFormControl-CsRgqpY5.js";import"./isMuiElement-D94hBNTL.js";import"./List-DOdfdsGa.js";import"./debounce-Be36O1Ab.js";import"./listItemTextClasses-Cw1PQWTE.js";import"./dividerClasses-BOZ5yH6J.js";const j=D(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"})),f=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],Ge=({comprobantes:u})=>{const v=f[new Date().getMonth()],[y,l]=T.useState(!1),{data:a,setData:c,post:C,processing:w,errors:n,reset:k}=R({comprobante:null,detalle:"",glosa:"",mes:v}),x=r=>{r.preventDefault(),C(route("pagos.store"),{onSuccess:()=>{l(!1),k()}})};return e.jsxs(S,{children:[e.jsxs(o,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(90deg, #2196f3 0%, #21cbf3 100%)",px:3,py:2,borderRadius:2,color:"white"},children:[e.jsx(i,{variant:"h5",fontWeight:"bold",children:"Listado de tus Pagos"}),e.jsx(p,{variant:"contained",startIcon:e.jsx(j,{}),onClick:()=>l(!0),sx:{background:"linear-gradient(45deg, #00695c 30%, #26a69a 90%)","&:hover":{background:"linear-gradient(45deg, #004d40 30%, #00897b 90%)"}},children:"Subir Comprobante"})]}),e.jsx(F,{component:L,elevation:4,sx:{borderRadius:3,overflow:"hidden",maxWidth:900,mx:"auto",my:4},children:e.jsxs(W,{stickyHeader:!0,children:[e.jsx(z,{sx:{background:"linear-gradient(90deg, #2196f3 0%, #21cbf3 100%)"},children:e.jsxs(m,{children:[e.jsx(t,{sx:{color:"black",fontWeight:"bold",width:150,textAlign:"center",px:2},children:"Comprobante"}),e.jsx(t,{sx:{color:"black",fontWeight:"bold",width:200,textAlign:"center",px:2},children:"Detalle"}),e.jsx(t,{sx:{color:"black",fontWeight:"bold",width:120,textAlign:"center",px:2},children:"Mes"}),e.jsx(t,{sx:{color:"black",fontWeight:"bold",width:120,textAlign:"center",px:2},children:"Fecha de Registro"})]})}),e.jsx(M,{children:u.map(r=>{const s=r.company_associations;return s.length>0?s.map((d,A)=>e.jsxs(m,{sx:{"&:hover":{backgroundColor:"rgba(33, 203, 243, 0.08)"}},children:[A===0&&e.jsxs(e.Fragment,{children:[e.jsxs(t,{rowSpan:s.length,sx:{textAlign:"center",px:2,py:1},children:[["jpg","jpeg","png"].includes(r.tipo.toLowerCase())?e.jsx(o,{component:"img",src:r.comprobante,alt:"Vista previa",sx:{height:80,width:80,borderRadius:1,border:"1px solid #ddd",objectFit:"cover",mx:"auto"}}):r.tipo.toLowerCase()==="pdf"?e.jsx(o,{component:"iframe",src:r.comprobante,title:"Vista PDF",sx:{height:80,width:80,borderRadius:1,border:"1px solid #ddd",mx:"auto"}}):e.jsx(i,{variant:"body2",color:"text.secondary",textAlign:"center",children:"Archivo no compatible"}),e.jsxs(o,{mt:1,display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(b,{title:"Ver archivo",children:e.jsx(g,{href:r.comprobante,target:"_blank",rel:"noopener noreferrer",size:"small",color:"primary",children:e.jsx(h,{})})}),e.jsx(i,{variant:"caption",color:"primary",sx:{ml:1},children:"Ver archivo"})]})]}),e.jsx(t,{rowSpan:s.length,sx:{verticalAlign:"middle",px:2,py:1},children:r.detalle})]}),e.jsx(t,{sx:{textTransform:"capitalize",textAlign:"center",px:2,py:1},children:d.mes}),e.jsx(t,{sx:{textAlign:"center",px:2,py:1},children:d.fecha})]},`${r.id}-${d.id}`)):e.jsxs(m,{sx:{"&:hover":{backgroundColor:"rgba(33, 203, 243, 0.08)"}},children:[e.jsxs(t,{sx:{textAlign:"center",px:2,py:1},children:[["jpg","jpeg","png"].includes(r.tipo.toLowerCase())?e.jsx(o,{component:"img",src:r.comprobante,alt:"Vista previa",sx:{height:80,width:80,borderRadius:1,border:"1px solid #ddd",objectFit:"cover",mx:"auto"}}):r.tipo.toLowerCase()==="pdf"?e.jsx(o,{component:"iframe",src:r.comprobante,title:"Vista PDF",sx:{height:80,width:80,borderRadius:1,border:"1px solid #ddd",mx:"auto"}}):e.jsx(i,{variant:"body2",color:"text.secondary",textAlign:"center",children:"Archivo no compatible"}),e.jsxs(o,{mt:1,display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(b,{title:"Ver archivo",children:e.jsx(g,{href:r.comprobante,target:"_blank",rel:"noopener noreferrer",size:"small",color:"primary",children:e.jsx(h,{})})}),e.jsx(i,{variant:"caption",color:"primary",sx:{ml:1},children:"Ver archivo"})]})]}),e.jsx(t,{sx:{px:2,py:1},children:r.detalle}),e.jsx(t,{sx:{textTransform:"capitalize",px:2,py:1},children:r.tipo}),e.jsx(t,{colSpan:3,sx:{textAlign:"center",px:2,py:1},children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"Sin asociaciones registradas"})})]},r.id)})})]})}),e.jsxs(B,{open:y,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(H,{sx:{background:"linear-gradient(90deg, #00695c 0%, #26a69a 100%)",color:"white"},children:"Nuevo Comprobante"}),e.jsx(P,{dividers:!0,sx:{backgroundColor:"#f9f9f9"},children:e.jsxs(o,{component:"form",onSubmit:x,noValidate:!0,children:[e.jsx(U,{margin:"normal",label:"Detalle",fullWidth:!0,value:a.detalle,onChange:r=>c("detalle",r.target.value),error:!!n.detalle,helperText:n.detalle}),e.jsxs(_,{fullWidth:!0,margin:"normal",error:!!n.mes,children:[e.jsx($,{id:"mes-label",children:"Mes"}),e.jsx(E,{labelId:"mes-label",value:a.mes,label:"Mes",onChange:r=>c("mes",r.target.value),children:f.map(r=>e.jsx(O,{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},r))}),n.mes&&e.jsx(i,{variant:"caption",color:"error",children:n.mes})]}),e.jsxs(o,{mt:3,children:[e.jsx("input",{type:"file",accept:".pdf,image/*",id:"file-upload",onChange:r=>{var s;return c("comprobante",((s=r.target.files)==null?void 0:s[0])??null)},style:{display:"none"}}),e.jsx("label",{htmlFor:"file-upload",children:e.jsx(o,{sx:{border:`2px dashed ${n.comprobante?"#f44336":"#ccc"}`,padding:3,borderRadius:2,textAlign:"center",cursor:"pointer",backgroundColor:"#fff",transition:"0.2s","&:hover":{backgroundColor:"#f0f0f0"}},children:a.comprobante?e.jsx(e.Fragment,{children:a.comprobante.type.startsWith("image/")?e.jsx(o,{component:"img",src:URL.createObjectURL(a.comprobante),alt:"Vista previa",sx:{maxHeight:150,maxWidth:"100%",borderRadius:1,mb:1}}):a.comprobante.type==="application/pdf"?e.jsx(o,{sx:{width:"100%",height:150,borderRadius:1,overflow:"hidden",mb:1},children:e.jsx("embed",{src:URL.createObjectURL(a.comprobante),type:"application/pdf",width:"100%",height:"150px"})}):e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Archivo seleccionado: ",a.comprobante.name]})}):e.jsxs(e.Fragment,{children:[e.jsx(j,{sx:{fontSize:40,color:"#666"}}),e.jsx(i,{variant:"body2",color:"text.secondary",mt:1,children:"Haz clic para seleccionar un archivo PDF o imagen"})]})})}),n.comprobante&&e.jsx(i,{variant:"caption",color:"error",display:"block",mt:1,children:n.comprobante})]})]})}),e.jsxs(G,{children:[e.jsx(p,{onClick:()=>l(!1),startIcon:e.jsx(I,{}),variant:"outlined",color:"inherit",children:"Cancelar"}),e.jsx(p,{onClick:x,startIcon:e.jsx(V,{}),variant:"contained",color:"success",disabled:w,children:"Guardar"})]})]})]})};export{Ge as default};
