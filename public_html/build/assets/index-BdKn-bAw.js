import{j as i,r as c,a as p}from"./app-CUaISujP.js";import{A as B,a as $}from"./app-layout-CWuB6NnO.js";import{c as M}from"./createSvgIcon-CsdeE9h-.js";import{W as z}from"./WbSunny-DEI8i_bF.js";import{u as L,T as h}from"./Typography-BXYVZiZC.js";import{B as R}from"./Box-F7bZ1tjM.js";import{G as S}from"./Grid-D22HHTDy.js";import{F}from"./Fade-ChnIJY1B.js";import{C as G}from"./Card-WOrh8z9Z.js";import{C as N}from"./CardContent-Cfc9Wxl5.js";import{S as j}from"./Stack-DTJ6fEPw.js";import{B as w}from"./Button-BnJ1HrMo.js";import{C as U}from"./Chip-3MHDmL7Q.js";import{S as H}from"./Snackbar-B7vsGb3O.js";import{A as J}from"./Alert-C5OLpzZT.js";import{s as V,f as q}from"./format-C6wJrPT2.js";import{e as K}from"./endOfWeek-DzanyrUO.js";import"./button-0Hij8kFa.js";import"./clsx-B-dksMZM.js";import"./avatar-vMY4vQMB.js";import"./createLucideIcon-XVNSMSUw.js";import"./index-DZ5Pi2z6.js";import"./index-b-iRS2c_.js";import"./index-JQPl0ewz.js";import"./settings-CLpIyV6T.js";import"./app-logo-icon-DxXq1G7b.js";import"./DefaultPropsProvider-DnyQ5W7l.js";import"./useThemeProps-DJqCDgEx.js";import"./getThemeProps-DVd4S7h3.js";import"./isMuiElement-6h6e2Qkh.js";import"./TransitionGroupContext-Ci2WFGYL.js";import"./useId-B2OWouFT.js";import"./ButtonBase-DE1CgUJq.js";import"./useTimeout-BTm0asfU.js";import"./CircularProgress-nCrY-oKD.js";import"./useSlot-CYEIGEy5.js";import"./ClickAwayListener-CJ5v628k.js";import"./ownerDocument-DW-IO8s5.js";import"./Grow-B_EMGJuI.js";import"./Close-B0CWLwSb.js";import"./IconButton-C9CZ2MaG.js";const P=M(i.jsx("path",{d:"M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2"})),Q=[{title:"Agregar Empresas",href:"/influencer-availability"}],X={monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",saturday:"Sábado",sunday:"Domingo"},Re=()=>{const n=L(),[f,D]=c.useState([]),[C,A]=c.useState([]),[l,y]=c.useState({}),[W,E]=c.useState(null),[g,s]=c.useState({open:!1,message:"",severity:"success"});c.useEffect(()=>{A(I()),u(),_()},[]);const _=()=>{p.get("/api/auth/user").then(a=>E(a.data.id))},I=()=>{const a=V(new Date,{weekStartsOn:1}),t=K(new Date,{weekStartsOn:1}),e=[];for(let o=new Date(a);o<=t;o.setDate(o.getDate()+1)){const m=new Date(o),b=m.getDay();b>=1&&b<=6&&e.push(m)}return e},u=()=>{p.get("/api/influencer-availability").then(a=>{D(a.data);const t={};a.data.forEach(e=>{t[e.day_of_week]=e.turno}),y(t)}).catch(()=>s({open:!0,message:"Error obteniendo disponibilidad",severity:"error"}))},x=(a,t)=>{const e=l[a];if(e===t){v(a,e);return}y(d=>({...d,[a]:t}));const o=t==="mañana"?"09:30":"14:00",m=t==="mañana"?"13:00":"18:00";f.find(d=>d.day_of_week===a&&d.turno===e)&&v(a,e);const k=f.find(d=>d.day_of_week===a&&d.turno===t);k?O(k.id,o,m):T(a,t,o,m)},T=(a,t,e,o)=>{p.post("/api/influencer-availability",{user_id:W,day_of_week:a,turno:t,start_time:e,end_time:o}).then(()=>{s({open:!0,message:"Disponibilidad guardada",severity:"success"}),u()}).catch(()=>s({open:!0,message:"Error guardando disponibilidad",severity:"error"}))},O=(a,t,e)=>{p.put(`/api/influencer-availability/${a}`,{start_time:t,end_time:e}).then(()=>{s({open:!0,message:"Disponibilidad actualizada",severity:"success"}),u()}).catch(()=>s({open:!0,message:"Error actualizando disponibilidad",severity:"error"}))},v=(a,t)=>{const e=f.find(o=>o.day_of_week===a&&o.turno===t);e&&p.delete(`/api/influencer-availability/${e.id}`).then(()=>{s({open:!0,message:"Disponibilidad eliminada",severity:"success"}),u()}).catch(()=>s({open:!0,message:"Error eliminando disponibilidad",severity:"error"}))},r=(a,t)=>l[a]===t;return i.jsxs(B,{breadcrumbs:Q,children:[i.jsxs(R,{sx:{borderRadius:4,background:`linear-gradient(135deg, ${n.palette.background.paper} 60%, ${n.palette.grey[100]})`,boxShadow:6,p:{xs:2,md:4},mb:4},children:[i.jsx(h,{variant:"h4",fontWeight:"bold",color:"primary",gutterBottom:!0,children:"Mi Dias Disponibles"}),i.jsx(h,{variant:"subtitle1",color:"text.secondary",sx:{mb:3},children:"Agrega los días y turnos disponibles para la semana actual"}),i.jsx(S,{container:!0,spacing:3,children:C.filter(a=>{const t=a.getDay();return t>=1&&t<=6}).map((a,t)=>{const e=q(a,"EEEE").toLowerCase(),o=X[e];return i.jsx(S,{item:!0,xs:12,sm:6,md:2.4,children:i.jsx(F,{in:!0,timeout:600+t*100,children:i.jsx(G,{elevation:r(e,"mañana")||r(e,"tarde")?8:2,sx:{borderRadius:3,border:r(e,"mañana")||r(e,"tarde")?`2px solid ${n.palette.primary.main}`:`1px solid ${n.palette.grey[200]}`,background:r(e,"mañana")?"linear-gradient(135deg, #e3fcec 60%, #b2f2e5)":r(e,"tarde")?"linear-gradient(135deg, #fff3e0 60%, #ffe0b2)":n.palette.background.paper,transition:"all 0.3s"},children:i.jsx(N,{children:i.jsxs(j,{alignItems:"center",spacing:2,children:[i.jsx(h,{variant:"h6",fontWeight:"bold",color:"text.primary",children:o}),i.jsxs(j,{direction:"row",spacing:2,width:"100%",children:[i.jsx(w,{fullWidth:!0,variant:r(e,"mañana")?"contained":"outlined",color:"success",startIcon:i.jsx(z,{}),sx:{fontWeight:600,boxShadow:r(e,"mañana")?3:0,background:r(e,"mañana")?"linear-gradient(90deg, #43e97b 0%, #38f9d7 100%)":void 0,color:r(e,"mañana")?"#fff":void 0,borderColor:r(e,"mañana")?n.palette.success.main:void 0,transition:"all 0.2s"},onClick:()=>x(e,"mañana"),children:"Mañana"}),i.jsx(w,{fullWidth:!0,variant:r(e,"tarde")?"contained":"outlined",color:"warning",startIcon:i.jsx(P,{}),sx:{fontWeight:600,boxShadow:r(e,"tarde")?3:0,background:r(e,"tarde")?"linear-gradient(90deg, #f7971e 0%, #ffd200 100%)":void 0,color:r(e,"tarde")?"#fff":void 0,borderColor:r(e,"tarde")?n.palette.warning.main:void 0,transition:"all 0.2s"},onClick:()=>x(e,"tarde"),children:"Tarde"})]}),l[e]&&i.jsx(U,{icon:i.jsx($,{}),label:l[e]==="mañana"?"10:30 - 13:00":"15:00 - 18:00",color:l[e]==="mañana"?"success":"warning",sx:{fontWeight:500}})]})})})})},t)})})]}),i.jsx(H,{open:g.open,autoHideDuration:4e3,onClose:()=>s(a=>({...a,open:!1})),anchorOrigin:{vertical:"top",horizontal:"center"},children:i.jsx(J,{severity:g.severity,onClose:()=>s(a=>({...a,open:!1})),children:g.message})})]})};export{Re as default};
