import{q as ye,r as p,j as e,a as b}from"./app-YEuHkux5.js";import{A as we,B as ie,P as Se}from"./app-layout-Dh5sl-jU.js";import{u as ve,T as d,P as Ce}from"./Typography-D8rBbavg.js";import{B as v}from"./Box-DZXJg_qv.js";import{S as m}from"./Stack-DH4x_kPu.js";import{T as M}from"./TextField-CpThoci2.js";import{C as O}from"./Card-DmMu79y6.js";import{C as H}from"./CardContent-DNXYRSCg.js";import{B as w}from"./Button-CMjaMz42.js";import{P as ke}from"./PictureAsPdf-Cqo8bcDl.js";import{T as ze,a as Ie,b as F,c as We}from"./TableRow-cov9Pl37.js";import{T as x}from"./TableCell-9OmuTGMb.js";import{A as u}from"./Avatar-JivPr5ws.js";import{S as Ae}from"./Schedule-CCTOKb2z.js";import{C as L}from"./Chip-D0HSmcM1.js";import{C as _e}from"./CardHeader-DpzeDNoD.js";import{T as ne}from"./Tooltip-MqpFe2zP.js";import{I as oe}from"./IconButton-DepEmupO.js";import{A as Ee}from"./Add-DFr0aPth.js";import{D as Fe}from"./Delete-Ct1Ol2la.js";import{F as Le}from"./Fade-pc_dseJo.js";import{C as De}from"./Close-Bm0cbP4p.js";import{D as Pe,a as Te,b as Re}from"./DialogTitle-DT-dALo8.js";import{B as Be,N as $e}from"./NightsStay-DvUVHzE6.js";import{F as te,I as se,S as le}from"./Select-B_eRVbu_.js";import{M as D}from"./MenuItem-EZI4tQJZ.js";import{F as Me}from"./FormControlLabel-4W3to2qB.js";import{S as Oe}from"./Switch-C0mIqPOG.js";import{D as He}from"./DialogActions-DSNCgedV.js";import{W as qe}from"./WbSunny-z-2SHdEc.js";import{a as t}from"./DefaultPropsProvider-CEXgxhq8.js";import"./button-_5e2JbJM.js";import"./clsx-B-dksMZM.js";import"./avatar-DPKp3hQk.js";import"./createLucideIcon-9JrBpBfL.js";import"./index-D3g71isE.js";import"./index-B2kdsAU2.js";import"./index-m3ZdHyWT.js";import"./settings-d7GkTK56.js";import"./app-logo-icon-BYryv9rn.js";import"./createSvgIcon-Bv7lX4UF.js";import"./createSimplePaletteValueFilter-J_8iZNoO.js";import"./useThemeProps-B1feN13w.js";import"./getThemeProps-BO29yZBp.js";import"./useSlot-q3G4gJ7a.js";import"./TransitionGroupContext-mQf08jKB.js";import"./useId-DF1cwINX.js";import"./ButtonBase-CS4YXIYb.js";import"./useTimeout-g4Ibx1fA.js";import"./CircularProgress-Bn3EXqD5.js";import"./index-CyVCCTxO.js";import"./useControlled-CZTOPfKL.js";import"./Grow-J0HjpUkY.js";import"./Popper-CBS_IXcw.js";import"./ownerDocument-DW-IO8s5.js";import"./Portal-1gL4VHaW.js";import"./useSlotProps-BXV3urdk.js";import"./Modal-B5zRzlCf.js";import"./isMuiElement-C40F-WzM.js";import"./List-2At25vZV.js";import"./debounce-Be36O1Ab.js";import"./listItemTextClasses-B6w7MOm2.js";import"./dividerClasses-Df44jC95.js";import"./SwitchBase-D256AbvG.js";const ea=()=>{const c=ve(),{datosPorEmpresa:de,diasSemana:z,influencers:I}=ye().props,[j,ce]=p.useState(de),[q,N]=p.useState("09:30"),[Y,G]=p.useState("13:00"),[W,pe]=p.useState(""),me=p.useMemo(()=>{if(!W.trim())return j;const r=n=>n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();return j.filter(n=>r(n.empresa.name||"").includes(r(W)))},[W,j]),[fe,Q]=p.useState(!1),[o,U]=p.useState(null),[P,J]=p.useState(""),[T,V]=p.useState(!1),[R,X]=p.useState(""),[K,A]=p.useState(!1),[Z,ee]=p.useState(null),[re,B]=p.useState(null),S=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)","linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)","linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)"],ge=async()=>{if(o)try{await b.post("/agregar-disponibilidad-empresa",{company_id:o.empresaId,day_of_week:o.dia,turno:o.turno,start_time:q,end_time:Y}),window.location.reload()}catch{alert("Error al agregar disponibilidad")}},ae={monday:"Lunes",tuesday:"Martes",wednesday:"Mi칠rcoles",thursday:"Jueves",friday:"Viernes",saturday:"S치bado",sunday:"Domingo"},_=r=>r==="ma침ana"?e.jsx(qe,{fontSize:"small"}):e.jsx($e,{fontSize:"small"}),E=r=>r==="ma침ana"?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"linear-gradient(135deg, #4A90E2 0%, #7B68EE 100%)",xe=(r,n,a)=>{var l,g;const s=j.find(h=>h.empresa.id===r);let i={start_time:"",end_time:""};if(s){const f=(s.empresa.availabilityDays||[]).find(C=>{var y,k;return((y=C.day_of_week)==null?void 0:y.toLowerCase())===n.toLowerCase()&&((k=C.turno)==null?void 0:k.toLowerCase())===a.toLowerCase()});f&&(i.start_time=((l=f.start_time)==null?void 0:l.slice(0,5))||"",i.end_time=((g=f.end_time)==null?void 0:g.slice(0,5))||"")}N(i.start_time||(a==="ma침ana"?"09:30":"14:00")),G(i.end_time||(a==="ma침ana"?"13:00":"18:00")),U({empresaId:r,dia:n,turno:a}),Q(!0)},$=()=>{Q(!1),U(null),J(""),X(""),V(!1)},he=async(r,n,a,s)=>{A(!0);try{await b.post("/quitar-influencer",{empresa_id:r,dia:n,turno:a,influencer_id:s}),ce(i=>i.map(l=>l.empresa.id===r?{...l,influencersAsignados:{...l.influencersAsignados,[n]:{...l.influencersAsignados[n],[a]:l.influencersAsignados[n][a].filter(g=>g.id!==s)}}}:l))}catch(i){console.error("Error al quitar influencer:",i),alert("Hubo un error al quitar el influencer")}finally{A(!1)}},be=r=>new Date(r).toLocaleDateString("es-ES",{day:"numeric",month:"short"}),ue=()=>j.reduce((r,n)=>r+Object.values(n.influencersAsignados).reduce((a,s)=>a+Object.values(s).reduce((i,l)=>i+l.length,0),0),0),je=async()=>{var r,n;A(!0),ee(null),B(null);try{const a=await b.post("/asignar-empresas-masivamente");ee(a.data.message),console.log("Detalle de asignaciones:",a.data.detalle),window.location.reload()}catch(a){(n=(r=a.response)==null?void 0:r.data)!=null&&n.message?B(a.response.data.message):B("Ocurri칩 un error inesperado al asignar empresas.")}finally{A(!1)}};return e.jsxs(we,{children:[e.jsxs(v,{p:3,sx:{background:`linear-gradient(135deg, ${t(c.palette.primary.light,.05)} 0%, ${t(c.palette.secondary.light,.05)} 100%)`,minHeight:"100vh"},children:[e.jsxs(v,{mb:4,children:[e.jsxs(m,{direction:{xs:"column",md:"row"},spacing:3,alignItems:"center",justifyContent:"space-between",children:[e.jsxs(v,{children:[e.jsx(d,{variant:"h3",fontWeight:"bold",sx:{background:`linear-gradient(45deg, ${c.palette.primary.main}, ${c.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:1},children:"游늰 Gesti칩n Semanal"}),e.jsx(d,{variant:"h6",color:"text.secondary",children:"Asignaci칩n de influencers por empresa y turno"})]}),e.jsx(v,{mb:2,display:"flex",alignItems:"center",gap:2,children:e.jsx(M,{label:"Buscar empresa",variant:"outlined",size:"small",value:W,onChange:r=>pe(r.target.value),sx:{minWidth:280,background:"#fff",borderRadius:2}})}),e.jsxs(m,{direction:"row",spacing:2,children:[e.jsx(O,{sx:{minWidth:120},children:e.jsxs(H,{sx:{py:1.5,px:2,textAlign:"center"},children:[e.jsx(d,{variant:"h4",fontWeight:"bold",color:"primary",children:j.length}),e.jsx(d,{variant:"caption",color:"text.secondary",children:"Empresas"})]})}),e.jsx(O,{sx:{minWidth:120},children:e.jsxs(H,{sx:{py:1.5,px:2,textAlign:"center"},children:[e.jsx(d,{variant:"h4",fontWeight:"bold",color:"secondary",children:ue()}),e.jsx(d,{variant:"caption",color:"text.secondary",children:"Asignados"})]})})]})]}),e.jsxs(v,{mt:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2,children:[e.jsx(w,{variant:"contained",startIcon:e.jsx(ke,{}),onClick:()=>window.open("/disponibilidad-semanal-pdf","_blank"),sx:{textTransform:"none",fontWeight:"bold",borderRadius:3,background:"linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)",boxShadow:`0 8px 32px ${t("#2575fc",.3)}`,px:4,py:1.5,"&:hover":{background:"linear-gradient(135deg, #4b0eb9 0%, #1a56d0 100%)",transform:"translateY(-2px)",boxShadow:`0 12px 40px ${t("#2575fc",.4)}`},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:"Generar Reporte PDF"}),e.jsx(w,{variant:"contained",color:"error",onClick:async()=>{if(window.confirm("쮼st치s seguro de que deseas eliminar TODAS las disponibilidades de influencers?"))try{const r=await b.post("/clear-availabilities");alert(r.data.message),window.location.reload()}catch{alert("Error al limpiar disponibilidades")}},sx:{textTransform:"none",fontWeight:"bold",borderRadius:3,background:"linear-gradient(135deg, #ff1744 0%, #d50000 100%)",boxShadow:`0 8px 32px ${t("#d50000",.3)}`,px:4,py:1.5,"&:hover":{background:"linear-gradient(135deg, #b71c1c 0%, #c62828 100%)",transform:"translateY(-2px)",boxShadow:`0 12px 40px ${t("#d50000",.4)}`},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:"Limpiar Disponibilidades"}),e.jsxs(v,{children:[e.jsx(w,{variant:"contained",onClick:je,disabled:K,sx:{textTransform:"none",fontWeight:"bold",borderRadius:3,background:"linear-gradient(135deg, #28a745 0%, #218838 100%)",boxShadow:`0 8px 32px ${t("#218838",.3)}`,px:4,py:1.5,"&:hover":{background:"linear-gradient(135deg, #1e7e34 0%, #1c7430 100%)",transform:"translateY(-2px)",boxShadow:`0 12px 40px ${t("#218838",.4)}`},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:K?"Asignando...":"Asignar Empresas Masivamente"}),Z&&e.jsx(d,{mt:1,color:"success.main",fontWeight:"medium",children:Z}),re&&e.jsx(d,{mt:1,color:"error.main",fontWeight:"medium",children:re})]})]})]}),e.jsx(Ce,{elevation:0,sx:{overflowX:"auto",borderRadius:4,background:t(c.palette.background.paper,.8),backdropFilter:"blur(10px)",border:`1px solid ${t(c.palette.divider,.1)}`,position:"relative"},children:e.jsxs(ze,{sx:{borderCollapse:"separate",borderSpacing:0,fontSize:"0.80rem"},children:[e.jsxs(Ie,{children:[e.jsxs(F,{sx:{background:"linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)","& th":{color:"#fff",fontFamily:"'Poppins', sans-serif",fontWeight:"600",fontSize:"0.90rem",py:1,px:1}},children:[e.jsx(x,{sx:{width:120,pl:1,position:"sticky",left:0,zIndex:10,background:"linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)",borderRight:"1px solid rgba(255,255,255,0.2)"},children:e.jsxs(m,{direction:"row",alignItems:"center",gap:.5,children:[e.jsx(u,{sx:{bgcolor:t("#fff",.2),width:24,height:24},children:e.jsx(ie,{fontSize:"small"})}),e.jsx("span",{style:{fontSize:"0.95rem"},children:"Empresa"})]})}),e.jsx(x,{sx:{width:80,pl:1,fontWeight:"bold"},children:"Turno"}),z.map((r,n)=>e.jsx(x,{align:"center",children:e.jsxs(m,{alignItems:"center",gap:.2,children:[e.jsx(u,{sx:{bgcolor:t("#fff",.2),width:20,height:20},children:e.jsx(Ae,{fontSize:"inherit"})}),e.jsx(d,{fontWeight:"bold",fontSize:"0.80rem",children:ae[r.nombre.toLowerCase()]??r.nombre}),e.jsx(L,{label:be(r.fecha),size:"small",sx:{bgcolor:t("#fff",.2),color:"#fff",fontSize:"0.65rem",height:18,px:.5}})]})},n))]}),e.jsxs(F,{sx:{background:"linear-gradient(90deg, #f5f7fa 0%, #c3cfe2 100%)","& td":{fontFamily:"'Poppins', sans-serif",fontSize:"0.75rem",py:.5,px:1,color:"#333",borderBottom:"1px solid #e0e0e0"}},children:[e.jsx(x,{rowSpan:2,sx:{fontWeight:"bold",color:"#666",background:"linear-gradient(90deg, #f5f7fa 0%, #c3cfe2 100%)",verticalAlign:"middle",position:"sticky",left:0,zIndex:10,borderRight:"1px solid rgba(224,224,224,0.5)"},children:"Influencers disponibles"}),e.jsx(x,{sx:{fontWeight:"bold",color:"#FFA500",verticalAlign:"middle",background:"transparent",borderBottom:"1px solid #e0e0e0"},children:e.jsxs(m,{direction:"row",alignItems:"center",gap:1,children:[e.jsx(u,{sx:{background:E("ma침ana"),width:20,height:20,fontSize:"1rem"},children:_("ma침ana")}),e.jsx(d,{fontWeight:"bold",fontSize:"0.80rem",children:"Ma침ana"})]})}),z.map((r,n)=>{const a=I.filter(s=>{var i,l;return(l=(i=s.availabilities)==null?void 0:i.some)==null?void 0:l.call(i,g=>{var h,f;return((h=g.day_of_week)==null?void 0:h.toLowerCase())===r.nombre.toLowerCase()&&((f=g.turno)==null?void 0:f.toLowerCase())==="ma침ana"})});return e.jsx(x,{align:"center",children:e.jsx(m,{direction:"row",spacing:.5,alignItems:"center",flexWrap:"wrap",justifyContent:"center",children:a.length>0?a.map(s=>e.jsx(L,{label:s.name.split(" ")[0],size:"small",sx:{fontSize:"0.68rem",bgcolor:t(c.palette.primary.light,.15),color:c.palette.primary.dark,mb:.1}},`manana-${s.id}`)):e.jsx(d,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.68rem"},children:"-"})})},n)})]}),e.jsxs(F,{sx:{background:"linear-gradient(90deg, #f5f7fa 0%, #c3cfe2 100%)","& td":{fontFamily:"'Poppins', sans-serif",fontSize:"0.75rem",py:.5,px:1,color:"#333",borderBottom:"1px solid #e0e0e0"}},children:[e.jsx(x,{sx:{fontWeight:"bold",color:"#4A90E2",verticalAlign:"middle",background:"transparent",borderBottom:"1px solidrgb(232, 11, 11)"},children:e.jsxs(m,{direction:"row",alignItems:"center",gap:1,children:[e.jsx(u,{sx:{background:E("tarde"),width:20,height:20,fontSize:"1rem"},children:_("tarde")}),e.jsx(d,{fontWeight:"bold",fontSize:"0.80rem",children:"Tarde"})]})}),z.map((r,n)=>{const a=I.filter(s=>{var i,l;return(l=(i=s.availabilities)==null?void 0:i.some)==null?void 0:l.call(i,g=>{var h,f;return((h=g.day_of_week)==null?void 0:h.toLowerCase())===r.nombre.toLowerCase()&&((f=g.turno)==null?void 0:f.toLowerCase())==="tarde"})});return e.jsx(x,{align:"center",children:e.jsx(m,{direction:"row",spacing:.5,alignItems:"center",flexWrap:"wrap",justifyContent:"center",children:a.length>0?a.map(s=>e.jsx(L,{label:s.name.split(" ")[0],size:"small",sx:{fontSize:"0.68rem",bgcolor:t(c.palette.secondary.light,.15),color:c.palette.secondary.dark,mb:.1}},`tarde-${s.id}`)):e.jsx(d,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.68rem"},children:"-"})})},n)})]})]}),e.jsx(We,{children:me.map((r,n)=>["ma침ana","tarde"].map((a,s)=>e.jsxs(F,{sx:{background:S[n%S.length],"& td":{fontFamily:"'Poppins', sans-serif",fontSize:"0.80rem",py:1,px:1}},children:[s===0?e.jsx(x,{rowSpan:2,sx:{fontWeight:"bold",pl:1,verticalAlign:"middle",background:S[n%S.length],borderBottom:"1px solid #e0e0e0",position:"sticky",left:0,zIndex:5,borderRight:"1px solid rgba(224,224,224,0.5)"},children:e.jsxs(m,{direction:"row",alignItems:"center",gap:1,children:[e.jsx(u,{sx:{bgcolor:t("#fff",.3),color:c.palette.text.primary,width:28,height:28,fontSize:"1rem"},children:e.jsx(ie,{fontSize:"small"})}),e.jsx(d,{variant:"subtitle2",fontWeight:"bold",fontSize:"0.90rem",children:r.empresa.name??"Empresa sin nombre"})]})}):null,e.jsx(x,{sx:{fontWeight:"bold",color:a==="ma침ana"?"#FFA500":"#4A90E2",verticalAlign:"middle",background:S[n%S.length],borderBottom:a==="ma침ana"?"1px solid #e0e0e0":void 0},children:e.jsxs(m,{direction:"row",alignItems:"center",gap:1,children:[e.jsx(u,{sx:{background:E(a),width:20,height:20,fontSize:"1rem"},children:_(a)}),e.jsx(d,{fontWeight:"bold",fontSize:"0.80rem",children:a.charAt(0).toUpperCase()+a.slice(1)})]})}),z.map((i,l)=>{var f,C;const h=(r.disponibilidad[i.nombre.toLowerCase()]||[]).includes(a);return e.jsx(x,{sx:{verticalAlign:"top",px:1,position:"relative","& .agregar-dia-btn":{opacity:0,transition:"opacity 0.2s",pointerEvents:"none"},"&:hover .agregar-dia-btn":{opacity:1,pointerEvents:"auto"}},children:h?e.jsxs(O,{sx:{width:"100%",background:t("#fff",.95),borderRadius:1,border:`1px solid ${a==="ma침ana"?t("#FFD700",.2):t("#4A90E2",.2)}`,boxShadow:"none",position:"relative"},children:[e.jsx(_e,{avatar:e.jsx(u,{sx:{background:E(a),width:20,height:20,fontSize:"1rem"},children:_(a)}),title:e.jsx(d,{variant:"subtitle2",fontWeight:"bold",fontSize:"0.80rem",children:a.charAt(0).toUpperCase()+a.slice(1)}),action:e.jsxs(m,{direction:"row",gap:.5,children:[e.jsx(ne,{title:"Agregar Influencer",children:e.jsx(oe,{size:"small",onClick:()=>xe(r.empresa.id,i.nombre.toLowerCase(),a),sx:{bgcolor:t(c.palette.primary.main,.1),"&:hover":{bgcolor:t(c.palette.primary.main,.2),transform:"scale(1.1)"},width:24,height:24},children:e.jsx(Ee,{fontSize:"inherit"})})}),e.jsx(ne,{title:"Quitar D칤a",children:e.jsx(oe,{size:"small",color:"error",onClick:async()=>{try{await b.post("/quitar-disponibilidad-empresa",{company_id:r.empresa.id,day_of_week:i.nombre.toLowerCase(),turno:a}),window.location.reload()}catch{alert("Error al quitar disponibilidad")}},sx:{bgcolor:t(c.palette.error.main,.08),"&:hover":{bgcolor:t(c.palette.error.main,.18),transform:"scale(1.1)"},width:24,height:24},children:e.jsx(Fe,{fontSize:"inherit"})})})]}),sx:{py:.5,px:1}}),e.jsx(H,{sx:{pt:0,px:1,pb:1},children:e.jsx(m,{spacing:.5,children:(((C=(f=r.influencersAsignados)==null?void 0:f[i.nombre.toLowerCase()])==null?void 0:C[a])??[]).map((y,k)=>e.jsx(Le,{in:!0,timeout:400+k*80,children:e.jsx(L,{avatar:e.jsx(u,{sx:{bgcolor:t(a==="ma침ana"?"#4caf50":"#2196f3",.15),width:18,height:18},children:e.jsx(Se,{fontSize:"inherit"})}),label:e.jsx("span",{style:{fontSize:"0.75rem"},children:y.name.split(" ")[0]}),deleteIcon:e.jsx(De,{fontSize:"inherit"}),onDelete:()=>he(r.empresa.id,i.nombre.toLowerCase(),a,y.id),variant:"outlined",color:a==="ma침ana"?"success":"info",sx:{borderRadius:1,height:24,fontSize:"0.75rem","& .MuiChip-deleteIcon":{color:c.palette.error.main,"&:hover":{color:c.palette.error.dark}}}})},k))})})]}):e.jsx(w,{size:"small",variant:"outlined",color:"black",className:"agregar-dia-btn",onClick:async()=>{try{await b.post("/agregar-disponibilidad-empresa",{company_id:r.empresa.id,day_of_week:i.nombre.toLowerCase(),turno:a}),window.location.reload()}catch{alert("Error al agregar disponibilidad")}},sx:{fontSize:"0.70rem",borderRadius:2,minWidth:0,px:1,py:.5},children:"Agregar D칤a"})},l)})]},`${r.empresa.id}-${a}`)))})]})})]}),e.jsxs(Pe,{open:fe,onClose:$,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(Te,{sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1,background:"linear-gradient(90deg, #6a11cb, #2575fc)",color:"#fff",borderRadius:"8px 8px 0 0",boxShadow:"0 3px 10px rgba(37, 117, 252, 0.3)",fontFamily:"'Poppins', sans-serif"},children:[e.jsx(M,{label:"Hora de inicio",type:"time",value:q,onChange:r=>N(r.target.value),InputLabelProps:{shrink:!0},inputProps:{step:300},fullWidth:!0}),e.jsx(M,{label:"Hora de fin",type:"time",value:Y,onChange:r=>G(r.target.value),InputLabelProps:{shrink:!0},inputProps:{step:300},fullWidth:!0}),e.jsx(w,{variant:"outlined",color:"primary",onClick:ge,sx:{borderRadius:2,fontWeight:"bold"},children:"Agregar D칤a con Horario"}),e.jsx(Be,{}),"Agregar Influencer"]}),e.jsx(Re,{dividers:!0,sx:{backgroundColor:"#f9faff",fontFamily:"'Poppins', sans-serif",color:"#333",paddingY:3},children:e.jsxs(m,{spacing:2,children:[e.jsxs(d,{sx:{fontWeight:"600"},children:[e.jsx("strong",{children:"D칤a:"})," ",e.jsx("em",{children:ae[(o==null?void 0:o.dia)??""]??(o==null?void 0:o.dia)})]}),e.jsxs(d,{sx:{fontWeight:"600"},children:[e.jsx("strong",{children:"Turno:"})," ",e.jsx("em",{children:o==null?void 0:o.turno})]}),e.jsxs(te,{fullWidth:!0,variant:"outlined",sx:{mt:1},children:[e.jsx(se,{id:"influencer-label",children:"Influencer"}),e.jsx(le,{labelId:"influencer-label",value:P,label:"Influencer",onChange:r=>J(r.target.value),sx:{borderRadius:2,backgroundColor:"#fff",boxShadow:"0 1px 4px rgba(0,0,0,0.1)"},children:(()=>{var a,s;const r=j.find(i=>i.empresa.id===(o==null?void 0:o.empresaId)),n=((s=(a=r==null?void 0:r.influencersDisponibles)==null?void 0:a[o==null?void 0:o.dia])==null?void 0:s[o==null?void 0:o.turno])||[];return n.length===0?e.jsx(D,{disabled:!0,children:"No hay influencers disponibles"}):n.map(i=>e.jsx(D,{value:i.id,children:i.name},i.id))})()})]}),e.jsx(Me,{control:e.jsx(Oe,{checked:T,onChange:r=>V(r.target.checked),color:"primary"}),label:"Agregar otro influencer (todos)"}),T&&e.jsxs(te,{fullWidth:!0,variant:"outlined",children:[e.jsx(se,{id:"influencer-extra-label",children:"Influencer adicional"}),e.jsx(le,{labelId:"influencer-extra-label",value:R,label:"Influencer adicional",onChange:r=>X(r.target.value),sx:{borderRadius:2,backgroundColor:"#fff",boxShadow:"0 1px 4px rgba(0,0,0,0.1)"},children:I.length===0?e.jsx(D,{disabled:!0,children:"No hay influencers registrados"}):I.map(r=>e.jsx(D,{value:r.id,children:r.name},r.id))})]})]})}),e.jsxs(He,{sx:{backgroundColor:"#f5f7ff",padding:2,borderRadius:"0 0 8px 8px",gap:1},children:[e.jsx(w,{onClick:$,sx:{textTransform:"none",fontWeight:"bold",color:"#6a11cb","&:hover":{backgroundColor:"#e8e0f7"},borderRadius:2},children:"Cancelar"}),e.jsx(w,{variant:"contained",color:"primary",sx:{background:"linear-gradient(90deg, #6a11cb, #2575fc)",textTransform:"none",fontWeight:"bold",borderRadius:2,boxShadow:"0 4px 15px rgba(37,117,252,0.4)","&:hover":{background:"linear-gradient(90deg, #4b0eb9, #1a56d0)",boxShadow:"0 6px 20px rgba(37,117,252,0.6)"}},onClick:async()=>{if(!o)return;const r=[];if(P&&r.push(b.post("/asignar-influencer",{empresa_id:o.empresaId,dia:o.dia,turno:o.turno,influencer_id:P})),T&&R&&r.push(b.post("/asignar-influencer",{empresa_id:o.empresaId,dia:o.dia,turno:o.turno,influencer_id:R})),r.length===0){alert("Debes seleccionar al menos un influencer.");return}try{await Promise.all(r),$(),window.location.reload()}catch(n){console.error("Error al asignar influencer(es):",n),alert("Hubo un error al asignar el influencer.")}},children:"Guardar"})]})]})]})};export{ea as default};
