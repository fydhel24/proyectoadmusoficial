import{r as u,a as h,j as r,$ as v}from"./app-DWYhLQL6.js";import{A as w,B as z}from"./app-layout-p7K4X7eV.js";import{d as E}from"./debounce-Be36O1Ab.js";import{B as i}from"./Box-BbMU-_RR.js";import{C as f}from"./Container-C7xxEfFj.js";import{T as t}from"./Typography-IkT196je.js";import{G as b}from"./Grid-DU2EuT6q.js";import{C as S}from"./Card-8ZfkaAJ7.js";import{C as T}from"./CardContent-JwUFqTB9.js";import{C as d}from"./Chip-Dd1dfm5j.js";import{F}from"./FolderOutlined-Vvmzl4gO.js";import{C as R}from"./CalendarToday-zfC2SNRe.js";import{R as W,a as c}from"./RadioGroup-Dte4L1TE.js";import{F as p}from"./FormControlLabel-C_q7oJPT.js";import{T as M}from"./TextField-MHNYv_sC.js";import{P as N}from"./Paper-EniTK7He.js";import{b as m}from"./DefaultPropsProvider-CHy6HlRv.js";import{f as L}from"./format-C6wJrPT2.js";import"./button-wMTuvAkw.js";import"./clsx-B-dksMZM.js";import"./avatar-C0bnmZQz.js";import"./createLucideIcon-DISkT-zV.js";import"./index-vDywYphy.js";import"./index-CvZMSx04.js";import"./index-C-qtZoBa.js";import"./settings-B1FLQ7wV.js";import"./app-logo-icon-HoYzQaBs.js";import"./createSvgIcon-C-V1FIKo.js";import"./useThemeProps-Bas4AH8z.js";import"./getThemeProps-DLKBaTjH.js";import"./createSimplePaletteValueFilter-WGi9SSDd.js";import"./isMuiElement-D94hBNTL.js";import"./useSlot-CO4IlLCl.js";import"./TransitionGroupContext-D4TXwhqE.js";import"./ButtonBase-DpqQEAAf.js";import"./useTimeout-CcjJ2cmE.js";import"./SwitchBase-B7zN4q3R.js";import"./useFormControl-CsRgqpY5.js";import"./useControlled-5UsadrEY.js";import"./createChainedFunction-BO_9K8Jh.js";import"./useId-o3zk_1yM.js";import"./FormGroup-CSMZ22Zq.js";import"./Select-DJEe7ust.js";import"./index-DtBJPI5W.js";import"./useSlotProps-CBCDIG0V.js";import"./List-DOdfdsGa.js";import"./ownerDocument-DW-IO8s5.js";import"./Modal-N30Js5sT.js";import"./Portal-Dt5KHSRP.js";import"./Fade-BWgYys4A.js";import"./Grow-IF_zPiYA.js";const P=[{title:"Mis Tareas",href:"/pasante/mistareas"}],g=l=>{if(!l)return"#9E9E9E";switch(l.toLowerCase()){case"alta":return"#FF1744";case"media":return"#FF9100";case"baja":return"#00E676";default:return"#9E9E9E"}},A=l=>{if(!l)return"default";switch(l.toLowerCase()){case"completada":return"success";case"en progreso":return"primary";case"pendiente":return"warning";default:return"default"}};function Lr({tareas:l}){const[n,x]=u.useState(l),j=u.useCallback(E(async(e,o)=>{var s;try{await h.patch(`/tareas/actualizar-estado/${e}`,{detalle:o,estado:((s=n.find(a=>a.id===e))==null?void 0:s.estado)||"pendiente"})}catch(a){console.error("Error al guardar el detalle:",a)}},1e3),[n]),y=async(e,o)=>{var s;try{await h.patch(`/tareas/actualizar-estado/${e}`,{estado:o,detalle:((s=n.find(a=>a.id===e))==null?void 0:s.detalle)||""}),x(n.map(a=>a.id===e?{...a,estado:o}:a))}catch(a){console.error("Error al actualizar el estado:",a)}},C=(e,o)=>{x(n.map(s=>s.id===e?{...s,detalle:o}:s)),j(e,o)};return r.jsxs(w,{breadcrumbs:P,children:[r.jsx(v,{title:"Mis Tareas"}),r.jsx(i,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #0d47a1 100%)",color:"white",py:3,position:"relative",overflow:"hidden"},children:r.jsxs(f,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:[r.jsx(t,{variant:"h4",className:"mb-6",fontWeight:"bold",children:"ğŸ“‹ Mis Tareas Asignadas"}),r.jsx(t,{variant:"subtitle1",sx:{opacity:.9},children:"Gestiona y actualiza el estado de tus tareas"})]})}),r.jsxs(f,{maxWidth:"xl",sx:{py:4},children:[r.jsx(b,{container:!0,spacing:3,children:n.map(e=>r.jsx(b,{item:!0,xs:12,md:6,lg:4,children:r.jsx(S,{sx:{height:"100%",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0,0,0,0.15)"},borderRadius:3,overflow:"hidden",border:"1px solid rgba(0,0,0,0.1)",borderLeft:`6px solid ${g(e.tarea.prioridad)}`},children:r.jsxs(T,{sx:{p:3},children:[r.jsxs(i,{className:"flex flex-col gap-2 mb-4",children:[r.jsxs(i,{className:"flex justify-between items-start",children:[r.jsx(t,{variant:"h6",className:"font-bold",children:e.tarea.titulo}),r.jsx(d,{label:e.tarea.prioridad,sx:{bgcolor:g(e.tarea.prioridad),color:"white",fontWeight:"bold"},size:"small"})]}),e.tarea.tipo&&r.jsx(i,{className:"flex items-center gap-2",children:r.jsx(d,{label:e.tarea.tipo.nombre_tipo,size:"small",sx:{bgcolor:m("#1976d2",.1),color:"primary.main","& .MuiChip-label":{fontWeight:500}},icon:r.jsx(F,{sx:{fontSize:16}})})})]}),r.jsx(t,{className:"mb-3",sx:{color:"text.secondary",p:2,bgcolor:m("#1976d2",.05),borderRadius:2,borderLeft:"4px solid #1976d2"},children:e.tarea.descripcion}),e.tarea.company&&r.jsxs(i,{sx:{mb:2},children:[r.jsxs(i,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[r.jsx(d,{icon:r.jsx(z,{fontSize:"small"}),label:e.tarea.company.name,variant:"outlined",color:"primary",size:"small"}),r.jsx(d,{icon:r.jsx(R,{fontSize:"small"}),label:L(new Date(e.fecha),"dd/MM/yyyy"),variant:"outlined",color:"primary",size:"small"})]}),r.jsxs(t,{variant:"body2",sx:{mt:1,color:"text.secondary",fontSize:"0.875rem"},children:["ğŸ“ ",e.tarea.company.ubicacion]}),r.jsxs(t,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.875rem"},children:["ğŸ¢ ",e.tarea.company.direccion]})]}),r.jsx(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,pt:2,borderTop:"1px solid rgba(0,0,0,0.1)"},children:r.jsx(d,{label:e.estado||"Sin estado",color:A(e.estado),size:"small",sx:{fontWeight:"medium"}})}),e.detalle&&r.jsxs(t,{sx:{mt:2,fontSize:"0.875rem",fontStyle:"italic",color:"text.secondary",p:1.5,bgcolor:m("#000",.03),borderRadius:1},children:["â„¹ï¸ ",e.detalle]}),r.jsxs(i,{sx:{mt:3,p:2,bgcolor:m("#1976d2",.05),borderRadius:2,border:"1px solid",borderColor:m("#1976d2",.1)},children:[r.jsx(t,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold",color:"primary.main"},children:"Estado de la tarea"}),r.jsxs(W,{row:!0,value:e.estado||"pendiente",onChange:o=>y(e.id,o.target.value),sx:{mb:2},children:[r.jsx(p,{value:"completada",control:r.jsx(c,{color:"success"}),label:"Completada"}),r.jsx(p,{value:"en progreso",control:r.jsx(c,{color:"primary"}),label:"En Progreso"}),r.jsx(p,{value:"pendiente",control:r.jsx(c,{color:"warning"}),label:"Pendiente"})]}),r.jsx(M,{fullWidth:!0,multiline:!0,rows:2,variant:"outlined",placeholder:"Agregar detalles o comentarios sobre la tarea...",value:e.detalle||"",onChange:o=>C(e.id,o.target.value),sx:{"& .MuiOutlinedInput-root":{bgcolor:"white","&:hover":{borderColor:"primary.main"}}}})]})]})})},e.id))}),n.length===0&&r.jsxs(N,{sx:{p:6,textAlign:"center",borderRadius:3,background:"linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%)"},children:[r.jsx(t,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"ğŸ“ No tienes tareas asignadas"}),r.jsx(t,{color:"text.secondary",children:"Por el momento no hay tareas asignadas para ti"})]})]})]})}export{Lr as default};
