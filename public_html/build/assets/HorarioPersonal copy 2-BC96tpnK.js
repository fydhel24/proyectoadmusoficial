import{r as g,j as e,$ as B,m as F}from"./app-YEuHkux5.js";import{A as k}from"./app-layout-Dh5sl-jU.js";import{A as S}from"./AssignmentTurnedIn-fRZ7dpDq.js";import{L as O}from"./LocationOn-D4F5GzyR.js";import W from"./MapComponent-C57935VH.js";import{B as n}from"./Box-DZXJg_qv.js";import{P as w,T as i}from"./Typography-D8rBbavg.js";import{G as c}from"./Grid-CZ5Gk029.js";import{C as d}from"./Card-DmMu79y6.js";import{B as b}from"./Button-CMjaMz42.js";import{A as I}from"./Avatar-JivPr5ws.js";import{D as T,a as z,b as L}from"./DialogTitle-DT-dALo8.js";import{D as R}from"./DialogActions-DSNCgedV.js";import"./button-_5e2JbJM.js";import"./clsx-B-dksMZM.js";import"./avatar-DPKp3hQk.js";import"./createLucideIcon-9JrBpBfL.js";import"./index-D3g71isE.js";import"./index-B2kdsAU2.js";import"./index-m3ZdHyWT.js";import"./settings-d7GkTK56.js";import"./app-logo-icon-BYryv9rn.js";import"./createSvgIcon-Bv7lX4UF.js";import"./DefaultPropsProvider-CEXgxhq8.js";import"./leaflet-DVtMPM_l.js";import"./Popup-LHqJTqZO.js";import"./createSimplePaletteValueFilter-J_8iZNoO.js";import"./useThemeProps-B1feN13w.js";import"./getThemeProps-BO29yZBp.js";import"./isMuiElement-C40F-WzM.js";import"./useId-DF1cwINX.js";import"./ButtonBase-CS4YXIYb.js";import"./useTimeout-g4Ibx1fA.js";import"./TransitionGroupContext-mQf08jKB.js";import"./CircularProgress-Bn3EXqD5.js";import"./useSlot-q3G4gJ7a.js";import"./Fade-pc_dseJo.js";import"./Modal-B5zRzlCf.js";import"./ownerDocument-DW-IO8s5.js";import"./Portal-1gL4VHaW.js";function Ee({user:f,horarioSemanal:a,currentWeek:y,weeks:m=[],diasSemana:x,turnos:v,totalAsignaciones:p}){const[C,h]=g.useState(!1),[t,j]=g.useState(null),D=r=>{const o=r.target.value;F.get("/mi-horario",{week_id:o})},E=r=>{j(r),h(!0)},u=()=>{h(!1),j(null)},A=r=>{switch(r){case"ma√±ana":return"‚òÄÔ∏è";case"tarde":return"üå§Ô∏è";case"noche":return"üåô";default:return"‚è∞"}};return e.jsx(k,{children:e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Mi Horario Semanal"}),e.jsx(n,{sx:{minHeight:"100vh",backgroundColor:"#F9FAFB",py:6},children:e.jsxs(n,{sx:{mx:"auto",maxWidth:"6xl",px:4},children:[e.jsx(w,{elevation:3,sx:{mb:6,p:6},children:e.jsxs(n,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{md:"center"},justifyContent:"space-between"},children:[e.jsxs(n,{children:[e.jsx(i,{variant:"h4",component:"h1",sx:{mb:2,fontWeight:"bold"},children:"Mi Horario Semanal"}),e.jsxs(i,{variant:"body1",color:"text.secondary",children:["Bienvenido, ",e.jsx(i,{component:"span",sx:{fontWeight:"semibold"},children:f.name})]})]}),e.jsxs(n,{sx:{mt:{xs:4,md:0}},children:[e.jsx(i,{variant:"subtitle2",sx:{mb:1},children:"Seleccionar semana:"}),e.jsx("select",{onChange:D,value:y.id,style:{borderRadius:4,border:"1px solid #CBD5E0",backgroundColor:"white",padding:"8px 12px",fontSize:"0.875rem",outline:"none"},children:m&&m.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))})]})]})}),e.jsxs(c,{container:!0,spacing:4,sx:{mb:6},children:[e.jsx(c,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:2,sx:{textAlign:"center",p:4},children:[e.jsx(i,{variant:"h3",component:"div",color:"primary",children:p}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Asignaciones totales"})]})}),e.jsx(c,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:2,sx:{textAlign:"center",p:4},children:[e.jsx(i,{variant:"h3",component:"div",color:"success.main",children:Object.values(a).filter(r=>Object.values(r).some(o=>o!==null)).length}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"D√≠as con trabajo"})]})}),e.jsx(c,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:2,sx:{textAlign:"center",p:4},children:[e.jsx(i,{variant:"h3",component:"div",color:"purple",children:new Set(Object.values(a).flatMap(r=>Object.values(r).filter(o=>o).map(o=>o.company.id))).size}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Empresas diferentes"})]})})]}),e.jsx(n,{sx:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#F3F4F6"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"0.75rem",textTransform:"uppercase",color:"#6B7280"},children:"Turno"}),Object.entries(x).map(([r,o])=>e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"0.75rem",textTransform:"uppercase",color:"#6B7280"},children:o},r))]})}),e.jsx("tbody",{children:Object.entries(v).map(([r,o])=>e.jsxs("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[e.jsx("td",{style:{padding:"12px"},children:e.jsxs(n,{sx:{display:"inline-flex",alignItems:"center",borderRadius:"9999px",px:2,py:1,fontSize:"0.75rem",fontWeight:"medium",...r==="ma√±ana"?{backgroundColor:"#DBEAFE",color:"#1E40AF"}:r==="tarde"?{backgroundColor:"#FEF3C7",color:"#92400E"}:r==="noche"?{backgroundColor:"#EDE9FE",color:"#5B21B6"}:{backgroundColor:"#E5E7EB",color:"#374151"}},children:[e.jsx("span",{style:{marginRight:4},children:A(r)}),r.charAt(0).toUpperCase()+r.slice(1)]})}),Object.keys(x).map(l=>{const s=a[l]&&a[l][r];return e.jsx("td",{style:{padding:"12px",textAlign:"center",verticalAlign:"top"},children:s?e.jsxs(n,{sx:{border:"1px solid #D1FAE5",backgroundColor:"#ECFDF5",p:2,borderRadius:2,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:"medium",color:"green.dark"},children:s.company.name}),s.company.direccion&&e.jsx(i,{variant:"caption",sx:{fontStyle:"italic",color:"green.main"},children:s.company.direccion}),e.jsx(i,{variant:"caption",sx:{color:"green.main"},children:new Date(s.fecha).toLocaleDateString("es-ES",{day:"numeric",month:"short"})}),s.company.ubicacion&&e.jsx(b,{size:"small",variant:"outlined",startIcon:e.jsx(O,{}),onClick:()=>E(s.company),sx:{mt:1},children:"Ver ubicaci√≥n"})]}):e.jsx(i,{variant:"caption",color:"text.disabled",children:"Libre"})},`${l}-${r}`)})]},r))})]})}),p===0&&e.jsxs(n,{sx:{mt:6,textAlign:"center"},children:[e.jsx(I,{sx:{bgcolor:"grey.300",width:64,height:64,mx:"auto",mb:2},children:e.jsx(S,{sx:{fontSize:40,color:"grey.600"}})}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"No tienes asignaciones esta semana"})]}),e.jsxs(T,{open:C,onClose:u,maxWidth:"md",fullWidth:!0,children:[e.jsx(z,{children:"Ubicaci√≥n de la empresa"}),e.jsx(L,{dividers:!0,children:t?e.jsxs(n,{children:[e.jsx(i,{variant:"subtitle1",sx:{mb:1,fontWeight:"bold"},children:t.name}),t.direccion&&e.jsxs(i,{variant:"body2",sx:{mb:2},children:["Direcci√≥n: ",t.direccion]}),t.ubicacion&&e.jsx(W,{ubicacion:t.ubicacion,nombre:t.name,direccion:t.direccion})]}):e.jsx(i,{variant:"body2",children:"No se encontr√≥ la empresa seleccionada."})}),e.jsx(R,{children:e.jsx(b,{onClick:u,color:"primary",children:"Cerrar"})})]})]})})]})})}export{Ee as default};
