import{j as i,r as c,a as p}from"./app-DpimSwWW.js";import{A as B,a as $}from"./app-layout-D5OrI1FG.js";import{c as M}from"./createSvgIcon-CzCXeKc2.js";import{W as z}from"./WbSunny-Bp9i0GNf.js";import{u as L,T as h}from"./Typography-KhbTzJKe.js";import{B as R}from"./Box-CcvOzitD.js";import{G as S}from"./Grid-CoUOdwyl.js";import{F}from"./Fade-C4vPWcQd.js";import{C as G}from"./Card-DPEhf4Im.js";import{C as N}from"./CardContent-DffKYiMG.js";import{S as j}from"./Stack-CPeMGV6U.js";import{B as w}from"./Button-Wm0H3U4H.js";import{C as U}from"./Chip-CS0B1ph1.js";import{S as H}from"./Snackbar-DeXY7UjR.js";import{A as J}from"./Alert-DsV2HJEG.js";import{s as V,f as q}from"./format-C6wJrPT2.js";import{e as K}from"./endOfWeek-DzanyrUO.js";import"./button-CFsyWUbq.js";import"./clsx-B-dksMZM.js";import"./avatar-CMLXmpAO.js";import"./createLucideIcon-D4CW-wHK.js";import"./index-CTw00F6I.js";import"./index-C0zh00gI.js";import"./index-VNCpVeP9.js";import"./settings-DlGdy5XP.js";import"./app-logo-icon-ZRykUD-a.js";import"./DefaultPropsProvider-DZDWfkmA.js";import"./createSimplePaletteValueFilter-CGtfMTWx.js";import"./useThemeProps-CLLhiJ1u.js";import"./getThemeProps-B8XpDgi_.js";import"./isMuiElement-D4a5-yK2.js";import"./TransitionGroupContext-eXL9qMo5.js";import"./useId-B3TWxL2D.js";import"./ButtonBase-pmj5C_mX.js";import"./useTimeout-BOj4Dk7I.js";import"./CircularProgress-DtoVrIul.js";import"./useSlot-wiR_y7XT.js";import"./ClickAwayListener-D7CbGVqV.js";import"./ownerDocument-DW-IO8s5.js";import"./Grow-CQQAZfUW.js";import"./Close-CdnP-DZi.js";import"./IconButton-BtLKT3mk.js";const P=M(i.jsx("path",{d:"M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2"})),Q=[{title:"Agregar Empresas",href:"/influencer-availability"}],X={monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",saturday:"Sábado",sunday:"Domingo"},Fe=()=>{const n=L(),[f,D]=c.useState([]),[C,A]=c.useState([]),[l,y]=c.useState({}),[W,E]=c.useState(null),[g,s]=c.useState({open:!1,message:"",severity:"success"});c.useEffect(()=>{A(I()),u(),_()},[]);const _=()=>{p.get("/api/auth/user").then(t=>E(t.data.id))},I=()=>{const t=V(new Date,{weekStartsOn:1}),a=K(new Date,{weekStartsOn:1}),e=[];for(let o=new Date(t);o<=a;o.setDate(o.getDate()+1)){const m=new Date(o),b=m.getDay();b>=1&&b<=6&&e.push(m)}return e},u=()=>{p.get("/api/influencer-availability").then(t=>{D(t.data);const a={};t.data.forEach(e=>{a[e.day_of_week]=e.turno}),y(a)}).catch(()=>s({open:!0,message:"Error obteniendo disponibilidad",severity:"error"}))},x=(t,a)=>{const e=l[t];if(e===a){v(t,e);return}y(d=>({...d,[t]:a}));const o=a==="mañana"?"09:30":"14:00",m=a==="mañana"?"13:00":"18:00";f.find(d=>d.day_of_week===t&&d.turno===e)&&v(t,e);const k=f.find(d=>d.day_of_week===t&&d.turno===a);k?O(k.id,o,m):T(t,a,o,m)},T=(t,a,e,o)=>{p.post("/api/influencer-availability",{user_id:W,day_of_week:t,turno:a,start_time:e,end_time:o}).then(()=>{s({open:!0,message:"Disponibilidad guardada",severity:"success"}),u()}).catch(()=>s({open:!0,message:"Error guardando disponibilidad",severity:"error"}))},O=(t,a,e)=>{p.put(`/api/influencer-availability/${t}`,{start_time:a,end_time:e}).then(()=>{s({open:!0,message:"Disponibilidad actualizada",severity:"success"}),u()}).catch(()=>s({open:!0,message:"Error actualizando disponibilidad",severity:"error"}))},v=(t,a)=>{const e=f.find(o=>o.day_of_week===t&&o.turno===a);e&&p.delete(`/api/influencer-availability/${e.id}`).then(()=>{s({open:!0,message:"Disponibilidad eliminada",severity:"success"}),u()}).catch(()=>s({open:!0,message:"Error eliminando disponibilidad",severity:"error"}))},r=(t,a)=>l[t]===a;return i.jsxs(B,{breadcrumbs:Q,children:[i.jsxs(R,{sx:{borderRadius:4,background:`linear-gradient(135deg, ${n.palette.background.paper} 60%, ${n.palette.grey[100]})`,boxShadow:6,p:{xs:2,md:4},mb:4},children:[i.jsx(h,{variant:"h4",fontWeight:"bold",color:"primary",gutterBottom:!0,children:"Mi Dias Disponibles"}),i.jsx(h,{variant:"subtitle1",color:"text.secondary",sx:{mb:3},children:"Agrega los días y turnos disponibles para la semana actual"}),i.jsx(S,{container:!0,spacing:3,children:C.filter(t=>{const a=t.getDay();return a>=1&&a<=6}).map((t,a)=>{const e=q(t,"EEEE").toLowerCase(),o=X[e];return i.jsx(S,{item:!0,xs:12,sm:6,md:2.4,children:i.jsx(F,{in:!0,timeout:600+a*100,children:i.jsx(G,{elevation:r(e,"mañana")||r(e,"tarde")?8:2,sx:{borderRadius:3,border:r(e,"mañana")||r(e,"tarde")?`2px solid ${n.palette.primary.main}`:`1px solid ${n.palette.grey[200]}`,background:r(e,"mañana")?"linear-gradient(135deg, #e3fcec 60%, #b2f2e5)":r(e,"tarde")?"linear-gradient(135deg, #fff3e0 60%, #ffe0b2)":n.palette.background.paper,transition:"all 0.3s"},children:i.jsx(N,{children:i.jsxs(j,{alignItems:"center",spacing:2,children:[i.jsx(h,{variant:"h6",fontWeight:"bold",color:"text.primary",children:o}),i.jsxs(j,{direction:"row",spacing:2,width:"100%",children:[i.jsx(w,{fullWidth:!0,variant:r(e,"mañana")?"contained":"outlined",color:"success",startIcon:i.jsx(z,{}),sx:{fontWeight:600,boxShadow:r(e,"mañana")?3:0,background:r(e,"mañana")?"linear-gradient(90deg, #43e97b 0%, #38f9d7 100%)":void 0,color:r(e,"mañana")?"#fff":void 0,borderColor:r(e,"mañana")?n.palette.success.main:void 0,transition:"all 0.2s"},onClick:()=>x(e,"mañana"),children:"Mañana"}),i.jsx(w,{fullWidth:!0,variant:r(e,"tarde")?"contained":"outlined",color:"warning",startIcon:i.jsx(P,{}),sx:{fontWeight:600,boxShadow:r(e,"tarde")?3:0,background:r(e,"tarde")?"linear-gradient(90deg, #f7971e 0%, #ffd200 100%)":void 0,color:r(e,"tarde")?"#fff":void 0,borderColor:r(e,"tarde")?n.palette.warning.main:void 0,transition:"all 0.2s"},onClick:()=>x(e,"tarde"),children:"Tarde"})]}),l[e]&&i.jsx(U,{icon:i.jsx($,{}),label:l[e]==="mañana"?"10:30 - 13:00":"15:00 - 18:00",color:l[e]==="mañana"?"success":"warning",sx:{fontWeight:500}})]})})})})},a)})})]}),i.jsx(H,{open:g.open,autoHideDuration:4e3,onClose:()=>s(t=>({...t,open:!1})),anchorOrigin:{vertical:"top",horizontal:"center"},children:i.jsx(J,{severity:g.severity,onClose:()=>s(t=>({...t,open:!1})),children:g.message})})]})};export{Fe as default};
