import{r as h,j as e,$ as P,m as j}from"./app-DWYhLQL6.js";import{A as k}from"./app-layout-p7K4X7eV.js";import{R as d,a as l}from"./RadioGroup-Dte4L1TE.js";import{F as r}from"./FormControlLabel-C_q7oJPT.js";import"./button-wMTuvAkw.js";import"./clsx-B-dksMZM.js";import"./avatar-C0bnmZQz.js";import"./createLucideIcon-DISkT-zV.js";import"./index-vDywYphy.js";import"./index-CvZMSx04.js";import"./index-C-qtZoBa.js";import"./settings-B1FLQ7wV.js";import"./app-logo-icon-HoYzQaBs.js";import"./createSvgIcon-C-V1FIKo.js";import"./DefaultPropsProvider-CHy6HlRv.js";import"./SwitchBase-B7zN4q3R.js";import"./useFormControl-CsRgqpY5.js";import"./useSlot-CO4IlLCl.js";import"./TransitionGroupContext-D4TXwhqE.js";import"./useControlled-5UsadrEY.js";import"./ButtonBase-DpqQEAAf.js";import"./useTimeout-CcjJ2cmE.js";import"./createSimplePaletteValueFilter-WGi9SSDd.js";import"./createChainedFunction-BO_9K8Jh.js";import"./useId-o3zk_1yM.js";import"./FormGroup-CSMZ22Zq.js";import"./Typography-IkT196je.js";function te({empresa:n,videos:b}){const[y,o]=h.useState(!1),[m,f]=h.useState(null),[i,p]=h.useState({nombre:"",semana:"",fecha_produccion:"",estado_entrega:"Pendiente",fecha_edicion:"",estado_edicion:"Pendiente",fecha_entrega:"",estado_entrega_final:"Pendiente",estrategia:"",retroalimentacion:""}),c=(a,s)=>{p(t=>({...t,[a]:s}))},x=()=>{p({nombre:"",semana:"",fecha_produccion:"",estado_entrega:"Pendiente",fecha_edicion:"",estado_edicion:"Pendiente",fecha_entrega:"",estado_entrega_final:"Pendiente",estrategia:"",retroalimentacion:""}),f(null)},v=()=>{m?j.put(`/videos/${m}`,{...i,empresa_id:n.id},{onSuccess:()=>{o(!1),x()}}):j.post("/videos",{...i,empresa_id:n.id},{onSuccess:()=>{o(!1),x()}})},C=a=>{f(a.id),p({nombre:a.nombre,semana:a.semana,fecha_produccion:a.fecha_produccion,estado_entrega:a.estado_entrega,fecha_edicion:a.fecha_edicion,estado_edicion:a.estado_edicion,fecha_entrega:a.fecha_entrega,estado_entrega_final:a.estado_entrega_final,estrategia:a.estrategia,retroalimentacion:a.retroalimentacion}),o(!0)},u=(a,s,t)=>{j.put(`/videos/${a}/estado`,{campo:s,valor:t},{preserveState:!0,preserveScroll:!0})},g=h.useMemo(()=>{const a={};return b.forEach(s=>{a[s.semana]||(a[s.semana]=[]),a[s.semana].push(s)}),Object.keys(a).sort((s,t)=>{const w=parseInt(s.replace("Semana ","")),S=parseInt(t.replace("Semana ",""));return w-S}).reduce((s,t)=>(s[t]=a[t],s),{})},[b]),N=new Date,E=N.getFullYear(),_=N.toLocaleString("es-ES",{month:"long"});return e.jsxs(k,{children:[e.jsx(P,{title:`Seguimiento de Videos - ${n.name}`}),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Seguimiento de Videos - ",n.name]}),e.jsx("button",{onClick:()=>{o(!0),x()},className:"rounded bg-green-600 px-4 py-2 text-white hover:bg-green-700",children:"Crear Video"}),e.jsx("button",{onClick:()=>{window.open(`/videos/${n.id}/pdf`,"_blank")},className:"rounded bg-red-600 px-4 py-2 text-white hover:bg-red-700",children:"Descargar PDF"})]}),e.jsxs("div",{className:"mb-6 rounded-lg bg-gray-50 p-4 shadow-md",children:[e.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Datos de la Empresa"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Categoría:"})," ",n.company_category_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duración del contrato:"})," ",n.contract_duration]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Inicio del contrato:"})," ",n.start_date]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fin del contrato:"})," ",n.end_date]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Celular:"})," ",n.celular]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Paquete ID:"})," ",n.paquete_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre del Cliente:"})," ",n.nombre_cliente]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Seguidores (Inicio):"})," ",n.seguidores_inicio]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Seguidores (Fin):"})," ",n.seguidores_fin]}),e.jsxs("p",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsx("strong",{children:"Especificaciones:"})," ",n.especificaciones]})]})]}),e.jsx("div",{className:"mb-4 text-center",children:e.jsxs("h2",{className:"text-xl font-bold",children:[_.charAt(0).toUpperCase()+_.slice(1)," ",E]})}),Object.keys(g).length>0?Object.keys(g).map(a=>e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"mb-4 rounded-t-md border-b-2 border-gray-300 bg-gray-200 p-2 text-xl font-semibold",children:a}),e.jsxs("table",{className:"min-w-full border border-gray-200 bg-white shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left text-sm font-semibold",children:[e.jsx("th",{className:"px-4 py-2",children:"Nombre"}),e.jsx("th",{className:"px-4 py-2",children:"Fecha Producción"}),e.jsx("th",{className:"px-4 py-2",children:"Estado Entrega"}),e.jsx("th",{className:"px-4 py-2",children:"Fecha Edición"}),e.jsx("th",{className:"px-4 py-2",children:"Estado Edición"}),e.jsx("th",{className:"px-4 py-2",children:"Fecha Entrega"}),e.jsx("th",{className:"px-4 py-2",children:"Estado Entrega Final"}),e.jsx("th",{className:"px-4 py-2",children:"Estrategia"}),e.jsx("th",{className:"px-4 py-2",children:"Retroalimentación"}),e.jsx("th",{className:"px-4 py-2",children:"Acciones"})]})}),e.jsx("tbody",{children:g[a].map(s=>e.jsxs("tr",{className:"border-t text-sm",children:[e.jsx("td",{className:"px-2 py-1",children:s.nombre}),e.jsx("td",{className:"px-2 py-1",children:s.fecha_produccion}),e.jsx("td",{className:"px-2 py-1",children:e.jsxs(d,{row:!0,value:s.estado_entrega,onChange:t=>u(s.id,"estado_entrega",t.target.value),children:[e.jsx(r,{value:"Pendiente",control:e.jsx(l,{size:"small"}),label:"Pendiente"}),e.jsx(r,{value:"Completado",control:e.jsx(l,{size:"small"}),label:"Completado"})]})}),e.jsx("td",{className:"px-2 py-1",children:s.fecha_edicion}),e.jsx("td",{className:"px-2 py-1",children:e.jsxs(d,{row:!0,value:s.estado_edicion,onChange:t=>u(s.id,"estado_edicion",t.target.value),children:[e.jsx(r,{value:"Pendiente",control:e.jsx(l,{size:"small"}),label:"Pendiente"}),e.jsx(r,{value:"Completado",control:e.jsx(l,{size:"small"}),label:"Completado"})]})}),e.jsx("td",{className:"px-2 py-1",children:s.fecha_entrega}),e.jsx("td",{className:"px-2 py-1",children:e.jsxs(d,{row:!0,value:s.estado_entrega_final,onChange:t=>u(s.id,"estado_entrega_final",t.target.value),children:[e.jsx(r,{value:"Pendiente",control:e.jsx(l,{size:"small"}),label:"Pendiente"}),e.jsx(r,{value:"Completado",control:e.jsx(l,{size:"small"}),label:"Completado"})]})}),e.jsx("td",{className:"px-2 py-1",children:s.estrategia}),e.jsx("td",{className:"px-2 py-1",children:s.retroalimentacion}),e.jsx("td",{className:"px-2 py-1",children:e.jsx("button",{onClick:()=>C(s),className:"rounded bg-blue-500 px-2 py-1 text-xs text-white hover:bg-blue-600",children:"Editar"})})]},s.id))})]})]},a)):e.jsx("div",{className:"py-10 text-center text-gray-500",children:"No hay videos de seguimiento registrados para esta empresa."}),y&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-lg bg-white p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:m?"Editar Video":"Crear nuevo video"}),e.jsx("button",{onClick:()=>{o(!1),x()},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Semana"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-block",children:"Semana"}),e.jsxs("select",{value:i.semana.replace("Semana ","")||"",onChange:a=>c("semana",`Semana ${a.target.value}`),className:"rounded border px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Selecciona"}),[1,2,3,4,5].map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),[{label:"Nombre",key:"nombre"},{label:"Estrategia",key:"estrategia"},{label:"Retroalimentación",key:"retroalimentacion"}].map(({label:a,key:s})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:a}),e.jsx("input",{type:"text",value:i[s],onChange:t=>c(s,t.target.value),className:"w-full rounded border px-2 py-1 text-sm"})]},s)),[{label:"Fecha Producción",key:"fecha_produccion"},{label:"Fecha Edición",key:"fecha_edicion"},{label:"Fecha Entrega",key:"fecha_entrega"}].map(({label:a,key:s})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:a}),e.jsx("input",{type:"date",value:i[s],onChange:t=>c(s,t.target.value),className:"w-full rounded border px-2 py-1 text-sm"})]},s)),!m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Estado Entrega"}),e.jsxs(d,{row:!0,value:i.estado_entrega,onChange:a=>c("estado_entrega",a.target.value),children:[e.jsx(r,{value:"Pendiente",control:e.jsx(l,{size:"small"}),label:"Pendiente"}),e.jsx(r,{value:"Completado",control:e.jsx(l,{size:"small"}),label:"Completado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Estado Edición"}),e.jsxs(d,{row:!0,value:i.estado_edicion,onChange:a=>c("estado_edicion",a.target.value),children:[e.jsx(r,{value:"Pendiente",control:e.jsx(l,{size:"small"}),label:"Pendiente"}),e.jsx(r,{value:"Completado",control:e.jsx(l,{size:"small"}),label:"Completado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Estado Entrega Final"}),e.jsxs(d,{row:!0,value:i.estado_entrega_final,onChange:a=>c("estado_entrega_final",a.target.value),children:[e.jsx(r,{value:"Pendiente",control:e.jsx(l,{size:"small"}),label:"Pendiente"}),e.jsx(r,{value:"Completado",control:e.jsx(l,{size:"small"}),label:"Completado"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{o(!1),x()},className:"rounded bg-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-400",children:"Cancelar"}),e.jsx("button",{onClick:v,className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700",children:m?"Actualizar Video":"Guardar Video"})]})]})})]})]})}export{te as default};
