import{v as p,j as e,$ as j,Y as y}from"./app-B43QGLc0.js";import{A as _}from"./app-layout-Be3qQQND.js";import"./app-logo-icon-2Eh3Z-eT.js";import"./index-CfAE_ukx.js";import"./index-HnoccPYx.js";const x=()=>({day_of_week:1,start_time:"",end_time:"",turno:"mañana",cantidad:null});function A({company:l,categories:g,availability:c}){const{data:t,setData:i,put:h,processing:m,errors:s}=p({name:l.name,company_category_id:l.company_category_id,contract_duration:l.contract_duration,description:l.description||"",direccion:l.direccion||"",start_date:l.start_date||"",end_date:l.end_date||"",availability:c.length?c:[x()]}),b=()=>{i("availability",[...t.availability,x()])},o=(a,r,n)=>{const d=[...t.availability];d[a]={...d[a],[r]:n},i("availability",d)},v=a=>{t.availability.length!==1&&i("availability",t.availability.filter((r,n)=>n!==a))},f=a=>{a.preventDefault(),h(`/companies/${l.id}`)};return e.jsxs(_,{children:[e.jsx(j,{title:"Editar Empresa"}),e.jsxs("div",{className:"mx-auto max-w-3xl rounded-xl bg-white p-8 shadow-lg",children:[e.jsx("h1",{className:"mb-6 text-center text-2xl font-bold",children:"Editar Empresa"}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre de la Empresa"}),e.jsx("input",{type:"text",className:"mt-2 w-full rounded-md border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",value:t.name,onChange:a=>i("name",a.target.value)}),s.name&&e.jsx("div",{className:"mt-1 text-red-600",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Categoría"}),e.jsxs("select",{className:"mt-2 w-full rounded-md border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",value:t.company_category_id,onChange:a=>i("company_category_id",a.target.value),children:[e.jsx("option",{value:"",children:"Seleccione una categoría"}),g.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),s.company_category_id&&e.jsx("div",{className:"mt-1 text-red-600",children:s.company_category_id})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Duración del contrato"}),e.jsx("input",{type:"text",className:"mt-2 w-full rounded-md border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",value:t.contract_duration,onChange:a=>i("contract_duration",a.target.value)}),s.contract_duration&&e.jsx("div",{className:"mt-1 text-red-600",children:s.contract_duration})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de inicio"}),e.jsx("input",{type:"date",className:"mt-2 w-full rounded-md border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",value:t.start_date,onChange:a=>i("start_date",a.target.value)}),s.start_date&&e.jsx("div",{className:"mt-1 text-red-600",children:s.start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de fin"}),e.jsx("input",{type:"date",className:"mt-2 w-full rounded-md border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",value:t.end_date,onChange:a=>i("end_date",a.target.value)}),s.end_date&&e.jsx("div",{className:"mt-1 text-red-600",children:s.end_date})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dirección"}),e.jsx("textarea",{className:"mt-2 w-full rounded-md border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",value:t.direccion,onChange:a=>i("direccion",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{className:"mt-2 w-full rounded-md border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",value:t.description,onChange:a=>i("description",a.target.value)})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Días de disponibilidad"}),t.availability.map((a,r)=>e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsxs("div",{className:"grid w-full max-w-3xl grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("select",{className:"w-full rounded-md border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",value:a.day_of_week,onChange:n=>o(r,"day_of_week",parseInt(n.target.value)),children:[e.jsx("option",{value:1,children:"Lunes"}),e.jsx("option",{value:2,children:"Martes"}),e.jsx("option",{value:3,children:"Miércoles"}),e.jsx("option",{value:4,children:"Jueves"}),e.jsx("option",{value:5,children:"Viernes"}),e.jsx("option",{value:6,children:"Sábado"}),e.jsx("option",{value:7,children:"Domingo"})]}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",value:a.turno,onChange:n=>{const d=n.target.value,u=d==="mañana"?{start_time:"09:30",end_time:"13:00"}:{start_time:"14:00",end_time:"18:00"};o(r,"turno",d),o(r,"start_time",u.start_time),o(r,"end_time",u.end_time)},children:[e.jsx("option",{value:"mañana",children:"Mañana"}),e.jsx("option",{value:"tarde",children:"Tarde"})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{type:"button",className:"text-xl font-bold text-red-600",onClick:()=>v(r),disabled:t.availability.length===1,title:"Eliminar este día",children:"×"})})]})},r)),e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx("button",{type:"button",onClick:b,className:"font-semibold text-blue-600",children:"+ Añadir otro día"})}),Object.keys(s).filter(a=>a.startsWith("availability")).map(a=>e.jsx("div",{className:"text-center text-red-600",children:s[a]},a))]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(y,{href:"/companies",className:"rounded-md bg-gray-300 px-6 py-2 text-gray-700 hover:bg-gray-400",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"rounded-md bg-blue-600 px-6 py-2 text-white hover:bg-blue-700",disabled:m,children:m?"Guardando...":"Guardar cambios"})]})]})]})]})}export{A as default};
