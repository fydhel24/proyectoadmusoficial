import{r as l,j as e,$ as C,m as b}from"./app-DWYhLQL6.js";import{A as k}from"./app-layout-p7K4X7eV.js";import"./button-wMTuvAkw.js";import"./clsx-B-dksMZM.js";import"./avatar-C0bnmZQz.js";import"./createLucideIcon-DISkT-zV.js";import"./index-vDywYphy.js";import"./index-CvZMSx04.js";import"./index-C-qtZoBa.js";import"./settings-B1FLQ7wV.js";import"./app-logo-icon-HoYzQaBs.js";import"./createSvgIcon-C-V1FIKo.js";import"./DefaultPropsProvider-CHy6HlRv.js";const $=({planes:j})=>{const[x,p]=l.useState(j),[g,h]=l.useState(!1),[c,u]=l.useState(null),[r,i]=l.useState(""),y=(s,a,n)=>{const o=[...x];o[s][a]=n,p(o)},N=s=>{b.post("/planes-empresas/save",s,{preserveScroll:!0})},f=s=>{u(s),i(""),h(!0)},d=()=>{h(!1),u(null),i("")},v=()=>{!r.trim()||!c||b.post("/comentarios-planes",{contenido:r,plan_empresa_id:c},{onSuccess:()=>{p(s=>s.map(a=>a.id===c?{...a,comentarios:[...a.comentarios||[],{id:Date.now(),contenido:r,user:{name:"Tú"}}]}:a)),d()}})};return e.jsxs(k,{children:[e.jsx(C,{title:"Planes de Empresas"}),e.jsxs("div",{className:"relative container mx-auto p-6",children:[e.jsx("h1",{className:"mb-6 text-2xl font-bold",children:"Planes de Empresas"}),e.jsxs("table",{className:"min-w-full border border-gray-200 bg-white shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left text-sm font-semibold",children:[e.jsx("th",{className:"px-4 py-2",children:"Empresa"}),e.jsx("th",{className:"px-4 py-2",children:"Categoria"}),e.jsx("th",{className:"px-4 py-2",children:"Plan"}),e.jsx("th",{className:"px-4 py-2",children:"Influencer"}),e.jsx("th",{className:"px-4 py-2",children:"TikTok (Mes)"}),e.jsx("th",{className:"px-4 py-2",children:"TikTok (Semana)"}),e.jsx("th",{className:"px-4 py-2",children:"Facebook (Mes)"}),e.jsx("th",{className:"px-4 py-2",children:"Facebook (Semana)"}),e.jsx("th",{className:"px-4 py-2",children:"Instagram (Mes)"}),e.jsx("th",{className:"px-4 py-2",children:"Instagram (Semana)"}),e.jsx("th",{className:"px-4 py-2",children:"Mensajes"}),e.jsx("th",{className:"px-4 py-2",children:"Comentarios"})]})}),e.jsx("tbody",{children:x.map((s,a)=>{var n,o;return e.jsxs("tr",{className:"border-t text-sm",children:[e.jsx("td",{className:"px-4 py-2",children:s.empresa.name}),e.jsx("td",{className:"px-4 py-2",children:s.empresa.category_name}),e.jsx("td",{className:"px-4 py-2",children:s.empresa.paquete_nombre}),e.jsx("td",{className:"px-4 py-2",children:s.empresa.influencer}),["tiktok_mes","tiktok_semana","facebook_mes","facebook_semana","instagram_mes","instagram_semana","mensajes"].map(t=>e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"text",value:s[t]||"",onChange:m=>y(a,t,m.target.value),onBlur:()=>N(s),className:"w-full rounded border px-2 py-1 text-sm"})},t)),e.jsxs("td",{className:"px-4 py-2 align-top",children:[e.jsx("button",{onClick:()=>f(s.id),className:"rounded bg-blue-500 px-2 py-1 text-white hover:bg-blue-600",children:"Agregar"}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[((n=s.comentarios)==null?void 0:n.length)||0," comentario",((o=s.comentarios)==null?void 0:o.length)===1?"":"s"]}),e.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto rounded border border-gray-200 bg-gray-50 p-2 text-xs text-gray-700",children:s.comentarios&&s.comentarios.length>0?s.comentarios.map(t=>{var m;return e.jsxs("div",{className:"mb-1 border-b border-gray-200 pb-1 last:border-none",children:[e.jsx("div",{className:"font-semibold",children:((m=t.user)==null?void 0:m.name)||"Anónimo"}),e.jsx("div",{children:t.contenido})]},t.id)}):e.jsx("div",{className:"text-gray-400 italic",children:"Sin comentarios"})})]})]},s.empresa_id)})})]}),g&&e.jsxs("div",{className:"fixed top-0 right-0 z-50 flex h-full w-96 flex-col border-l border-gray-300 bg-white p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Agregar Comentario"}),e.jsx("button",{onClick:d,className:"text-xl font-bold text-gray-600 hover:text-gray-900","aria-label":"Cerrar",children:"×"})]}),e.jsx("textarea",{rows:6,className:"mb-4 w-full resize-none rounded border p-2",value:r,onChange:s=>i(s.target.value),placeholder:"Escribe tu comentario aquí..."}),e.jsxs("div",{className:"mt-auto flex justify-end gap-2",children:[e.jsx("button",{onClick:d,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"Cancelar"}),e.jsx("button",{onClick:v,className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50",disabled:!r.trim(),children:"Guardar"})]})]})]})]})};export{$ as default};
