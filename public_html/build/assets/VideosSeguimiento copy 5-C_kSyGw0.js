import{r as u,j as e,$ as S,m as j}from"./app-DWYhLQL6.js";import{A as k}from"./app-layout-p7K4X7eV.js";import{R as d,a as n}from"./RadioGroup-Dte4L1TE.js";import{F as o}from"./FormControlLabel-C_q7oJPT.js";import"./button-wMTuvAkw.js";import"./clsx-B-dksMZM.js";import"./avatar-C0bnmZQz.js";import"./createLucideIcon-DISkT-zV.js";import"./index-vDywYphy.js";import"./index-CvZMSx04.js";import"./index-C-qtZoBa.js";import"./settings-B1FLQ7wV.js";import"./app-logo-icon-HoYzQaBs.js";import"./createSvgIcon-C-V1FIKo.js";import"./DefaultPropsProvider-CHy6HlRv.js";import"./SwitchBase-B7zN4q3R.js";import"./useFormControl-CsRgqpY5.js";import"./useSlot-CO4IlLCl.js";import"./TransitionGroupContext-D4TXwhqE.js";import"./useControlled-5UsadrEY.js";import"./ButtonBase-DpqQEAAf.js";import"./useTimeout-CcjJ2cmE.js";import"./createSimplePaletteValueFilter-WGi9SSDd.js";import"./createChainedFunction-BO_9K8Jh.js";import"./useId-o3zk_1yM.js";import"./FormGroup-CSMZ22Zq.js";import"./Typography-IkT196je.js";function te({empresa:r,videos:f}){const[_,i]=u.useState(!1),[m,b]=u.useState(null),[l,g]=u.useState({nombre:"",semana:"",fecha_produccion:"",estado_entrega:"Pendiente",fecha_edicion:"",estado_edicion:"Pendiente",fecha_entrega:"",estado_entrega_final:"Pendiente",estrategia:"",retroalimentacion:""}),c=(s,a)=>{g(t=>({...t,[s]:a}))},x=()=>{g({nombre:"",semana:"",fecha_produccion:"",estado_entrega:"Pendiente",fecha_edicion:"",estado_edicion:"Pendiente",fecha_entrega:"",estado_entrega_final:"Pendiente",estrategia:"",retroalimentacion:""}),b(null)},v=()=>{m?j.put(`/videos/${m}`,{...l,empresa_id:r.id},{onSuccess:()=>{i(!1),x()}}):j.post("/videos",{...l,empresa_id:r.id},{onSuccess:()=>{i(!1),x()}})},w=s=>{b(s.id),g({nombre:s.nombre,semana:s.semana,fecha_produccion:s.fecha_produccion,estado_entrega:s.estado_entrega,fecha_edicion:s.fecha_edicion,estado_edicion:s.estado_edicion,fecha_entrega:s.fecha_entrega,estado_entrega_final:s.estado_entrega_final,estrategia:s.estrategia,retroalimentacion:s.retroalimentacion}),i(!0)},h=(s,a,t)=>{j.put(`/videos/${s}/estado`,{campo:a,valor:t},{preserveState:!0,preserveScroll:!0})},p=u.useMemo(()=>{const s={};return f.forEach(a=>{s[a.semana]||(s[a.semana]=[]),s[a.semana].push(a)}),Object.keys(s).sort((a,t)=>{const E=parseInt(a.replace("Semana ","")),P=parseInt(t.replace("Semana ",""));return E-P}).reduce((a,t)=>(a[t]=s[t],a),{})},[f]),y=new Date,C=y.getFullYear(),N=y.toLocaleString("es-ES",{month:"long"});return e.jsxs(k,{children:[e.jsx(S,{title:`Seguimiento de Videos - ${r.name}`}),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h1",{className:"text-3xl font-extrabold text-gray-800",children:["Seguimiento de Videos - ",r.name]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{i(!0),x()},className:"rounded-full bg-emerald-600 px-6 py-2 font-semibold text-white transition-colors duration-200 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",children:"âž• Crear Video"}),e.jsx("button",{onClick:()=>{window.open(`/videos/${r.id}/pdf`,"_blank")},className:"rounded-full bg-red-600 px-6 py-2 font-semibold text-white transition-colors duration-200 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"â¬‡ï¸ Descargar PDF"})]})]}),e.jsxs("div",{className:"mb-8 rounded-lg border border-gray-200 bg-white p-6 shadow-md",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-gray-700",children:"Datos de la Empresa"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 text-sm text-gray-600 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-800",children:"CategorÃ­a:"})," ",r.company_category_id]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-800",children:"DuraciÃ³n del contrato:"})," ",r.contract_duration]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-800",children:"Inicio del contrato:"})," ",r.start_date]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-800",children:"Fin del contrato:"})," ",r.end_date]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-800",children:"Celular:"})," ",r.celular]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-800",children:"Paquete ID:"})," ",r.paquete_id]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-800",children:"Nombre del Cliente:"})," ",r.nombre_cliente]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-800",children:"Seguidores (Inicio):"})," ",r.seguidores_inicio]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-800",children:"Seguidores (Fin):"})," ",r.seguidores_fin]}),e.jsxs("p",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsx("strong",{className:"text-gray-800",children:"Especificaciones:"})," ",r.especificaciones]})]})]}),e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[N.charAt(0).toUpperCase()+N.slice(1)," ",C]})}),Object.keys(p).length>0?Object.keys(p).map(s=>e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"bg-gray-100 p-4 text-xl font-semibold text-gray-700 shadow-sm",children:s}),e.jsx("div",{className:"overflow-x-auto shadow-md",children:e.jsxs("table",{className:"min-w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-left text-xs font-medium uppercase text-gray-500",children:[e.jsx("th",{className:"px-4 py-3",children:"Nombre"}),e.jsx("th",{className:"px-4 py-3",children:"Fecha Prod."}),e.jsx("th",{className:"px-4 py-3",children:"Estado Entrega"}),e.jsx("th",{className:"px-4 py-3",children:"Fecha Edic."}),e.jsx("th",{className:"px-4 py-3",children:"Estado EdiciÃ³n"}),e.jsx("th",{className:"px-4 py-3",children:"Fecha Entrega"}),e.jsx("th",{className:"px-4 py-3",children:"Estado Final"}),e.jsx("th",{className:"px-4 py-3",children:"Estrategia"}),e.jsx("th",{className:"px-4 py-3",children:"Retro."}),e.jsx("th",{className:"px-4 py-3",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:p[s].map(a=>e.jsxs("tr",{className:"text-sm transition-colors duration-150 hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:a.nombre}),e.jsx("td",{className:"px-4 py-2",children:a.fecha_produccion}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs(d,{row:!0,value:a.estado_entrega,onChange:t=>h(a.id,"estado_entrega",t.target.value),children:[e.jsx(o,{value:"Pendiente",control:e.jsx(n,{size:"small",color:"warning"}),label:"Pendiente"}),e.jsx(o,{value:"Completado",control:e.jsx(n,{size:"small",color:"success"}),label:"Completado"})]})}),e.jsx("td",{className:"px-4 py-2",children:a.fecha_edicion}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs(d,{row:!0,value:a.estado_edicion,onChange:t=>h(a.id,"estado_edicion",t.target.value),children:[e.jsx(o,{value:"Pendiente",control:e.jsx(n,{size:"small",color:"warning"}),label:"Pendiente"}),e.jsx(o,{value:"Completado",control:e.jsx(n,{size:"small",color:"success"}),label:"Completado"})]})}),e.jsx("td",{className:"px-4 py-2",children:a.fecha_entrega}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs(d,{row:!0,value:a.estado_entrega_final,onChange:t=>h(a.id,"estado_entrega_final",t.target.value),children:[e.jsx(o,{value:"Pendiente",control:e.jsx(n,{size:"small",color:"warning"}),label:"Pendiente"}),e.jsx(o,{value:"Completado",control:e.jsx(n,{size:"small",color:"success"}),label:"Completado"})]})}),e.jsx("td",{className:"px-4 py-2",children:a.estrategia}),e.jsx("td",{className:"px-4 py-2",children:a.retroalimentacion}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>w(a),className:"rounded bg-blue-500 px-3 py-1 text-xs text-white transition-colors duration-200 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"âœï¸ Editar"})})]},a.id))})]})})]},s)):e.jsx("div",{className:"rounded-md bg-white p-10 text-center text-lg font-medium text-gray-500 shadow-md",children:e.jsxs("p",{children:["No hay videos de seguimiento registrados para esta empresa. ðŸ˜”",e.jsx("br",{}),"Â¡Crea el primer video para empezar!"]})}),_&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-70 transition-opacity duration-300",children:e.jsxs("div",{className:"w-full max-w-4xl transform rounded-2xl bg-white p-8 shadow-xl transition-all duration-300 ease-in-out",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:m?"ðŸ“ Editar Video":"âž• Crear Nuevo Video"}),e.jsx("button",{onClick:()=>{i(!1),x()},className:"text-2xl text-gray-500 transition-colors duration-200 hover:text-gray-900",children:"Ã—"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[[{label:"Nombre",key:"nombre"},{label:"Estrategia",key:"estrategia"},{label:"RetroalimentaciÃ³n",key:"retroalimentacion"}].map(({label:s,key:a})=>e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:s}),e.jsx("input",{type:"text",value:l[a],onChange:t=>c(a,t.target.value),className:"w-full rounded-md border-gray-300 p-2 text-sm shadow-sm transition-colors duration-200 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50"})]},a)),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Semana"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-500",children:"Semana"}),e.jsxs("select",{value:l.semana.replace("Semana ","")||"",onChange:s=>c("semana",`Semana ${s.target.value}`),className:"rounded-md border-gray-300 p-2 text-sm shadow-sm transition-colors duration-200 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50",children:[e.jsx("option",{value:"",children:"Selecciona"}),[1,2,3,4,5].map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[[{label:"Fecha ProducciÃ³n",key:"fecha_produccion"},{label:"Fecha EdiciÃ³n",key:"fecha_edicion"},{label:"Fecha Entrega",key:"fecha_entrega"}].map(({label:s,key:a})=>e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:s}),e.jsx("input",{type:"date",value:l[a],onChange:t=>c(a,t.target.value),className:"w-full rounded-md border-gray-300 p-2 text-sm shadow-sm transition-colors duration-200 focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50"})]},a)),!m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Estado de Entrega"}),e.jsxs(d,{row:!0,value:l.estado_entrega,onChange:s=>c("estado_entrega",s.target.value),children:[e.jsx(o,{value:"Pendiente",control:e.jsx(n,{size:"small"}),label:"Pendiente"}),e.jsx(o,{value:"Completado",control:e.jsx(n,{size:"small"}),label:"Completado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Estado de EdiciÃ³n"}),e.jsxs(d,{row:!0,value:l.estado_edicion,onChange:s=>c("estado_edicion",s.target.value),children:[e.jsx(o,{value:"Pendiente",control:e.jsx(n,{size:"small"}),label:"Pendiente"}),e.jsx(o,{value:"Completado",control:e.jsx(n,{size:"small"}),label:"Completado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Estado de Entrega Final"}),e.jsxs(d,{row:!0,value:l.estado_entrega_final,onChange:s=>c("estado_entrega_final",s.target.value),children:[e.jsx(o,{value:"Pendiente",control:e.jsx(n,{size:"small"}),label:"Pendiente"}),e.jsx(o,{value:"Completado",control:e.jsx(n,{size:"small"}),label:"Completado"})]})]})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[e.jsx("button",{onClick:()=>{i(!1),x()},className:"rounded-full border border-gray-300 bg-gray-200 px-6 py-2 font-semibold text-gray-700 transition-colors duration-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Cancelar"}),e.jsx("button",{onClick:v,className:"rounded-full bg-blue-600 px-6 py-2 font-semibold text-white transition-colors duration-200 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:m?"Actualizar Video":"Guardar Video"})]})]})})]})]})}export{te as default};
