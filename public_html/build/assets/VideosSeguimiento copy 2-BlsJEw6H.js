import{r as u,j as e,$ as f,m as x}from"./app-DWYhLQL6.js";import{A as N}from"./app-layout-p7K4X7eV.js";import{R as p,a as l}from"./RadioGroup-Dte4L1TE.js";import{F as n}from"./FormControlLabel-C_q7oJPT.js";import"./button-wMTuvAkw.js";import"./clsx-B-dksMZM.js";import"./avatar-C0bnmZQz.js";import"./createLucideIcon-DISkT-zV.js";import"./index-vDywYphy.js";import"./index-CvZMSx04.js";import"./index-C-qtZoBa.js";import"./settings-B1FLQ7wV.js";import"./app-logo-icon-HoYzQaBs.js";import"./createSvgIcon-C-V1FIKo.js";import"./DefaultPropsProvider-CHy6HlRv.js";import"./SwitchBase-B7zN4q3R.js";import"./useFormControl-CsRgqpY5.js";import"./useSlot-CO4IlLCl.js";import"./TransitionGroupContext-D4TXwhqE.js";import"./useControlled-5UsadrEY.js";import"./ButtonBase-DpqQEAAf.js";import"./useTimeout-CcjJ2cmE.js";import"./createSimplePaletteValueFilter-WGi9SSDd.js";import"./createChainedFunction-BO_9K8Jh.js";import"./useId-o3zk_1yM.js";import"./FormGroup-CSMZ22Zq.js";import"./Typography-IkT196je.js";function T({empresa:o,videos:j}){const[g,r]=u.useState(!1),[i,h]=u.useState({nombre:"",semana:"",fecha_produccion:"",estado_entrega:"Pendiente",fecha_edicion:"",estado_edicion:"Pendiente",fecha_entrega:"",estado_entrega_final:"Pendiente",estrategia:"",retroalimentacion:""}),c=(a,s)=>{h(t=>({...t,[a]:s}))},d=()=>{h({nombre:"",semana:"",fecha_produccion:"",estado_entrega:"Pendiente",fecha_edicion:"",estado_edicion:"Pendiente",fecha_entrega:"",estado_entrega_final:"Pendiente",estrategia:"",retroalimentacion:""})},b=()=>{x.post("/videos",{...i,empresa_id:o.id},{onSuccess:()=>{r(!1),d(),x.reload({only:["videos"]})}})},m=(a,s,t)=>{x.put(`/videos/${a}/estado`,{campo:s,valor:t},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{}})};return e.jsxs(N,{children:[e.jsx(f,{title:`Seguimiento de Videos - ${o.name}`}),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Seguimiento de Videos - ",o.name]}),e.jsx("button",{onClick:()=>r(!0),className:"rounded bg-green-600 px-4 py-2 text-white hover:bg-green-700",children:"Crear Video"})]}),e.jsxs("table",{className:"min-w-full border border-gray-200 bg-white shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left text-sm font-semibold",children:[e.jsx("th",{className:"px-4 py-2",children:"Semana"}),e.jsx("th",{className:"px-4 py-2",children:"Nombre"}),e.jsx("th",{className:"px-4 py-2",children:"Fecha Producción"}),e.jsx("th",{className:"px-4 py-2",children:"Estado Entrega"}),e.jsx("th",{className:"px-4 py-2",children:"Fecha Edición"}),e.jsx("th",{className:"px-4 py-2",children:"Estado Edición"}),e.jsx("th",{className:"px-4 py-2",children:"Fecha Entrega"}),e.jsx("th",{className:"px-4 py-2",children:"Estado Entrega Final"}),e.jsx("th",{className:"px-4 py-2",children:"Estrategia"}),e.jsx("th",{className:"px-4 py-2",children:"Retroalimentación"})]})}),e.jsx("tbody",{children:j.map(a=>e.jsxs("tr",{className:"border-t text-sm",children:[e.jsx("td",{className:"px-2 py-1",children:a.semana}),e.jsx("td",{className:"px-2 py-1",children:a.nombre}),e.jsx("td",{className:"px-2 py-1",children:a.fecha_produccion}),e.jsx("td",{className:"px-2 py-1",children:e.jsxs(p,{row:!0,value:a.estado_entrega,onChange:s=>m(a.id,"estado_entrega",s.target.value),children:[e.jsx(n,{value:"Pendiente",control:e.jsx(l,{}),label:"Pendiente"}),e.jsx(n,{value:"Completado",control:e.jsx(l,{}),label:"Completado"})]})}),e.jsx("td",{className:"px-2 py-1",children:a.fecha_edicion}),e.jsx("td",{className:"px-2 py-1",children:e.jsxs(p,{row:!0,value:a.estado_edicion,onChange:s=>m(a.id,"estado_edicion",s.target.value),children:[e.jsx(n,{value:"Pendiente",control:e.jsx(l,{}),label:"Pendiente"}),e.jsx(n,{value:"Completado",control:e.jsx(l,{}),label:"Completado"})]})}),e.jsx("td",{className:"px-2 py-1",children:a.fecha_entrega}),e.jsx("td",{className:"px-2 py-1",children:e.jsxs(p,{row:!0,value:a.estado_entrega_final,onChange:s=>m(a.id,"estado_entrega_final",s.target.value),children:[e.jsx(n,{value:"Pendiente",control:e.jsx(l,{}),label:"Pendiente"}),e.jsx(n,{value:"Completado",control:e.jsx(l,{}),label:"Completado"})]})}),e.jsx("td",{className:"px-2 py-1",children:a.estrategia}),e.jsx("td",{className:"px-2 py-1",children:a.retroalimentacion})]},a.id))})]}),g&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-lg bg-white p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Crear nuevo video"}),e.jsx("button",{onClick:()=>{r(!1),d()},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Semana"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-block",children:"Semana"}),e.jsxs("select",{value:i.semana.replace("Semana ","")||"",onChange:a=>c("semana",`Semana ${a.target.value}`),className:"rounded border px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Selecciona"}),[1,2,3,4,5].map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),[{label:"Nombre",key:"nombre"},{label:"Estrategia",key:"estrategia"},{label:"Retroalimentación",key:"retroalimentacion"}].map(({label:a,key:s})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:a}),e.jsx("input",{type:"text",value:i[s],onChange:t=>c(s,t.target.value),className:"w-full rounded border px-2 py-1 text-sm"})]},s)),[{label:"Fecha Producción",key:"fecha_produccion"},{label:"Fecha Edición",key:"fecha_edicion"},{label:"Fecha Entrega",key:"fecha_entrega"}].map(({label:a,key:s})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:a}),e.jsx("input",{type:"date",value:i[s],onChange:t=>c(s,t.target.value),className:"w-full rounded border px-2 py-1 text-sm"})]},s))]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{r(!1),d()},className:"rounded bg-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-400",children:"Cancelar"}),e.jsx("button",{onClick:b,className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700",children:"Guardar Video"})]})]})})]})]})}export{T as default};
