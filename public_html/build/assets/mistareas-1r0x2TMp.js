import{r as s,q as tr,v as ir,a as j,j as e,$ as he}from"./app-CD9E-bbZ.js";import{A as je,c as ge,b as fe,d as sr,B as or}from"./app-layout-COwF5H6b.js";import{l as be}from"./lodash-DFzhtkx0.js";import{u as nr,T as c,P as ye}from"./Typography-By0alPKt.js";import{u as lr}from"./index-nUST11uC.js";import{C as X}from"./Container-deGEY7kn.js";import{S as ve}from"./Skeleton-ByjOvxy4.js";import{G as l}from"./Grid-DalPBddd.js";import{B as o}from"./Box-CVcGMSkq.js";import{F as Y}from"./Fade-DiQplUui.js";import{B as v}from"./Button-B5LXeRdv.js";import{A as Ce}from"./Add-B9lRJRZT.js";import{S as dr}from"./Slide-DvGsxcQC.js";import{A as cr}from"./Alert-BG_3imF8.js";import{S as pr}from"./Stack-D4YGSwtz.js";import{T as u}from"./TextField-9oMor64V.js";import{I as xr}from"./InputAdornment-BeoegRXQ.js";import{S as ur}from"./Search-CgZJaBxY.js";import{A as P}from"./Autocomplete-C21DhlmQ.js";import{Z as ee}from"./Zoom-ASENUiq7.js";import{C as D}from"./Card-BUwfrOBr.js";import{F as E,a as L,I as mr,S as hr}from"./Select-DUF6zo7n.js";import{R as T,a as m}from"./RadioGroup-JtaYaRz0.js";import{F as h}from"./FormControlLabel-DcxSKsTd.js";import{C as Se}from"./Cancel-OpJD037e.js";import{S as Ee}from"./Save-C45VRjJD.js";import{A as jr}from"./Avatar-CZd4mcNo.js";import{I as k}from"./IconButton-DiPGKdqW.js";import{C as we}from"./Collapse-DPLjiGEl.js";import{C as N}from"./Chip-BO00Q2Ng.js";import{C as gr}from"./CalendarToday-H0XV7elc.js";import{T as re}from"./Tooltip-CH9oRG6h.js";import{E as fr}from"./Edit-Djcb_1T9.js";import{D as br}from"./Delete-CoZGZR8b.js";import{S as yr}from"./SwapHoriz-VDQ0WEin.js";import{M as vr}from"./MenuItem-Bj0PPdB2.js";import{F as Cr}from"./Fab-C-WfZn8m.js";import{b as g}from"./DefaultPropsProvider-C5q1CRrr.js";import"./button-CWGkIcSi.js";import"./clsx-B-dksMZM.js";import"./avatar-Bo5hNCtX.js";import"./createLucideIcon-BFnm19S_.js";import"./index-CNZc9TiR.js";import"./index-D22x5rVx.js";import"./index-QyWvuade.js";import"./settings-B4pFMSEE.js";import"./app-logo-icon-UzDlmedp.js";import"./createSvgIcon-D4wZ9zWM.js";import"./getThemeProps-BRGNcVpE.js";import"./useTimeout-CXA11xA-.js";import"./useThemeProps-CGKOtPNv.js";import"./isMuiElement-Bs_62ecA.js";import"./useId-D0rV9K7u.js";import"./ButtonBase-C8IFws74.js";import"./CircularProgress-bOfxmVe8.js";import"./debounce-Be36O1Ab.js";import"./Modal-CYSRzaAf.js";import"./useSlot-DQUc0rSZ.js";import"./Portal-B5VJs0Qr.js";import"./Close-Axz_85dQ.js";import"./useControlled-FXAG56O-.js";import"./usePreviousProps-DuFBzo1K.js";import"./Popper-BXfmLLmL.js";import"./index-iUL8l8GP.js";import"./useSlotProps-SlUmAtSs.js";import"./List-D0VMBB5k.js";import"./Grow-DEjLYDfa.js";import"./SwitchBase-CY4ycUpS.js";import"./FormGroup-DkhxPQus.js";import"./listItemTextClasses-2pnXth07.js";import"./dividerClasses-Bt0KY5G0.js";function Ba(){var me;const[w,Te]=s.useState([]),[ae,ke]=s.useState([]),[_,_e]=s.useState([]),[Fe,We]=s.useState([]),[ze,te]=s.useState(!0),[U,f]=s.useState(null),[F,Ie]=s.useState(""),[Sr,Er]=s.useState(""),[W,Re]=s.useState(""),[ie,M]=s.useState(!1),[se,z]=s.useState("no"),[O,B]=s.useState(null),[d,b]=s.useState({titulo:"",prioridad:"",descripcion:"",fecha:"",tipo_id:"",company_id:""}),[oe,$]=s.useState("no"),[Ae,G]=s.useState(null),[I,q]=s.useState(null),[ne,le]=s.useState({}),[de,Pe]=s.useState({}),[De,S]=s.useState({}),[Le,H]=s.useState(null),[Ne,ce]=s.useState(""),Ue=nr();lr(Ue.breakpoints.down("sm"));const{auth:Z}=tr().props,R=(me=Z==null?void 0:Z.user)==null?void 0:me.id,{data:C,setData:y,post:Me,processing:K,errors:p,reset:Q}=ir({titulo:"",prioridad:"",descripcion:"",fecha:new Date().toISOString().split("T")[0],tipo_id:"",company_id:""}),x=s.useCallback(async()=>{te(!0),f(null);try{const[r,a,t,i]=await Promise.all([j.get("/tareas-con-asignaciones"),j.get("/api/tipos"),j.get("/api/companies"),j.get("/api/pasantes")]);Te(r.data),ke(a.data),_e(t.data),We(i.data.data)}catch(r){console.error("Error al cargar datos:",r),f("Hubo un error al cargar los datos. Por favor, intenta de nuevo.")}finally{te(!1)}},[]),Oe=s.useCallback(async(r,a)=>{S(t=>({...t,[r]:!0}));try{await j.patch(`/asignaciones/${r}`,{estado:a}),await x()}catch(t){console.error("Error al actualizar estado:",t),f("No se pudo actualizar el estado")}finally{S(t=>({...t,[r]:!1}))}},[x]),Be=s.useCallback(be.debounce(async(r,a)=>{S(t=>({...t,[r]:!0}));try{await j.patch(`/asignaciones/${r}`,{detalle:a}),await x()}catch(t){console.error("Error al actualizar detalle:",t),f("No se pudo actualizar el detalle")}finally{S(t=>({...t,[r]:!1}))}},1e3),[x]),$e=s.useCallback(be.debounce(async(r,a)=>{S(t=>({...t,[r]:!0}));try{await j.patch(`/tareas/${r}/descripcion`,{descripcion:a}),await x(),H(null)}catch(t){console.error("Error al actualizar descripci√≥n:",t),f("No se pudo actualizar la descripci√≥n")}finally{S(t=>({...t,[r]:!1}))}},1e3),[x]),pe=s.useMemo(()=>{const r=new Date().toISOString().split("T")[0];let a=w.filter(t=>{const i=t.fecha===r,J=t.asignados.some(n=>n.user_id===R);return i&&J});return F&&(a=a.filter(t=>t.titulo.toLowerCase().includes(F.toLowerCase()))),W&&(a=a.filter(t=>t.prioridad===W)),a},[w,F,W,R]),A=s.useMemo(()=>{const r={};return pe.forEach(a=>{const t=a.asignados.find(i=>i.user_id===R);if(t){const i=t.user_name;r[i]||(r[i]=[]),r[i].push(a)}}),r},[pe,R]);s.useMemo(()=>{const r=new Set;return w.forEach(a=>{a.asignados.forEach(t=>{r.add(t.user_name)})}),Array.from(r).sort()},[w]),s.useEffect(()=>{x()},[x]),s.useEffect(()=>{const r={};Object.keys(A).forEach(a=>{r[a]=!0}),le(r)},[A]);const Ge=r=>{le(a=>({...a,[r]:!a[r]}))},qe=r=>{Pe(a=>({...a,[r]:!a[r]}))},He=r=>{var a,t;B(r.id),b({titulo:r.titulo,prioridad:r.prioridad,descripcion:r.descripcion,fecha:r.fecha,tipo_id:(a=r.tipo)!=null&&a.id?String(r.tipo.id):"",company_id:(t=r.company)!=null&&t.id?String(r.company.id):""}),$(r.company?"si":"no")},Ze=()=>{B(null),b({titulo:"",prioridad:"",descripcion:"",fecha:"",tipo_id:"",company_id:""}),$("no")},Ke=async()=>{if(d.titulo.trim())try{const r={...d,tipo_id:d.tipo_id?Number(d.tipo_id):null,company_id:d.company_id?Number(d.company_id):null};await j.put(`/tareas/${O}`,r),B(null),x()}catch(r){console.error("Error al actualizar tarea:",r),f("Error al actualizar la tarea")}},Qe=async r=>{if(confirm("¬øEst√°s seguro de que deseas eliminar esta tarea?"))try{await j.delete(`/tareas/${r}`),x()}catch(a){console.error("Error al eliminar tarea:",a),f("Error al eliminar la tarea")}},xe=()=>{M(!0),Q(),y({titulo:"",prioridad:"",descripcion:"",fecha:new Date().toISOString().split("T")[0],tipo_id:"",company_id:""}),z("no")},Je=()=>{M(!1),Q(),z("no")},Ve=r=>{r.preventDefault(),Me("/tareas-personales",{onSuccess:()=>{M(!1),Q(),z("no"),x()},onError:a=>{console.error("Validation errors:",a),f("Error al crear la tarea. Verifica los datos ingresados.")}})},Xe=async r=>{if(I)try{const a=w.find(i=>i.id===r);if(!a||!a.asignados.length)return;const t=a.asignados[0].id;await j.delete(`/asignaciones/reasignar/${t}`,{data:{user_id:I}}).then(i=>{console.log(i.data.message)}).catch(i=>{console.error("Error al reasignar:",i)}),G(null),q(null),x()}catch(a){console.error("Error al cambiar pasante:",a),f("Error al cambiar el pasante")}},Ye=r=>{H(r.id),ce(r.descripcion||"")},ue=r=>{switch(r.toLowerCase()){case"alta":return"#FF1744";case"media":return"#FF9100";case"baja":return"#00E676";default:return"#9E9E9E"}},er=r=>{const a=["#1976d2","#1565c0","#0d47a1","#2196f3","#0288d1","#01579b","#03a9f4","#00b0ff","#0091ea","#3f51b5"],t=r.charCodeAt(0)%a.length;return a[t]},rr=r=>r.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2),ar=`
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    `;return ze?e.jsxs(je,{breadcrumbs:[{title:"Tareas",href:"/tareas"}],children:[e.jsx(he,{title:"Tareas"}),e.jsxs(X,{maxWidth:"xl",sx:{py:4},children:[e.jsx(ve,{variant:"rectangular",height:60,sx:{mb:2,borderRadius:1}}),e.jsx(l,{container:!0,spacing:2,children:[...Array(7)].map((r,a)=>e.jsx(l,{item:!0,xs:12,sm:6,md:!0,children:e.jsx(ve,{variant:"rectangular",height:400,sx:{borderRadius:2}})},a))})]})]}):e.jsxs(je,{breadcrumbs:[{title:"Tareas",href:"/tareas"}],children:[e.jsx(he,{title:"Tareas"}),e.jsx("style",{children:ar}),e.jsx(o,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #0d47a1 100%)",color:"white",py:3,position:"relative",overflow:"hidden"},children:e.jsx(X,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:e.jsx(Y,{in:!0,timeout:800,children:e.jsxs(o,{children:[e.jsx(c,{variant:"h4",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:"üìÖ Mis Tareas de Hoy"}),e.jsx(c,{variant:"subtitle1",sx:{opacity:.9},children:"Gestiona y edita tus tareas personales del d√≠a"}),e.jsxs(o,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[e.jsx(o,{sx:{flexGrow:1}}),e.jsx(o,{sx:{display:"flex",gap:1},children:e.jsx(v,{variant:"contained",onClick:xe,startIcon:e.jsx(Ce,{}),sx:{borderRadius:2,background:"linear-gradient(45deg, #1976d2 0%, #0d47a1 100%)","&:hover":{background:"linear-gradient(45deg, #1565c0 0%, #0a3880 100%)"},px:3,py:1},children:"Nueva Tarea Para Hoy"})})]})]})})})}),e.jsxs(X,{maxWidth:"xl",sx:{py:3},children:[U&&e.jsx(dr,{direction:"down",in:!!U,children:e.jsx(cr,{severity:"error",sx:{mb:3,borderRadius:2},action:e.jsx(v,{color:"inherit",size:"small",onClick:x,children:"Reintentar"}),children:U})}),e.jsx(ye,{elevation:0,sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",border:"1px solid rgba(0,0,0,0.05)",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:e.jsx(pr,{spacing:3,children:e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,md:4,children:e.jsx(u,{fullWidth:!0,placeholder:"Buscar tareas...",value:F,onChange:r=>Ie(r.target.value),InputProps:{startAdornment:e.jsx(xr,{position:"start",children:e.jsx(ur,{})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsx(P,{options:["alta","media","baja"],getOptionLabel:r=>r.charAt(0).toUpperCase()+r.slice(1),value:W||null,onChange:(r,a)=>Re(a||""),clearOnEscape:!0,sx:{minWidth:300},renderInput:r=>e.jsx(u,{...r,label:"‚ö° Filtrar por Prioridad",placeholder:"Filtrar por prioridad",fullWidth:!0})})})]})})}),ie&&e.jsx(ee,{in:!0,children:e.jsxs(D,{sx:{mb:3,borderRadius:3,border:"2px solid #1976d2",boxShadow:"0 6px 24px rgba(25, 118, 210, 0.15)"},children:[e.jsxs(o,{sx:{p:3,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white"},children:[e.jsx(c,{variant:"h5",fontWeight:"bold",children:"üßç‚Äç‚ôÇÔ∏è Nueva Tarea Personal"}),e.jsx(c,{variant:"body2",sx:{opacity:.9},children:"Esta tarea ser√° asignada autom√°ticamente a ti"})]}),e.jsx(o,{sx:{p:4,background:"white"},children:e.jsx("form",{onSubmit:Ve,children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(u,{label:"üìù T√≠tulo",value:C.titulo,onChange:r=>y("titulo",r.target.value),fullWidth:!0,required:!0,error:!!p.titulo,helperText:p.titulo})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(u,{label:"üìÖ Fecha",type:"date",value:C.fecha,onChange:r=>y("fecha",r.target.value),fullWidth:!0,InputLabelProps:{shrink:!0},error:!!p.fecha,helperText:p.fecha})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(P,{options:ae,getOptionLabel:r=>r.nombre,value:ae.find(r=>r.id===Number(C.tipo_id))||null,onChange:(r,a)=>y("tipo_id",a?String(a.id):""),sx:{minWidth:280},renderInput:r=>e.jsx(u,{...r,label:"üè∑Ô∏è Tipo de tarea",fullWidth:!0,error:!!p.tipo_id,helperText:p.tipo_id})})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(E,{component:"fieldset",children:[e.jsx(L,{children:"‚ö° Prioridad"}),e.jsxs(T,{row:!0,value:C.prioridad,onChange:r=>y("prioridad",r.target.value),children:[e.jsx(h,{value:"alta",control:e.jsx(m,{}),label:"Alta"}),e.jsx(h,{value:"media",control:e.jsx(m,{}),label:"Media"}),e.jsx(h,{value:"baja",control:e.jsx(m,{}),label:"Baja"})]}),p.prioridad&&e.jsx(c,{variant:"caption",color:"error",children:p.prioridad})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(E,{component:"fieldset",children:[e.jsx(L,{children:"üè¢ ¬øAsignar empresa?"}),e.jsxs(T,{row:!0,value:se,onChange:r=>{z(r.target.value),r.target.value==="no"&&y("company_id","")},children:[e.jsx(h,{value:"si",control:e.jsx(m,{}),label:"S√≠"}),e.jsx(h,{value:"no",control:e.jsx(m,{}),label:"No"})]})]})}),se==="si"&&e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(P,{options:_,getOptionLabel:r=>r.nombre,value:_.find(r=>r.id===Number(C.company_id))||null,onChange:(r,a)=>y("company_id",a?String(a.id):""),sx:{minWidth:300},renderInput:r=>e.jsx(u,{...r,label:"üè¢ Seleccionar Empresa",fullWidth:!0,error:!!p.company_id,helperText:p.company_id})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(u,{label:"üìÑ Descripci√≥n",multiline:!0,rows:3,value:C.descripcion,onChange:r=>y("descripcion",r.target.value),fullWidth:!0,error:!!p.descripcion,helperText:p.descripcion})}),e.jsxs(l,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(v,{variant:"outlined",onClick:Je,startIcon:e.jsx(Se,{}),sx:{borderRadius:2,px:3,py:1},disabled:K,children:"Cancelar"}),e.jsx(v,{type:"submit",variant:"contained",startIcon:e.jsx(Ee,{}),disabled:K||!C.titulo.trim(),sx:{borderRadius:2,px:3,py:1,background:"linear-gradient(45deg, #1976d2 0%, #0d47a1 100%)"},children:K?"Creando...":"Crear tarea"})]})]})})})]})}),O&&e.jsx(ee,{in:!0,children:e.jsxs(D,{sx:{mb:3,borderRadius:3,border:"3px solid #FF9100",boxShadow:"0 8px 32px rgba(255, 145, 0, 0.2)"},children:[e.jsx(o,{sx:{p:3,background:"linear-gradient(135deg, #FF9100 0%, #FF6F00 100%)",color:"white"},children:e.jsx(c,{variant:"h5",fontWeight:"bold",children:"‚úèÔ∏è Editar Tarea"})}),e.jsx(o,{sx:{p:4},children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(u,{fullWidth:!0,label:"üìù T√≠tulo",value:d.titulo,onChange:r=>b({...d,titulo:r.target.value}),required:!0})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(u,{type:"date",fullWidth:!0,label:"üìÖ Fecha",value:d.fecha,onChange:r=>b({...d,fecha:r.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(E,{component:"fieldset",fullWidth:!0,children:[e.jsx(L,{children:"‚ö° Prioridad"}),e.jsxs(T,{row:!0,value:d.prioridad,onChange:r=>b({...d,prioridad:r.target.value}),children:[e.jsx(h,{value:"alta",control:e.jsx(m,{}),label:"Alta"}),e.jsx(h,{value:"media",control:e.jsx(m,{}),label:"Media"}),e.jsx(h,{value:"baja",control:e.jsx(m,{}),label:"Baja"})]})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(E,{component:"fieldset",fullWidth:!0,children:[e.jsx(L,{children:"üè¢ ¬øCambiar empresa?"}),e.jsxs(T,{row:!0,value:oe,onChange:r=>{$(r.target.value),r.target.value==="no"&&b(a=>({...a,company_id:""}))},children:[e.jsx(h,{value:"si",control:e.jsx(m,{}),label:"S√≠"}),e.jsx(h,{value:"no",control:e.jsx(m,{}),label:"No"})]})]})}),oe==="si"&&e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(P,{options:_,getOptionLabel:r=>r.nombre,value:_.find(r=>r.id===Number(d.company_id))||null,onChange:(r,a)=>{b(t=>({...t,company_id:a?String(a.id):""}))},sx:{minWidth:300},renderInput:r=>e.jsx(u,{...r,label:"üè¢ Seleccionar Empresa",fullWidth:!0,error:!!p.company_id,helperText:p.company_id})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(u,{fullWidth:!0,multiline:!0,rows:3,label:"üìÑ Descripci√≥n",value:d.descripcion,onChange:r=>b({...d,descripcion:r.target.value})})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(o,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(v,{variant:"outlined",startIcon:e.jsx(Se,{}),onClick:Ze,children:"Cancelar"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(Ee,{}),onClick:Ke,disabled:!d.titulo.trim(),sx:{background:"linear-gradient(45deg, #FF9100 0%, #FF6F00 100%)"},children:"Actualizar"})]})})]})})]})}),e.jsx(Y,{in:!0,children:e.jsx(o,{children:Object.keys(A).length===0?e.jsx(ye,{sx:{p:6,textAlign:"center",borderRadius:3},children:e.jsx(c,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"üìù No tienes tareas para hoy"})}):Object.entries(A).map(([r,a],t)=>e.jsx(Y,{in:!0,timeout:300+t*100,children:e.jsxs(D,{sx:{mb:3,borderRadius:3,overflow:"hidden"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,background:"linear-gradient(135deg, #1976d2 0%, #2196f3 100%)",color:"white",cursor:"pointer"},onClick:()=>Ge(r),children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(jr,{sx:{bgcolor:"white",color:er(r),fontWeight:"bold",width:48,height:48},children:rr(r)}),e.jsxs(o,{children:[e.jsx(c,{variant:"h5",fontWeight:"bold",children:r}),e.jsxs(c,{variant:"body1",sx:{opacity:.9},children:[a.length," ",a.length===1?"tarea asignada":"tareas asignadas"]})]})]}),e.jsx(k,{sx:{color:"white"},children:ne[r]?e.jsx(ge,{}):e.jsx(fe,{})})]}),e.jsx(we,{in:ne[r]??!0,children:e.jsx(o,{sx:{p:2},children:a.map((i,J)=>e.jsx(ee,{in:!0,style:{transitionDelay:`${J*100}ms`},children:e.jsxs(D,{sx:{mb:2,borderRadius:2,border:"1px solid rgba(0,0,0,0.1)",borderLeft:`6px solid ${ue(i.prioridad)}`},children:[e.jsxs(o,{onClick:()=>qe(i.id),sx:{p:2,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between","&:hover":{bgcolor:g("#1976d2",.05)}},children:[e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(c,{variant:"h6",fontWeight:"bold",sx:{mb:1},children:i.titulo}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e.jsx(N,{size:"small",label:i.prioridad.toUpperCase(),sx:{bgcolor:ue(i.prioridad),color:"white",fontWeight:"bold"}}),e.jsx(N,{size:"small",icon:e.jsx(gr,{fontSize:"small"}),label:i.fecha,variant:"outlined",color:"primary"}),i.tipo&&e.jsx(N,{size:"small",icon:e.jsx(sr,{fontSize:"small"}),label:i.tipo.nombre_tipo,variant:"outlined",color:"primary"}),i.company&&e.jsx(N,{size:"small",icon:e.jsx(or,{fontSize:"small"}),label:i.company.name,variant:"outlined",color:"primary"})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(re,{title:"Editar tarea",children:e.jsx(k,{onClick:n=>{n.stopPropagation(),He(i)},size:"small",sx:{bgcolor:g("#1976d2",.1),"&:hover":{bgcolor:g("#1976d2",.2)}},children:e.jsx(fr,{fontSize:"small"})})}),e.jsx(re,{title:"Eliminar tarea",children:e.jsx(k,{onClick:n=>{n.stopPropagation(),Qe(i.id)},size:"small",color:"error",sx:{bgcolor:g("#f44336",.1),"&:hover":{bgcolor:g("#f44336",.2)}},children:e.jsx(br,{fontSize:"small"})})}),e.jsx(re,{title:"Cambiar pasante",children:e.jsx(k,{onClick:n=>{n.stopPropagation(),G(i.id)},size:"small",sx:{bgcolor:g("#4caf50",.1),"&:hover":{bgcolor:g("#4caf50",.2)}},children:e.jsx(yr,{fontSize:"small"})})}),e.jsx(k,{size:"small",sx:{color:"#1976d2"},children:de[i.id]?e.jsx(ge,{}):e.jsx(fe,{})})]})]}),i.id===Ae&&e.jsxs(o,{sx:{p:3,bgcolor:g("#4caf50",.05),borderTop:"1px solid rgba(0,0,0,0.1)"},children:[e.jsx(c,{variant:"h6",sx:{mb:2,color:"#4caf50",fontWeight:"bold"},children:"üîÑ Cambiar Pasante"}),e.jsxs(E,{fullWidth:!0,size:"small",sx:{mb:2},children:[e.jsx(mr,{children:"Nuevo Pasante"}),e.jsx(hr,{value:I??"",onChange:n=>q(Number(n.target.value)),label:"Nuevo Pasante",children:Fe.map(n=>e.jsxs(vr,{value:n.id,children:[n.name," (",n.email,")"]},n.id))})]}),e.jsxs(o,{sx:{display:"flex",gap:2},children:[e.jsx(v,{variant:"outlined",onClick:()=>{G(null),q(null)},size:"small",children:"Cancelar"}),e.jsx(v,{variant:"contained",onClick:()=>Xe(i.id),disabled:!I,size:"small",sx:{bgcolor:"#4caf50","&:hover":{bgcolor:"#388e3c"}},children:"Confirmar cambio"})]})]}),e.jsx(we,{in:de[i.id]??!1,children:e.jsx(o,{sx:{px:3,pb:3},children:e.jsxs(o,{sx:{borderTop:"1px solid rgba(0,0,0,0.1)",pt:2},children:[i.asignados.map(n=>e.jsxs(o,{sx:{mb:3,p:2,borderRadius:2,bgcolor:g("#1976d2",.02),border:"1px solid rgba(25, 118, 210, 0.1)"},children:[e.jsxs(o,{sx:{mb:2},children:[e.jsxs(c,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:"bold"},children:["üìä Estado de la tarea:",De[n.id]&&e.jsx(o,{component:"span",sx:{ml:1,display:"inline-block",width:16,height:16,border:"2px solid #1976d2",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}})]}),e.jsx(E,{component:"fieldset",size:"small",children:e.jsxs(T,{row:!0,value:n.estado,onChange:V=>Oe(n.id,V.target.value),sx:{gap:2,flexWrap:"wrap"},children:[e.jsx(h,{value:"pendiente",control:e.jsx(m,{size:"small"}),label:"Pendiente"}),e.jsx(h,{value:"en_revision",control:e.jsx(m,{size:"small"}),label:"En revisi√≥n"}),e.jsx(h,{value:"publicada",control:e.jsx(m,{size:"small"}),label:"Publicada"})]})})]}),e.jsxs(o,{sx:{mb:2},children:[e.jsxs(c,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:"bold"},children:["üìù Detalle del progreso del Pasante: ",n.user_name]}),e.jsx(u,{fullWidth:!0,size:"small",multiline:!0,rows:2,placeholder:"Escribe aqu√≠ los detalles del progreso...",defaultValue:n.detalle||"",onChange:V=>Be(n.id,V.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"white"}}})]})]},n.id)),e.jsxs(o,{sx:{mt:2},children:[e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:"bold"},children:"üìÑ Descripci√≥n de la tarea:"}),Le===i.id?e.jsx(u,{fullWidth:!0,multiline:!0,rows:3,value:Ne,onChange:n=>{ce(n.target.value),$e(i.id,n.target.value)},onBlur:()=>H(null),autoFocus:!0,placeholder:"Describe la tarea en detalle..."}):e.jsx(o,{onClick:()=>Ye(i),sx:{p:2,borderRadius:2,bgcolor:"white",border:"1px dashed rgba(25, 118, 210, 0.3)",cursor:"pointer","&:hover":{bgcolor:g("#1976d2",.02),borderColor:"#1976d2"}},children:e.jsx(c,{variant:"body2",color:i.descripcion?"text.primary":"text.secondary",sx:{fontStyle:i.descripcion?"normal":"italic"},children:i.descripcion||"Haz clic para agregar una descripci√≥n..."})})]})]})})})]})},i.id))})})]})},r))})}),!ie&&!O&&e.jsx(Cr,{color:"primary",onClick:xe,sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(45deg, #4caf50 0%, #2e7d32 100%)","&:hover":{background:"linear-gradient(45deg, #388e3c 0%, #1b5e20 100%)",transform:"scale(1.1)"},transition:"all 0.3s ease",zIndex:1e3},children:e.jsx(Ce,{})})]})]})}export{Ba as default};
