import{q as ot,r,j as e,$ as at,m as ke}from"./app-gcPa0s22.js";import{A as rt}from"./app-layout-CO_KMSKV.js";import{C as Ee}from"./Close-XyKA_Wal.js";import{V as Ie,C as X,I as nt}from"./VideoLibrary-B5SHWoGn.js";import{D as se}from"./Delete-CRC5LDz_.js";import{E as H}from"./Edit-Ds06yvyx.js";import{P as st}from"./PhotoCamera-DJI1psPY.js";import{S as it}from"./Search-BvbNGRVG.js";import{u as lt,T as i,P as ct}from"./Typography-C3iDGIYS.js";import{B as c}from"./Box-DeqaGcCp.js";import{T as C}from"./TextField-CU4Ift9l.js";import{I as V}from"./IconButton-DjCumPI2.js";import{T as dt,a as ut}from"./TablePagination-BOYfu5Yg.js";import{T as mt}from"./TableContainer-De6i2F0Y.js";import{T as ht,a as pt,b as De,c as xt}from"./TableRow-CNuGh-jM.js";import{T as p}from"./TableCell-D1PfhpaL.js";import{C as Te}from"./Checkbox-guHMEmYf.js";import{T as J}from"./TableSortLabel-B--vw-BN.js";import{B as b}from"./Button-C4bSYQaA.js";import{D as Pe,a as Fe,b as Le}from"./DialogTitle-B4DngjNo.js";import{G as S}from"./Grid-CyJainsZ.js";import{C as $}from"./CircularProgress-CfS9p-RR.js";import{I as ft,a as gt}from"./ImageListItem-t5w9sYbm.js";import{D as Re}from"./DialogActions-Dup-kw6w.js";import{C as ie}from"./Card-bCG4Y8ZR.js";import{C as le}from"./CardContent-DbNFM9e4.js";import{S as ce}from"./Stack-Bdk1KeRL.js";import{S as jt}from"./Snackbar-CdaY7GhV.js";import"./button-DWmv4xKc.js";import"./clsx-B-dksMZM.js";import"./avatar-DEAtloF7.js";import"./createLucideIcon-DtIvEspD.js";import"./index-8qmTPeiK.js";import"./index-C3PMNp9i.js";import"./index-BZXrUZ9C.js";import"./settings-COpbVc2A.js";import"./app-logo-icon-TNEIzHJ2.js";import"./createSvgIcon-Bvn2cbuR.js";import"./DefaultPropsProvider-D0UdZHkc.js";import"./createSimplePaletteValueFilter-BHDmXtX9.js";import"./useSlot-DDOmgoeR.js";import"./TransitionGroupContext-dVxC_wZ9.js";import"./useId-B2TArqAG.js";import"./Select-B5o_GQW_.js";import"./isMuiElement-QxEqWT4A.js";import"./index-B2WmQ1i5.js";import"./useSlotProps-CY715XIJ.js";import"./List-DL6HMG9F.js";import"./ownerDocument-DW-IO8s5.js";import"./Modal-DgGQVq81.js";import"./useTimeout-D1Dphss0.js";import"./Portal-ltdkSTfj.js";import"./Fade-D2Lgt6Fr.js";import"./debounce-Be36O1Ab.js";import"./Grow-DazsCD7o.js";import"./useControlled-CKqLkeIN.js";import"./ButtonBase-BZ4Bemvj.js";import"./KeyboardArrowRight-BNFk62Iw.js";import"./LastPage-BD3VpcH-.js";import"./MenuItem-SlLzB4Lr.js";import"./listItemTextClasses-DWX30277.js";import"./dividerClasses-DdJp5AUC.js";import"./SwitchBase--_1mqYW6.js";import"./useThemeProps-C-UIwKqD.js";import"./getThemeProps-D5BX1hbN.js";import"./ClickAwayListener-CnDlVj7z.js";const bt=[{title:"Listado de influencers",href:"/infuencersdatos"}];function Ve(n,x,l){return x[l]<n[l]?-1:x[l]>n[l]?1:0}function vt(n,x){return n==="desc"?(l,h)=>Ve(l,h,x):(l,h)=>-Ve(l,h,x)}function yt(n,x){const l=n.map((h,w)=>[h,w]);return l.sort((h,w)=>{const k=x(h[0],w[0]);return k!==0?k:h[1]-w[1]}),l.map(h=>h[0])}function Oo(){const n=lt(),{users:x,flash:l}=ot().props,[h,w]=r.useState(x),[k,Oe]=r.useState(""),[O,U]=r.useState(null),[A,de]=r.useState(null),[D,T]=r.useState(""),[z,s]=r.useState(null),[Ue,ue]=r.useState(!1),[P,me]=r.useState(null),[y,Y]=r.useState([]),[he,pe]=r.useState([]),[Q,xe]=r.useState(!1),[Ae,fe]=r.useState(!1),[We,ge]=r.useState(!1),[g,je]=r.useState(null),[m,Z]=r.useState(""),[v,E]=r.useState({nombre:"",edad:0,descripcion:""}),[be,ve]=r.useState([]),[F,B]=r.useState(!1),[$e,ye]=r.useState(!1),[ee,N]=r.useState("video"),[te,oe]=r.useState(null),[f,ze]=r.useState("asc"),[u,Be]=r.useState("id"),[j,M]=r.useState([]),[q,Ce]=r.useState(0),[W,Ne]=r.useState(10);r.useEffect(()=>{w(x)},[x]),r.useEffect(()=>{l!=null&&l.success?s(l.success):l!=null&&l.error&&s(l.error)},[l]);const L=(t,a,o)=>{U(t),de(a),T(o),a==="cantidad"&&!o&&T(0)},R=async()=>{if(D.toString().trim()===""){s("El campo no puede estar vacío.");return}const t={[A]:D};ke.put(`/infuencersdatos/${O}`,t,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w(a=>a.map(o=>o.id===O?{...o,[A]:D}:o)),U(null),de(null),T("")},onError:()=>{s("Hubo un error al actualizar el campo")}})},Me=async t=>{me(t),ue(!0),await ae(t)},ae=async t=>{fe(!0);try{const o=await(await fetch(`/infuencersdatos/${t}/photos`)).json();pe(o.photos||[])}catch{s("Error al cargar las fotos")}finally{fe(!1)}},re=()=>{ue(!1),me(null),Y([]),pe([])},qe=t=>{const a=Array.from(t.target.files||[]);Y(a)},_e=async()=>{var a;if(!P||y.length===0)return;xe(!0);const t=new FormData;y.forEach(o=>{t.append("photos[]",o)});try{const o=await fetch(`/infuencersdatos/${P}/photos`,{method:"POST",body:t,headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}),d=await o.json();o.ok?(s("Fotos subidas exitosamente"),Y([]),await ae(P)):s(d.message||"Error al subir las fotos")}catch{s("Error al subir las fotos")}finally{xe(!1)}},Ke=async t=>{var a;if(!(!P||!window.confirm("¿Estás seguro de que deseas eliminar esta foto?")))try{const o=await fetch(`/infuencersdatos/${P}/photos/${t}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}),d=await o.json();o.ok?(s("Foto eliminada exitosamente"),await ae(P)):s(d.message||"Error al eliminar la foto")}catch{s("Error al eliminar la foto")}},Ge=async t=>{je(t),ge(!0),N("video"),await _(t)},ne=()=>{ge(!1),je(null),Z(""),E({nombre:"",edad:0,descripcion:""}),ve([]),oe(null),N("video")},_=async t=>{ye(!0);try{const o=await(await fetch(`/infuencersdatos/${t}/videos`)).json();ve(o.videos||[]);const d=(o.videos||[]).find(G=>G.tipo==="datos");d?(oe(d.id),E(d.influencer_data||{nombre:"",edad:0,descripcion:""})):(oe(null),E({nombre:"",edad:0,descripcion:""}))}catch{s("Error al cargar el contenido")}finally{ye(!1)}},Xe=async()=>{var t;if(!g||!m.trim()){s("Por favor ingresa una URL válida");return}B(!0);try{const a=await fetch(`/infuencersdatos/${g}/videos`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({content_type:"video",video_url:m})}),o=await a.json();a.ok?(s("Video guardado exitosamente"),Z(""),await _(g)):s(o.error||o.message||"Error al guardar el video")}catch{s("Error al guardar el video")}finally{B(!1)}},He=async()=>{var t,a;if(!g||!v.nombre.trim()||!v.descripcion.trim()){s("Por favor completa todos los campos requeridos");return}B(!0);try{let o;te?o=await fetch(`/infuencersdatos/${g}/datos/${te}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({influencer_data:v})}):o=await fetch(`/infuencersdatos/${g}/videos`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({content_type:"datos",influencer_data:v})});const d=await o.json();console.log("Respuesta backend:",d),o.ok?(s(te?"Datos actualizados exitosamente":"Datos guardados exitosamente"),E({nombre:"",edad:0,descripcion:""}),await _(g)):s(d.error||d.message||"Error al guardar los datos")}catch{s("Error al guardar los datos")}finally{B(!1)}},Je=async t=>{var a;if(!(!g||!window.confirm("¿Estás seguro de que deseas eliminar este elemento?")))try{const o=await fetch(`/infuencersdatos/${g}/videos/${t}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}),d=await o.json();o.ok?(s("Elemento eliminado exitosamente"),await _(g)):s(d.error||"Error al eliminar el elemento")}catch{s("Error al eliminar el elemento")}},Se=t=>{const a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,o=t.match(a);return o&&o[2].length===11?o[2]:null},I=r.useMemo(()=>h.filter(t=>t.name.toLowerCase().includes(k.toLowerCase())||String(t.id).includes(k)),[h,k]),we=r.useMemo(()=>yt(I,vt(f,u)),[I,f,u]),Ye=r.useMemo(()=>we.slice(q*W,q*W+W),[we,q,W]),K=t=>{ze(u===t&&f==="asc"?"desc":"asc"),Be(t)},Qe=t=>{t.target.checked?M(I.map(a=>a.id)):M([])},Ze=t=>{M(a=>a.includes(t)?a.filter(o=>o!==t):[...a,t])},et=t=>j.indexOf(t)!==-1,tt=()=>{window.confirm(`¿Estás seguro de que deseas eliminar ${j.length} usuario${j.length>1?"s":""}?`)&&(j.forEach(t=>{ke.delete(`/infuencersdatos/${t}`,{preserveState:!0,preserveScroll:!0})}),M([]))};return r.useEffect(()=>{if(!z)return;const t=setTimeout(()=>s(null),4e3);return()=>clearTimeout(t)},[z]),e.jsxs(rt,{breadcrumbs:bt,children:[e.jsx(at,{title:"Influencer"}),e.jsx(i,{variant:"h4",color:"primary",gutterBottom:!0,children:"Agregar la cantidad de videos que tendrá el influencer"}),e.jsx(c,{sx:{display:"flex",gap:2,mb:3,alignItems:"center"},children:e.jsx(C,{label:"Buscar por nombre o ID",variant:"outlined",size:"small",value:k,onChange:t=>Oe(t.target.value),sx:{maxWidth:320},InputProps:{startAdornment:e.jsx(V,{tabIndex:-1,children:e.jsx(it,{})})}})}),j.length>0&&e.jsxs(dt,{sx:{bgcolor:"action.selected",mb:1,borderRadius:2},children:[e.jsxs(i,{sx:{flex:"1 1 100%"},color:"inherit",children:[j.length," seleccionado",j.length>1?"s":""]}),e.jsx(V,{color:"error",onClick:tt,children:e.jsx(se,{})})]}),e.jsxs(mt,{component:ct,sx:{borderRadius:2,boxShadow:3,overflowX:"auto",border:"1px solid #e0e0e0",background:n.palette.background.paper,mx:{xs:0,md:2}},children:[e.jsxs(ht,{size:"small",children:[e.jsx(pt,{children:e.jsxs(De,{children:[e.jsx(p,{padding:"checkbox",sx:{backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(Te,{indeterminate:j.length>0&&j.length<I.length,checked:I.length>0&&j.length===I.length,onChange:Qe,sx:{color:n.palette.common.white}})}),e.jsx(p,{sortDirection:u==="id"?f:!1,sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(J,{active:u==="id",direction:u==="id"?f:"asc",onClick:()=>K("id"),sx:{color:n.palette.common.white,"&.Mui-active":{color:n.palette.common.white}},children:"ID"})}),e.jsx(p,{sortDirection:u==="name"?f:!1,sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(J,{active:u==="name",direction:u==="name"?f:"asc",onClick:()=>K("name"),sx:{color:n.palette.common.white,"&.Mui-active":{color:n.palette.common.white}},children:"Nombre"})}),e.jsx(p,{sortDirection:u==="email"?f:!1,sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(J,{active:u==="email",direction:u==="email"?f:"asc",onClick:()=>K("email"),sx:{color:n.palette.common.white,"&.Mui-active":{color:n.palette.common.white}},children:"Email"})}),e.jsx(p,{sortDirection:u==="cantidad"?f:!1,sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(J,{active:u==="cantidad",direction:u==="cantidad"?f:"asc",onClick:()=>K("cantidad"),sx:{color:n.palette.common.white,"&.Mui-active":{color:n.palette.common.white}},children:"Cantidad de videos asignados"})}),e.jsx(p,{sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:"Acciones"})]})}),e.jsx(xt,{children:Ye.map(t=>{const a=et(t.id);return e.jsxs(De,{hover:!0,selected:a,onClick:()=>Ze(t.id),children:[e.jsx(p,{padding:"checkbox",children:e.jsx(Te,{checked:a})}),e.jsx(p,{children:t.id}),e.jsx(p,{children:O===t.id&&A==="name"?e.jsx(C,{value:D,size:"small",autoFocus:!0,onChange:o=>T(o.target.value),onBlur:R,onKeyDown:o=>{o.key==="Enter"&&R(),o.key==="Escape"&&U(null)}}):e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(H,{fontSize:"small",color:"action",sx:{cursor:"pointer"},onClick:o=>{o.stopPropagation(),L(t.id,"name",t.name)}}),e.jsx("span",{onDoubleClick:()=>L(t.id,"name",t.name),style:{cursor:"pointer"},title:"Doble click para editar",children:t.name})]})}),e.jsx(p,{children:O===t.id&&A==="email"?e.jsx(C,{value:D,size:"small",autoFocus:!0,onChange:o=>T(o.target.value),onBlur:R,onKeyDown:o=>{o.key==="Enter"&&R(),o.key==="Escape"&&U(null)}}):e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(H,{fontSize:"small",color:"action",sx:{cursor:"pointer"},onClick:o=>{o.stopPropagation(),L(t.id,"email",t.email)}}),e.jsx("span",{onDoubleClick:()=>L(t.id,"email",t.email),style:{cursor:"pointer"},title:"Doble click para editar",children:t.email})]})}),e.jsx(p,{children:O===t.id&&A==="cantidad"?e.jsx(C,{type:"number",value:D,size:"small",autoFocus:!0,onChange:o=>T(o.target.value),onBlur:R,onKeyDown:o=>{o.key==="Enter"&&R(),o.key==="Escape"&&U(null)}}):e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(H,{fontSize:"small",color:"action",sx:{cursor:"pointer"},onClick:o=>{o.stopPropagation(),L(t.id,"cantidad",t.cantidad)}}),e.jsx("span",{onDoubleClick:()=>L(t.id,"cantidad",t.cantidad),style:{cursor:"pointer"},title:"Doble click para editar",children:t.cantidad})]})}),e.jsx(p,{children:e.jsxs(c,{sx:{display:"flex",gap:1},children:[e.jsx(b,{size:"small",variant:"outlined",startIcon:e.jsx(st,{}),onClick:o=>{o.stopPropagation(),Me(t.id)},sx:{mr:1},children:"Fotos"}),e.jsx(b,{size:"small",variant:"outlined",startIcon:e.jsx(Ie,{}),onClick:o=>{o.stopPropagation(),Ge(t.id)},children:"Subir Videos"})]})})]},t.id)})})]}),e.jsx(ut,{component:"div",count:I.length,page:q,rowsPerPage:W,onPageChange:(t,a)=>Ce(a),onRowsPerPageChange:t=>{Ne(parseInt(t.target.value,10)),Ce(0)},rowsPerPageOptions:[5,10,25],labelRowsPerPage:"Filas por página"})]}),e.jsxs(Pe,{open:Ue,onClose:re,maxWidth:"md",fullWidth:!0,children:[e.jsx(Fe,{children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"h6",children:"Gestionar Fotos del Influencer"}),e.jsx(V,{onClick:re,children:e.jsx(Ee,{})})]})}),e.jsxs(Le,{children:[e.jsxs(c,{sx:{mb:3},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Subir nuevas fotos"}),e.jsxs(c,{sx:{display:"flex",gap:2,alignItems:"center",mb:2},children:[e.jsxs(b,{variant:"outlined",component:"label",startIcon:e.jsx(X,{}),children:["Seleccionar Fotos",e.jsx("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:qe})]}),y.length>0&&e.jsxs(i,{variant:"body2",color:"textSecondary",children:[y.length," archivo",y.length>1?"s":""," seleccionado",y.length>1?"s":""]})]}),y.length>0&&e.jsxs(c,{sx:{mb:2},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Vista previa:"}),e.jsx(S,{container:!0,spacing:2,children:y.map((t,a)=>e.jsx(S,{item:!0,xs:6,sm:4,md:3,children:e.jsxs(c,{sx:{position:"relative"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`Preview ${a+1}`,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px"}}),e.jsx(i,{variant:"caption",sx:{display:"block",mt:1,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name})]})},a))}),e.jsx(c,{sx:{mt:2},children:e.jsx(b,{variant:"contained",onClick:_e,disabled:Q,startIcon:Q?e.jsx($,{size:20}):e.jsx(X,{}),children:Q?"Subiendo...":"Subir Fotos"})})]})]}),e.jsxs(c,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Fotos actuales"}),Ae?e.jsx(c,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx($,{})}):he.length===0?e.jsx(i,{variant:"body2",color:"textSecondary",sx:{textAlign:"center",py:3},children:"No hay fotos subidas para este influencer"}):e.jsx(ft,{cols:3,rowHeight:200,gap:8,children:he.map(t=>e.jsxs(gt,{children:[e.jsx("img",{src:t.path,alt:t.nombre,loading:"lazy",style:{width:"100%",height:"200px",objectFit:"cover"}}),e.jsx(nt,{title:t.nombre,actionIcon:e.jsx(V,{sx:{color:"rgba(255, 255, 255, 0.54)"},onClick:()=>Ke(t.id),size:"small",children:e.jsx(se,{})})})]},t.id))})]})]}),e.jsx(Re,{children:e.jsx(b,{onClick:re,children:"Cerrar"})})]}),e.jsxs(Pe,{open:We,onClose:ne,fullWidth:!0,maxWidth:"md",children:[e.jsx(Fe,{children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"h6",children:"Gestionar Contenido del Influencer"}),e.jsx(V,{onClick:ne,children:e.jsx(Ee,{})})]})}),e.jsx(Le,{dividers:!0,sx:{maxHeight:"75vh",overflowY:"auto"},children:e.jsxs(S,{container:!0,spacing:3,children:[e.jsx(S,{item:!0,xs:12,children:e.jsx(ie,{variant:"outlined",children:e.jsxs(le,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Tipo de Contenido"}),e.jsxs(ce,{direction:"row",spacing:2,children:[e.jsx(b,{variant:ee==="video"?"contained":"outlined",onClick:()=>N("video"),startIcon:e.jsx(Ie,{}),fullWidth:!0,children:"Video"}),e.jsx(b,{variant:ee==="datos"?"contained":"outlined",onClick:()=>N("datos"),startIcon:e.jsx(H,{}),fullWidth:!0,children:"Datos del Influencer"})]})]})})}),e.jsx(S,{item:!0,xs:12,children:e.jsx(ie,{variant:"outlined",children:e.jsx(le,{children:ee==="video"?e.jsxs(ce,{spacing:2,children:[e.jsx(i,{variant:"h6",children:"Agregar Video"}),e.jsx(C,{fullWidth:!0,label:"Link del video",placeholder:"https://www.youtube.com/watch?v=...",variant:"outlined",value:m,onChange:t=>Z(t.target.value),error:m&&!m.includes("youtube.com")&&!m.includes("youtu.be"),helperText:m&&!m.includes("youtube.com")&&!m.includes("youtu.be")?"Por favor ingresa una URL válida de YouTube":""}),m&&(m.includes("youtube.com")||m.includes("youtu.be"))&&e.jsxs(c,{children:[e.jsx(i,{variant:"body2",children:"Vista previa:"}),(()=>{const t=Se(m);return t?e.jsx(c,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",borderRadius:1},children:e.jsx("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:`https://www.youtube.com/embed/${t}`,title:"Vista previa del video",frameBorder:"0",allowFullScreen:!0})}):e.jsx(i,{variant:"body2",color:"error",children:"URL de video no válida"})})()]}),e.jsx(b,{variant:"contained",startIcon:F?e.jsx($,{size:20}):e.jsx(X,{}),onClick:Xe,disabled:F||!m.trim(),fullWidth:!0,children:F?"Guardando...":"Guardar Video"})]}):e.jsxs(ce,{spacing:2,children:[e.jsx(i,{variant:"h6",children:"Datos del Influencer"}),e.jsx(C,{fullWidth:!0,label:"Nombre",value:v.nombre,onChange:t=>E(a=>({...a,nombre:t.target.value}))}),e.jsx(C,{fullWidth:!0,label:"Edad",type:"number",value:v.edad||"",onChange:t=>E(a=>({...a,edad:parseInt(t.target.value)||0})),inputProps:{min:1,max:120}}),e.jsx(C,{fullWidth:!0,label:"Descripción",multiline:!0,rows:4,value:v.descripcion,onChange:t=>E(a=>({...a,descripcion:t.target.value}))}),e.jsx(b,{variant:"contained",startIcon:F?e.jsx($,{size:20}):e.jsx(X,{}),onClick:He,disabled:F||!v.nombre.trim()||!v.descripcion.trim(),fullWidth:!0,children:F?"Guardando...":"Guardar Datos"})]})})})}),e.jsxs(S,{item:!0,xs:12,children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Contenido Actual"}),$e?e.jsx(c,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx($,{})}):be.length===0?e.jsx(i,{variant:"body2",color:"textSecondary",align:"center",sx:{py:3},children:"No hay contenido guardado para este influencer"}):e.jsx(S,{container:!0,spacing:2,children:be.map(t=>{var a,o,d;return e.jsx(S,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(ie,{variant:"outlined",children:e.jsxs(le,{children:[t.tipo==="video"?e.jsxs(e.Fragment,{children:[(()=>{const G=Se(t.url);return G?e.jsx(c,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",borderRadius:1,mb:2},children:e.jsx("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:`https://www.youtube.com/embed/${G}`,title:t.nombre,frameBorder:"0",allowFullScreen:!0})}):e.jsx(i,{variant:"body2",color:"error",children:"Video no disponible"})})(),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:"Video"}),e.jsx(i,{variant:"body2",color:"textSecondary",children:t.nombre})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{sx:{mb:2,p:2,bgcolor:"grey.100",borderRadius:1},children:e.jsx(i,{variant:"subtitle2",color:"primary",children:"DATOS DEL INFLUENCER"})}),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:((a=t.influencer_data)==null?void 0:a.nombre)||"Sin nombre"}),e.jsxs(i,{variant:"body2",color:"textSecondary",children:["Edad: ",((o=t.influencer_data)==null?void 0:o.edad)||"No especificada"]}),e.jsx(i,{variant:"body2",color:"textSecondary",children:((d=t.influencer_data)==null?void 0:d.descripcion)||"Sin descripción"})]}),e.jsx(c,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:e.jsx(V,{color:"error",onClick:()=>Je(t.id),size:"small",children:e.jsx(se,{})})})]})})},t.id)})})]})]})}),e.jsx(Re,{children:e.jsx(b,{onClick:ne,children:"Cerrar"})})]}),e.jsx(jt,{open:!!z,message:z,onClose:()=>s(null),autoHideDuration:4e3})]})}export{Oo as default};
