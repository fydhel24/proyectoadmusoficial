import{q as ot,r as a,j as e,$ as rt,m as ke}from"./app-DWYhLQL6.js";import{A as at}from"./app-layout-p7K4X7eV.js";import{C as Ee}from"./Close-CWq84GBm.js";import{V as Ie,C as X,I as nt}from"./VideoLibrary-D7hOltZL.js";import{D as ie}from"./Delete-mfqLQQwu.js";import{E as H}from"./Edit-y_0_0Hdp.js";import{P as it}from"./PhotoCamera-HsAL7FL2.js";import{S as st}from"./Search-DU2LiQPG.js";import{u as lt,P as ct}from"./Paper-EniTK7He.js";import{T as s}from"./Typography-IkT196je.js";import{B as c}from"./Box-BbMU-_RR.js";import{T as C}from"./TextField-MHNYv_sC.js";import{I as V}from"./IconButton-BGvBFu85.js";import{T as dt,a as ut}from"./TablePagination-Cc3mTfKz.js";import{T as mt}from"./TableContainer-DwTJ9q9t.js";import{T as pt,a as ht,b as De,c as xt}from"./TableRow-DBOU2XrP.js";import{T as h}from"./TableCell-C5DOKis2.js";import{C as Te}from"./Checkbox-CWR5Giys.js";import{T as J}from"./TableSortLabel-CegavevY.js";import{B as b}from"./Button-BrLf_Pls.js";import{D as Pe,a as Fe,b as Le}from"./DialogTitle-BRc-au27.js";import{G as S}from"./Grid-DU2EuT6q.js";import{C as $}from"./CircularProgress-Bo20HsGQ.js";import{I as ft,a as gt}from"./ImageListItem-CqIv8jGk.js";import{D as Re}from"./DialogActions-2fZYmJbN.js";import{C as se}from"./Card-8ZfkaAJ7.js";import{C as le}from"./CardContent-JwUFqTB9.js";import{S as ce}from"./Stack-nT1jkqe3.js";import{S as jt}from"./Snackbar-sfqlWhTR.js";import"./button-wMTuvAkw.js";import"./clsx-B-dksMZM.js";import"./avatar-C0bnmZQz.js";import"./createLucideIcon-DISkT-zV.js";import"./index-vDywYphy.js";import"./index-CvZMSx04.js";import"./index-C-qtZoBa.js";import"./settings-B1FLQ7wV.js";import"./app-logo-icon-HoYzQaBs.js";import"./createSvgIcon-C-V1FIKo.js";import"./DefaultPropsProvider-CHy6HlRv.js";import"./createSimplePaletteValueFilter-WGi9SSDd.js";import"./useSlot-CO4IlLCl.js";import"./TransitionGroupContext-D4TXwhqE.js";import"./useId-o3zk_1yM.js";import"./Select-DJEe7ust.js";import"./useFormControl-CsRgqpY5.js";import"./isMuiElement-D94hBNTL.js";import"./index-DtBJPI5W.js";import"./useSlotProps-CBCDIG0V.js";import"./List-DOdfdsGa.js";import"./ownerDocument-DW-IO8s5.js";import"./Modal-N30Js5sT.js";import"./useTimeout-CcjJ2cmE.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Portal-Dt5KHSRP.js";import"./Fade-BWgYys4A.js";import"./debounce-Be36O1Ab.js";import"./Grow-IF_zPiYA.js";import"./useControlled-5UsadrEY.js";import"./ButtonBase-DpqQEAAf.js";import"./KeyboardArrowRight-Bg0hVIPP.js";import"./LastPage-BK5EUJI-.js";import"./MenuItem-Bm9YqGqc.js";import"./listItemTextClasses-Cw1PQWTE.js";import"./dividerClasses-BOZ5yH6J.js";import"./SwitchBase-B7zN4q3R.js";import"./useThemeProps-Bas4AH8z.js";import"./getThemeProps-DLKBaTjH.js";import"./ClickAwayListener--aFCBNkm.js";const bt=[{title:"Listado de influencers",href:"/infuencersdatos"}];function Ve(n,x,l){return x[l]<n[l]?-1:x[l]>n[l]?1:0}function vt(n,x){return n==="desc"?(l,p)=>Ve(l,p,x):(l,p)=>-Ve(l,p,x)}function yt(n,x){const l=n.map((p,w)=>[p,w]);return l.sort((p,w)=>{const k=x(p[0],w[0]);return k!==0?k:p[1]-w[1]}),l.map(p=>p[0])}function Wo(){const n=lt(),{users:x,flash:l}=ot().props,[p,w]=a.useState(x),[k,Oe]=a.useState(""),[O,U]=a.useState(null),[A,de]=a.useState(null),[D,T]=a.useState(""),[z,i]=a.useState(null),[Ue,ue]=a.useState(!1),[P,me]=a.useState(null),[y,Y]=a.useState([]),[pe,he]=a.useState([]),[Q,xe]=a.useState(!1),[Ae,fe]=a.useState(!1),[We,ge]=a.useState(!1),[g,je]=a.useState(null),[m,Z]=a.useState(""),[v,E]=a.useState({nombre:"",edad:0,descripcion:""}),[be,ve]=a.useState([]),[F,B]=a.useState(!1),[$e,ye]=a.useState(!1),[ee,N]=a.useState("video"),[te,oe]=a.useState(null),[f,ze]=a.useState("asc"),[u,Be]=a.useState("id"),[j,M]=a.useState([]),[q,Ce]=a.useState(0),[W,Ne]=a.useState(10);a.useEffect(()=>{w(x)},[x]),a.useEffect(()=>{l!=null&&l.success?i(l.success):l!=null&&l.error&&i(l.error)},[l]);const L=(t,r,o)=>{U(t),de(r),T(o),r==="cantidad"&&!o&&T(0)},R=async()=>{if(D.toString().trim()===""){i("El campo no puede estar vacío.");return}const t={[A]:D};ke.put(`/infuencersdatos/${O}`,t,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w(r=>r.map(o=>o.id===O?{...o,[A]:D}:o)),U(null),de(null),T("")},onError:()=>{i("Hubo un error al actualizar el campo")}})},Me=async t=>{me(t),ue(!0),await re(t)},re=async t=>{fe(!0);try{const o=await(await fetch(`/infuencersdatos/${t}/photos`)).json();he(o.photos||[])}catch{i("Error al cargar las fotos")}finally{fe(!1)}},ae=()=>{ue(!1),me(null),Y([]),he([])},qe=t=>{const r=Array.from(t.target.files||[]);Y(r)},_e=async()=>{var r;if(!P||y.length===0)return;xe(!0);const t=new FormData;y.forEach(o=>{t.append("photos[]",o)});try{const o=await fetch(`/infuencersdatos/${P}/photos`,{method:"POST",body:t,headers:{"X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""}}),d=await o.json();o.ok?(i("Fotos subidas exitosamente"),Y([]),await re(P)):i(d.message||"Error al subir las fotos")}catch{i("Error al subir las fotos")}finally{xe(!1)}},Ke=async t=>{var r;if(!(!P||!window.confirm("¿Estás seguro de que deseas eliminar esta foto?")))try{const o=await fetch(`/infuencersdatos/${P}/photos/${t}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""}}),d=await o.json();o.ok?(i("Foto eliminada exitosamente"),await re(P)):i(d.message||"Error al eliminar la foto")}catch{i("Error al eliminar la foto")}},Ge=async t=>{je(t),ge(!0),N("video"),await _(t)},ne=()=>{ge(!1),je(null),Z(""),E({nombre:"",edad:0,descripcion:""}),ve([]),oe(null),N("video")},_=async t=>{ye(!0);try{const o=await(await fetch(`/infuencersdatos/${t}/videos`)).json();ve(o.videos||[]);const d=(o.videos||[]).find(G=>G.tipo==="datos");d?(oe(d.id),E(d.influencer_data||{nombre:"",edad:0,descripcion:""})):(oe(null),E({nombre:"",edad:0,descripcion:""}))}catch{i("Error al cargar el contenido")}finally{ye(!1)}},Xe=async()=>{var t;if(!g||!m.trim()){i("Por favor ingresa una URL válida");return}B(!0);try{const r=await fetch(`/infuencersdatos/${g}/videos`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({content_type:"video",video_url:m})}),o=await r.json();r.ok?(i("Video guardado exitosamente"),Z(""),await _(g)):i(o.error||o.message||"Error al guardar el video")}catch{i("Error al guardar el video")}finally{B(!1)}},He=async()=>{var t,r;if(!g||!v.nombre.trim()||!v.descripcion.trim()){i("Por favor completa todos los campos requeridos");return}B(!0);try{let o;te?o=await fetch(`/infuencersdatos/${g}/datos/${te}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({influencer_data:v})}):o=await fetch(`/infuencersdatos/${g}/videos`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify({content_type:"datos",influencer_data:v})});const d=await o.json();console.log("Respuesta backend:",d),o.ok?(i(te?"Datos actualizados exitosamente":"Datos guardados exitosamente"),E({nombre:"",edad:0,descripcion:""}),await _(g)):i(d.error||d.message||"Error al guardar los datos")}catch{i("Error al guardar los datos")}finally{B(!1)}},Je=async t=>{var r;if(!(!g||!window.confirm("¿Estás seguro de que deseas eliminar este elemento?")))try{const o=await fetch(`/infuencersdatos/${g}/videos/${t}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""}}),d=await o.json();o.ok?(i("Elemento eliminado exitosamente"),await _(g)):i(d.error||"Error al eliminar el elemento")}catch{i("Error al eliminar el elemento")}},Se=t=>{const r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,o=t.match(r);return o&&o[2].length===11?o[2]:null},I=a.useMemo(()=>p.filter(t=>t.name.toLowerCase().includes(k.toLowerCase())||String(t.id).includes(k)),[p,k]),we=a.useMemo(()=>yt(I,vt(f,u)),[I,f,u]),Ye=a.useMemo(()=>we.slice(q*W,q*W+W),[we,q,W]),K=t=>{ze(u===t&&f==="asc"?"desc":"asc"),Be(t)},Qe=t=>{t.target.checked?M(I.map(r=>r.id)):M([])},Ze=t=>{M(r=>r.includes(t)?r.filter(o=>o!==t):[...r,t])},et=t=>j.indexOf(t)!==-1,tt=()=>{window.confirm(`¿Estás seguro de que deseas eliminar ${j.length} usuario${j.length>1?"s":""}?`)&&(j.forEach(t=>{ke.delete(`/infuencersdatos/${t}`,{preserveState:!0,preserveScroll:!0})}),M([]))};return a.useEffect(()=>{if(!z)return;const t=setTimeout(()=>i(null),4e3);return()=>clearTimeout(t)},[z]),e.jsxs(at,{breadcrumbs:bt,children:[e.jsx(rt,{title:"Influencer"}),e.jsx(s,{variant:"h4",color:"primary",gutterBottom:!0,children:"Agregar la cantidad de videos que tendrá el influencer"}),e.jsx(c,{sx:{display:"flex",gap:2,mb:3,alignItems:"center"},children:e.jsx(C,{label:"Buscar por nombre o ID",variant:"outlined",size:"small",value:k,onChange:t=>Oe(t.target.value),sx:{maxWidth:320},InputProps:{startAdornment:e.jsx(V,{tabIndex:-1,children:e.jsx(st,{})})}})}),j.length>0&&e.jsxs(dt,{sx:{bgcolor:"action.selected",mb:1,borderRadius:2},children:[e.jsxs(s,{sx:{flex:"1 1 100%"},color:"inherit",children:[j.length," seleccionado",j.length>1?"s":""]}),e.jsx(V,{color:"error",onClick:tt,children:e.jsx(ie,{})})]}),e.jsxs(mt,{component:ct,sx:{borderRadius:2,boxShadow:3,overflowX:"auto",border:"1px solid #e0e0e0",background:n.palette.background.paper,mx:{xs:0,md:2}},children:[e.jsxs(pt,{size:"small",children:[e.jsx(ht,{children:e.jsxs(De,{children:[e.jsx(h,{padding:"checkbox",sx:{backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(Te,{indeterminate:j.length>0&&j.length<I.length,checked:I.length>0&&j.length===I.length,onChange:Qe,sx:{color:n.palette.common.white}})}),e.jsx(h,{sortDirection:u==="id"?f:!1,sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(J,{active:u==="id",direction:u==="id"?f:"asc",onClick:()=>K("id"),sx:{color:n.palette.common.white,"&.Mui-active":{color:n.palette.common.white}},children:"ID"})}),e.jsx(h,{sortDirection:u==="name"?f:!1,sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(J,{active:u==="name",direction:u==="name"?f:"asc",onClick:()=>K("name"),sx:{color:n.palette.common.white,"&.Mui-active":{color:n.palette.common.white}},children:"Nombre"})}),e.jsx(h,{sortDirection:u==="email"?f:!1,sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(J,{active:u==="email",direction:u==="email"?f:"asc",onClick:()=>K("email"),sx:{color:n.palette.common.white,"&.Mui-active":{color:n.palette.common.white}},children:"Email"})}),e.jsx(h,{sortDirection:u==="cantidad"?f:!1,sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:e.jsx(J,{active:u==="cantidad",direction:u==="cantidad"?f:"asc",onClick:()=>K("cantidad"),sx:{color:n.palette.common.white,"&.Mui-active":{color:n.palette.common.white}},children:"Cantidad de videos asignados"})}),e.jsx(h,{sx:{fontWeight:"bold",backgroundColor:n.palette.primary.main,color:n.palette.common.white},children:"Acciones"})]})}),e.jsx(xt,{children:Ye.map(t=>{const r=et(t.id);return e.jsxs(De,{hover:!0,selected:r,onClick:()=>Ze(t.id),children:[e.jsx(h,{padding:"checkbox",children:e.jsx(Te,{checked:r})}),e.jsx(h,{children:t.id}),e.jsx(h,{children:O===t.id&&A==="name"?e.jsx(C,{value:D,size:"small",autoFocus:!0,onChange:o=>T(o.target.value),onBlur:R,onKeyDown:o=>{o.key==="Enter"&&R(),o.key==="Escape"&&U(null)}}):e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(H,{fontSize:"small",color:"action",sx:{cursor:"pointer"},onClick:o=>{o.stopPropagation(),L(t.id,"name",t.name)}}),e.jsx("span",{onDoubleClick:()=>L(t.id,"name",t.name),style:{cursor:"pointer"},title:"Doble click para editar",children:t.name})]})}),e.jsx(h,{children:O===t.id&&A==="email"?e.jsx(C,{value:D,size:"small",autoFocus:!0,onChange:o=>T(o.target.value),onBlur:R,onKeyDown:o=>{o.key==="Enter"&&R(),o.key==="Escape"&&U(null)}}):e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(H,{fontSize:"small",color:"action",sx:{cursor:"pointer"},onClick:o=>{o.stopPropagation(),L(t.id,"email",t.email)}}),e.jsx("span",{onDoubleClick:()=>L(t.id,"email",t.email),style:{cursor:"pointer"},title:"Doble click para editar",children:t.email})]})}),e.jsx(h,{children:O===t.id&&A==="cantidad"?e.jsx(C,{type:"number",value:D,size:"small",autoFocus:!0,onChange:o=>T(o.target.value),onBlur:R,onKeyDown:o=>{o.key==="Enter"&&R(),o.key==="Escape"&&U(null)}}):e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(H,{fontSize:"small",color:"action",sx:{cursor:"pointer"},onClick:o=>{o.stopPropagation(),L(t.id,"cantidad",t.cantidad)}}),e.jsx("span",{onDoubleClick:()=>L(t.id,"cantidad",t.cantidad),style:{cursor:"pointer"},title:"Doble click para editar",children:t.cantidad})]})}),e.jsx(h,{children:e.jsxs(c,{sx:{display:"flex",gap:1},children:[e.jsx(b,{size:"small",variant:"outlined",startIcon:e.jsx(it,{}),onClick:o=>{o.stopPropagation(),Me(t.id)},sx:{mr:1},children:"Fotos"}),e.jsx(b,{size:"small",variant:"outlined",startIcon:e.jsx(Ie,{}),onClick:o=>{o.stopPropagation(),Ge(t.id)},children:"Subir Videos"})]})})]},t.id)})})]}),e.jsx(ut,{component:"div",count:I.length,page:q,rowsPerPage:W,onPageChange:(t,r)=>Ce(r),onRowsPerPageChange:t=>{Ne(parseInt(t.target.value,10)),Ce(0)},rowsPerPageOptions:[5,10,25],labelRowsPerPage:"Filas por página"})]}),e.jsxs(Pe,{open:Ue,onClose:ae,maxWidth:"md",fullWidth:!0,children:[e.jsx(Fe,{children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s,{variant:"h6",children:"Gestionar Fotos del Influencer"}),e.jsx(V,{onClick:ae,children:e.jsx(Ee,{})})]})}),e.jsxs(Le,{children:[e.jsxs(c,{sx:{mb:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Subir nuevas fotos"}),e.jsxs(c,{sx:{display:"flex",gap:2,alignItems:"center",mb:2},children:[e.jsxs(b,{variant:"outlined",component:"label",startIcon:e.jsx(X,{}),children:["Seleccionar Fotos",e.jsx("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:qe})]}),y.length>0&&e.jsxs(s,{variant:"body2",color:"textSecondary",children:[y.length," archivo",y.length>1?"s":""," seleccionado",y.length>1?"s":""]})]}),y.length>0&&e.jsxs(c,{sx:{mb:2},children:[e.jsx(s,{variant:"body2",gutterBottom:!0,children:"Vista previa:"}),e.jsx(S,{container:!0,spacing:2,children:y.map((t,r)=>e.jsx(S,{item:!0,xs:6,sm:4,md:3,children:e.jsxs(c,{sx:{position:"relative"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`Preview ${r+1}`,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px"}}),e.jsx(s,{variant:"caption",sx:{display:"block",mt:1,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name})]})},r))}),e.jsx(c,{sx:{mt:2},children:e.jsx(b,{variant:"contained",onClick:_e,disabled:Q,startIcon:Q?e.jsx($,{size:20}):e.jsx(X,{}),children:Q?"Subiendo...":"Subir Fotos"})})]})]}),e.jsxs(c,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Fotos actuales"}),Ae?e.jsx(c,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx($,{})}):pe.length===0?e.jsx(s,{variant:"body2",color:"textSecondary",sx:{textAlign:"center",py:3},children:"No hay fotos subidas para este influencer"}):e.jsx(ft,{cols:3,rowHeight:200,gap:8,children:pe.map(t=>e.jsxs(gt,{children:[e.jsx("img",{src:t.path,alt:t.nombre,loading:"lazy",style:{width:"100%",height:"200px",objectFit:"cover"}}),e.jsx(nt,{title:t.nombre,actionIcon:e.jsx(V,{sx:{color:"rgba(255, 255, 255, 0.54)"},onClick:()=>Ke(t.id),size:"small",children:e.jsx(ie,{})})})]},t.id))})]})]}),e.jsx(Re,{children:e.jsx(b,{onClick:ae,children:"Cerrar"})})]}),e.jsxs(Pe,{open:We,onClose:ne,fullWidth:!0,maxWidth:"md",children:[e.jsx(Fe,{children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s,{variant:"h6",children:"Gestionar Contenido del Influencer"}),e.jsx(V,{onClick:ne,children:e.jsx(Ee,{})})]})}),e.jsx(Le,{dividers:!0,sx:{maxHeight:"75vh",overflowY:"auto"},children:e.jsxs(S,{container:!0,spacing:3,children:[e.jsx(S,{item:!0,xs:12,children:e.jsx(se,{variant:"outlined",children:e.jsxs(le,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Tipo de Contenido"}),e.jsxs(ce,{direction:"row",spacing:2,children:[e.jsx(b,{variant:ee==="video"?"contained":"outlined",onClick:()=>N("video"),startIcon:e.jsx(Ie,{}),fullWidth:!0,children:"Video"}),e.jsx(b,{variant:ee==="datos"?"contained":"outlined",onClick:()=>N("datos"),startIcon:e.jsx(H,{}),fullWidth:!0,children:"Datos del Influencer"})]})]})})}),e.jsx(S,{item:!0,xs:12,children:e.jsx(se,{variant:"outlined",children:e.jsx(le,{children:ee==="video"?e.jsxs(ce,{spacing:2,children:[e.jsx(s,{variant:"h6",children:"Agregar Video"}),e.jsx(C,{fullWidth:!0,label:"Link del video",placeholder:"https://www.youtube.com/watch?v=...",variant:"outlined",value:m,onChange:t=>Z(t.target.value),error:m&&!m.includes("youtube.com")&&!m.includes("youtu.be"),helperText:m&&!m.includes("youtube.com")&&!m.includes("youtu.be")?"Por favor ingresa una URL válida de YouTube":""}),m&&(m.includes("youtube.com")||m.includes("youtu.be"))&&e.jsxs(c,{children:[e.jsx(s,{variant:"body2",children:"Vista previa:"}),(()=>{const t=Se(m);return t?e.jsx(c,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",borderRadius:1},children:e.jsx("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:`https://www.youtube.com/embed/${t}`,title:"Vista previa del video",frameBorder:"0",allowFullScreen:!0})}):e.jsx(s,{variant:"body2",color:"error",children:"URL de video no válida"})})()]}),e.jsx(b,{variant:"contained",startIcon:F?e.jsx($,{size:20}):e.jsx(X,{}),onClick:Xe,disabled:F||!m.trim(),fullWidth:!0,children:F?"Guardando...":"Guardar Video"})]}):e.jsxs(ce,{spacing:2,children:[e.jsx(s,{variant:"h6",children:"Datos del Influencer"}),e.jsx(C,{fullWidth:!0,label:"Nombre",value:v.nombre,onChange:t=>E(r=>({...r,nombre:t.target.value}))}),e.jsx(C,{fullWidth:!0,label:"Edad",type:"number",value:v.edad||"",onChange:t=>E(r=>({...r,edad:parseInt(t.target.value)||0})),inputProps:{min:1,max:120}}),e.jsx(C,{fullWidth:!0,label:"Descripción",multiline:!0,rows:4,value:v.descripcion,onChange:t=>E(r=>({...r,descripcion:t.target.value}))}),e.jsx(b,{variant:"contained",startIcon:F?e.jsx($,{size:20}):e.jsx(X,{}),onClick:He,disabled:F||!v.nombre.trim()||!v.descripcion.trim(),fullWidth:!0,children:F?"Guardando...":"Guardar Datos"})]})})})}),e.jsxs(S,{item:!0,xs:12,children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Contenido Actual"}),$e?e.jsx(c,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx($,{})}):be.length===0?e.jsx(s,{variant:"body2",color:"textSecondary",align:"center",sx:{py:3},children:"No hay contenido guardado para este influencer"}):e.jsx(S,{container:!0,spacing:2,children:be.map(t=>{var r,o,d;return e.jsx(S,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(se,{variant:"outlined",children:e.jsxs(le,{children:[t.tipo==="video"?e.jsxs(e.Fragment,{children:[(()=>{const G=Se(t.url);return G?e.jsx(c,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",borderRadius:1,mb:2},children:e.jsx("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:`https://www.youtube.com/embed/${G}`,title:t.nombre,frameBorder:"0",allowFullScreen:!0})}):e.jsx(s,{variant:"body2",color:"error",children:"Video no disponible"})})(),e.jsx(s,{variant:"subtitle1",fontWeight:"bold",children:"Video"}),e.jsx(s,{variant:"body2",color:"textSecondary",children:t.nombre})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{sx:{mb:2,p:2,bgcolor:"grey.100",borderRadius:1},children:e.jsx(s,{variant:"subtitle2",color:"primary",children:"DATOS DEL INFLUENCER"})}),e.jsx(s,{variant:"subtitle1",fontWeight:"bold",children:((r=t.influencer_data)==null?void 0:r.nombre)||"Sin nombre"}),e.jsxs(s,{variant:"body2",color:"textSecondary",children:["Edad: ",((o=t.influencer_data)==null?void 0:o.edad)||"No especificada"]}),e.jsx(s,{variant:"body2",color:"textSecondary",children:((d=t.influencer_data)==null?void 0:d.descripcion)||"Sin descripción"})]}),e.jsx(c,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:e.jsx(V,{color:"error",onClick:()=>Je(t.id),size:"small",children:e.jsx(ie,{})})})]})})},t.id)})})]})]})}),e.jsx(Re,{children:e.jsx(b,{onClick:ne,children:"Cerrar"})})]}),e.jsx(jt,{open:!!z,message:z,onClose:()=>i(null),autoHideDuration:4e3})]})}export{Wo as default};
