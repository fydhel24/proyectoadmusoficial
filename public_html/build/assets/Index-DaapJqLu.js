import{j as r,q as I,r as E}from"./app-hmuC0z_W.js";import{A as P,B as z}from"./app-layout-tfxOdOKB.js";import{c as A}from"./createSvgIcon-DmtCSiy2.js";import{C as L}from"./CheckCircle-DIV5afmv.js";import{P as R}from"./HourglassEmpty-JphOc6QU.js";import{W as M}from"./WbSunny-CwGPuymX.js";import{u as G,T as e,P as S}from"./Typography-D9aOS4L9.js";import{B as n}from"./Box-4C9-OmNb.js";import{T as N,a as U,b as v,c as _}from"./TableRow-CqlzVxMY.js";import{T as d}from"./TableCell-CmdScgSd.js";import{S as p}from"./Stack-ofWMD4V8.js";import{T as q}from"./Tooltip-C2YJTe4A.js";import{C as T}from"./Chip-Dcvl53u6.js";import{D as H,a as J,b as O}from"./DialogTitle-qfXQee4s.js";import{G as m}from"./Grid-B8p_XyNn.js";import{D as V}from"./Divider-CF7op6F0.js";import{D as X}from"./DialogActions-By6P71zP.js";import{B as F}from"./Button-CI4PvYH9.js";import"./button-BdWLbofJ.js";import"./clsx-B-dksMZM.js";import"./avatar-SH5xSAMo.js";import"./createLucideIcon-B2A0n4jm.js";import"./index-BeDZ4tg0.js";import"./index-B2CGEqEW.js";import"./index-CDmN9uZR.js";import"./settings-B81NYrWU.js";import"./app-logo-icon-DF-2vurZ.js";import"./DefaultPropsProvider-B9G9mrQg.js";import"./createSimplePaletteValueFilter-BLiQVDB3.js";import"./useThemeProps-D5Z9mzbb.js";import"./getThemeProps-Ci1Myslq.js";import"./index-CPN-dXc6.js";import"./useSlot-b8oj5fjv.js";import"./TransitionGroupContext-zx_Mae6Z.js";import"./useTimeout-CyHmLoFO.js";import"./useControlled-D8uUDMf0.js";import"./useId-CIKGyZXY.js";import"./Fade-CwyH9ByJ.js";import"./Grow-CwDNX7JD.js";import"./Popper-Bof0hLwX.js";import"./ownerDocument-DW-IO8s5.js";import"./Portal-3qAPjvvz.js";import"./useSlotProps-B7GeVvJr.js";import"./ButtonBase-CKxFeLN_.js";import"./Modal-B3L5jhwL.js";import"./isMuiElement-DUef8CkO.js";import"./dividerClasses-DyS1-ewh.js";import"./CircularProgress-DbGwbuXF.js";const K=A(r.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"})),Jr=()=>{var g;const t=G(),{datosPorEmpresa:k,diasSemana:x}=I().props,[o,h]=E.useState(null),j=i=>{switch(i){case"alta":return t.palette.error.main;case"media":return t.palette.warning.main;case"baja":return t.palette.success.main;default:return t.palette.grey[500]}},f=["linear-gradient(135deg, #e3f2fd, #bbdefb)","linear-gradient(135deg, #fce4ec, #f8bbd0)","linear-gradient(135deg, #ede7f6, #d1c4e9)","linear-gradient(135deg, #f1f8e9, #dcedc8)","linear-gradient(135deg, #fff3e0, #ffe0b2)","linear-gradient(135deg, #e0f7fa, #b2ebf2)"],u=()=>{h(null)},D=i=>{switch(i){case"pendiente":return r.jsx(R,{fontSize:"small",sx:{ml:.5}});case"en_proceso":return r.jsx(K,{fontSize:"small",sx:{ml:.5}});case"completada":return r.jsx(L,{fontSize:"small",sx:{ml:.5}});default:return null}},W={monday:"Lunes",tuesday:"Martes",wednesday:"MiÃ©rcoles",thursday:"Jueves",friday:"Viernes",saturday:"SÃ¡bado",sunday:"Domingo"};return r.jsxs(P,{children:[r.jsxs(n,{p:3,children:[r.jsx(e,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"ðŸ“… Calendario Semanal por Empresa"}),r.jsx(S,{elevation:3,sx:{overflowX:"auto",borderRadius:3},children:r.jsxs(N,{children:[r.jsx(U,{children:r.jsxs(v,{sx:{backgroundColor:t.palette.grey[100]},children:[r.jsx(d,{children:r.jsxs(p,{direction:"row",alignItems:"center",gap:1,children:[r.jsx(z,{color:"action"}),r.jsx("strong",{children:"Empresa"})]})}),x.map((i,a)=>r.jsx(d,{children:r.jsxs(p,{direction:"row",alignItems:"center",gap:1,children:[r.jsx(M,{fontSize:"small"}),r.jsxs(n,{children:[r.jsx(e,{fontWeight:"bold",children:W[i.nombre.toLowerCase()]??i.nombre}),r.jsx(e,{variant:"caption",children:i.fecha})]})]})},a))]})}),r.jsx(_,{children:k.map((i,a)=>r.jsxs(v,{sx:{background:f[a%f.length],transition:"background 0.3s ease-in-out"},children:[r.jsx(d,{sx:{fontWeight:"bold"},children:i.empresa.name??"Empresa sin nombre"}),x.map((w,B)=>{const b=i.tareas[w.fecha]||[];return r.jsx(d,{children:b.length>0?r.jsx(p,{spacing:.5,children:b.slice().sort((s,c)=>{const l={alta:1,media:2,baja:3};return(l[s.prioridad]||4)-(l[c.prioridad]||4)}).map(s=>{var c,l,y,C;return r.jsx(q,{title:((l=(c=s.asignaciones)==null?void 0:c[0])==null?void 0:l.estado)??"Sin estado",children:r.jsx(T,{icon:D((C=(y=s.asignaciones)==null?void 0:y[0])==null?void 0:C.estado),label:s.titulo,size:"small",onClick:()=>h(s),sx:{backgroundColor:j(s.prioridad),color:"#fff",fontWeight:"bold",cursor:"pointer",pl:1}},s.id)})})}):r.jsx(e,{variant:"caption",color:"text.secondary",children:"â€”"})},B)})]},a))})]})})]}),r.jsxs(H,{open:!!o,onClose:u,maxWidth:"sm",fullWidth:!0,children:[r.jsx(J,{sx:{fontWeight:"bold",backgroundColor:t.palette.primary.main,color:"#fff"},children:"ðŸ“ Detalles de la Tarea"}),r.jsx(O,{dividers:!0,sx:{p:3},children:o&&r.jsxs(n,{display:"flex",flexDirection:"column",gap:3,children:[r.jsxs(n,{children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"TÃ­tulo"}),r.jsx(e,{variant:"body1",fontWeight:"bold",children:o.titulo})]}),r.jsxs(m,{container:!0,spacing:2,children:[r.jsxs(m,{item:!0,xs:6,children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"Prioridad"}),r.jsx(T,{label:o.prioridad.toUpperCase(),size:"small",sx:{fontWeight:"bold",color:"#fff",backgroundColor:j(o.prioridad)}})]}),r.jsxs(m,{item:!0,xs:6,children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"Tipo"}),r.jsx(e,{children:((g=o.tipo)==null?void 0:g.nombre_tipo)??"No especificado"})]})]}),r.jsxs(n,{children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"DescripciÃ³n"}),r.jsx(e,{children:o.descripcion||"Sin descripciÃ³n"})]}),r.jsxs(n,{children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"DescripciÃ³n"}),r.jsx(e,{children:o.descripcion||"Sin descripciÃ³n"})]}),r.jsx(V,{}),r.jsxs(n,{children:[r.jsx(e,{variant:"h6",gutterBottom:!0,children:"ðŸ‘¤ Asignaciones"}),o.asignaciones&&o.asignaciones.length>0?r.jsx(p,{spacing:2,children:o.asignaciones.map(i=>{var a;return r.jsxs(S,{variant:"outlined",sx:{p:2,borderRadius:2,backgroundColor:t.palette.grey[50]},children:[r.jsxs(e,{children:[r.jsx("strong",{children:"Usuario:"})," ",((a=i.user)==null?void 0:a.name)??"Sin asignar"]}),r.jsxs(e,{children:[r.jsx("strong",{children:"Estado:"})," ",i.estado]}),r.jsxs(e,{children:[r.jsx("strong",{children:"Detalle:"})," ",i.detalle||"Sin detalle"]})]},i.id)})}):r.jsx(e,{color:"text.secondary",children:"No hay asignaciones para esta tarea."})]})]})}),r.jsx(X,{sx:{p:2},children:r.jsx(F,{variant:"contained",color:"primary",onClick:u,children:"Cerrar"})})]})]})};export{Jr as default};
