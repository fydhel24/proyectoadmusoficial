import{j as e,r as T,v as R}from"./app-CD9E-bbZ.js";import{A as S}from"./app-layout-COwF5H6b.js";import{C as I}from"./Cancel-OpJD037e.js";import{S as V}from"./Save-C45VRjJD.js";import{c as D}from"./createSvgIcon-D4wZ9zWM.js";import{V as h}from"./Visibility-ow_NGhWQ.js";import{B as o}from"./Box-CVcGMSkq.js";import{T as i,P as F}from"./Typography-By0alPKt.js";import{B as p}from"./Button-B5LXeRdv.js";import{T as L}from"./TableContainer-El4GAqFF.js";import{T as W,a as z,b as x,c as M}from"./TableRow-C8E_HtCn.js";import{T as t}from"./TableCell-DWGuIxBN.js";import{T as b}from"./Tooltip-CH9oRG6h.js";import{I as g}from"./IconButton-DiPGKdqW.js";import{D as B,a as H,b as P}from"./DialogTitle-mS5MKQZw.js";import{T as U}from"./TextField-9oMor64V.js";import{F as _,I as $,S as E}from"./Select-DUF6zo7n.js";import{M as O}from"./MenuItem-Bj0PPdB2.js";import{D as G}from"./DialogActions-B0gL-oKD.js";import"./button-CWGkIcSi.js";import"./clsx-B-dksMZM.js";import"./avatar-Bo5hNCtX.js";import"./createLucideIcon-BFnm19S_.js";import"./index-CNZc9TiR.js";import"./index-D22x5rVx.js";import"./index-QyWvuade.js";import"./settings-B4pFMSEE.js";import"./app-logo-icon-UzDlmedp.js";import"./DefaultPropsProvider-C5q1CRrr.js";import"./useId-D0rV9K7u.js";import"./ButtonBase-C8IFws74.js";import"./useTimeout-CXA11xA-.js";import"./CircularProgress-bOfxmVe8.js";import"./index-iUL8l8GP.js";import"./useSlot-DQUc0rSZ.js";import"./useControlled-FXAG56O-.js";import"./Fade-DiQplUui.js";import"./Grow-DEjLYDfa.js";import"./Popper-BXfmLLmL.js";import"./Portal-B5VJs0Qr.js";import"./useSlotProps-SlUmAtSs.js";import"./Modal-CYSRzaAf.js";import"./isMuiElement-Bs_62ecA.js";import"./List-D0VMBB5k.js";import"./debounce-Be36O1Ab.js";import"./listItemTextClasses-2pnXth07.js";import"./dividerClasses-Bt0KY5G0.js";const j=D(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"})),f=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],Pe=({comprobantes:u})=>{const v=f[new Date().getMonth()],[y,l]=T.useState(!1),{data:a,setData:c,post:C,processing:w,errors:n,reset:k}=R({comprobante:null,detalle:"",glosa:"",mes:v}),m=r=>{r.preventDefault(),C(route("pagos.store"),{onSuccess:()=>{l(!1),k()}})};return e.jsxs(S,{children:[e.jsxs(o,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(90deg, #2196f3 0%, #21cbf3 100%)",px:3,py:2,borderRadius:2,color:"white"},children:[e.jsx(i,{variant:"h5",fontWeight:"bold",children:"Listado de tus Pagos"}),e.jsx(p,{variant:"contained",startIcon:e.jsx(j,{}),onClick:()=>l(!0),sx:{background:"linear-gradient(45deg, #00695c 30%, #26a69a 90%)","&:hover":{background:"linear-gradient(45deg, #004d40 30%, #00897b 90%)"}},children:"Subir Comprobante"})]}),e.jsx(L,{component:F,elevation:4,sx:{borderRadius:3,overflow:"hidden",maxWidth:900,mx:"auto",my:4},children:e.jsxs(W,{stickyHeader:!0,children:[e.jsx(z,{sx:{background:"linear-gradient(90deg, #2196f3 0%, #21cbf3 100%)"},children:e.jsxs(x,{children:[e.jsx(t,{sx:{color:"black",fontWeight:"bold",width:150,textAlign:"center",px:2},children:"Comprobante"}),e.jsx(t,{sx:{color:"black",fontWeight:"bold",width:200,textAlign:"center",px:2},children:"Detalle"}),e.jsx(t,{sx:{color:"black",fontWeight:"bold",width:120,textAlign:"center",px:2},children:"Mes"}),e.jsx(t,{sx:{color:"black",fontWeight:"bold",width:120,textAlign:"center",px:2},children:"Fecha de Registro"})]})}),e.jsx(M,{children:u.map(r=>{const s=r.company_associations;return s.length>0?s.map((d,A)=>e.jsxs(x,{sx:{"&:hover":{backgroundColor:"rgba(33, 203, 243, 0.08)"}},children:[A===0&&e.jsxs(e.Fragment,{children:[e.jsxs(t,{rowSpan:s.length,sx:{textAlign:"center",px:2,py:1},children:[["jpg","jpeg","png"].includes(r.tipo.toLowerCase())?e.jsx(o,{component:"img",src:r.comprobante,alt:"Vista previa",sx:{height:80,width:80,borderRadius:1,border:"1px solid #ddd",objectFit:"cover",mx:"auto"}}):r.tipo.toLowerCase()==="pdf"?e.jsx(o,{component:"iframe",src:r.comprobante,title:"Vista PDF",sx:{height:80,width:80,borderRadius:1,border:"1px solid #ddd",mx:"auto"}}):e.jsx(i,{variant:"body2",color:"text.secondary",textAlign:"center",children:"Archivo no compatible"}),e.jsxs(o,{mt:1,display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(b,{title:"Ver archivo",children:e.jsx(g,{href:r.comprobante,target:"_blank",rel:"noopener noreferrer",size:"small",color:"primary",children:e.jsx(h,{})})}),e.jsx(i,{variant:"caption",color:"primary",sx:{ml:1},children:"Ver archivo"})]})]}),e.jsx(t,{rowSpan:s.length,sx:{verticalAlign:"middle",px:2,py:1},children:r.detalle})]}),e.jsx(t,{sx:{textTransform:"capitalize",textAlign:"center",px:2,py:1},children:d.mes}),e.jsx(t,{sx:{textAlign:"center",px:2,py:1},children:d.fecha})]},`${r.id}-${d.id}`)):e.jsxs(x,{sx:{"&:hover":{backgroundColor:"rgba(33, 203, 243, 0.08)"}},children:[e.jsxs(t,{sx:{textAlign:"center",px:2,py:1},children:[["jpg","jpeg","png"].includes(r.tipo.toLowerCase())?e.jsx(o,{component:"img",src:r.comprobante,alt:"Vista previa",sx:{height:80,width:80,borderRadius:1,border:"1px solid #ddd",objectFit:"cover",mx:"auto"}}):r.tipo.toLowerCase()==="pdf"?e.jsx(o,{component:"iframe",src:r.comprobante,title:"Vista PDF",sx:{height:80,width:80,borderRadius:1,border:"1px solid #ddd",mx:"auto"}}):e.jsx(i,{variant:"body2",color:"text.secondary",textAlign:"center",children:"Archivo no compatible"}),e.jsxs(o,{mt:1,display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(b,{title:"Ver archivo",children:e.jsx(g,{href:r.comprobante,target:"_blank",rel:"noopener noreferrer",size:"small",color:"primary",children:e.jsx(h,{})})}),e.jsx(i,{variant:"caption",color:"primary",sx:{ml:1},children:"Ver archivo"})]})]}),e.jsx(t,{sx:{px:2,py:1},children:r.detalle}),e.jsx(t,{sx:{textTransform:"capitalize",px:2,py:1},children:r.tipo}),e.jsx(t,{colSpan:3,sx:{textAlign:"center",px:2,py:1},children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"Sin asociaciones registradas"})})]},r.id)})})]})}),e.jsxs(B,{open:y,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(H,{sx:{background:"linear-gradient(90deg, #00695c 0%, #26a69a 100%)",color:"white"},children:"Nuevo Comprobante"}),e.jsx(P,{dividers:!0,sx:{backgroundColor:"#f9f9f9"},children:e.jsxs(o,{component:"form",onSubmit:m,noValidate:!0,children:[e.jsx(U,{margin:"normal",label:"Detalle",fullWidth:!0,value:a.detalle,onChange:r=>c("detalle",r.target.value),error:!!n.detalle,helperText:n.detalle}),e.jsxs(_,{fullWidth:!0,margin:"normal",error:!!n.mes,children:[e.jsx($,{id:"mes-label",children:"Mes"}),e.jsx(E,{labelId:"mes-label",value:a.mes,label:"Mes",onChange:r=>c("mes",r.target.value),children:f.map(r=>e.jsx(O,{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},r))}),n.mes&&e.jsx(i,{variant:"caption",color:"error",children:n.mes})]}),e.jsxs(o,{mt:3,children:[e.jsx("input",{type:"file",accept:".pdf,image/*",id:"file-upload",onChange:r=>{var s;return c("comprobante",((s=r.target.files)==null?void 0:s[0])??null)},style:{display:"none"}}),e.jsx("label",{htmlFor:"file-upload",children:e.jsx(o,{sx:{border:`2px dashed ${n.comprobante?"#f44336":"#ccc"}`,padding:3,borderRadius:2,textAlign:"center",cursor:"pointer",backgroundColor:"#fff",transition:"0.2s","&:hover":{backgroundColor:"#f0f0f0"}},children:a.comprobante?e.jsx(e.Fragment,{children:a.comprobante.type.startsWith("image/")?e.jsx(o,{component:"img",src:URL.createObjectURL(a.comprobante),alt:"Vista previa",sx:{maxHeight:150,maxWidth:"100%",borderRadius:1,mb:1}}):a.comprobante.type==="application/pdf"?e.jsx(o,{sx:{width:"100%",height:150,borderRadius:1,overflow:"hidden",mb:1},children:e.jsx("embed",{src:URL.createObjectURL(a.comprobante),type:"application/pdf",width:"100%",height:"150px"})}):e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Archivo seleccionado: ",a.comprobante.name]})}):e.jsxs(e.Fragment,{children:[e.jsx(j,{sx:{fontSize:40,color:"#666"}}),e.jsx(i,{variant:"body2",color:"text.secondary",mt:1,children:"Haz clic para seleccionar un archivo PDF o imagen"})]})})}),n.comprobante&&e.jsx(i,{variant:"caption",color:"error",display:"block",mt:1,children:n.comprobante})]})]})}),e.jsxs(G,{children:[e.jsx(p,{onClick:()=>l(!1),startIcon:e.jsx(I,{}),variant:"outlined",color:"inherit",children:"Cancelar"}),e.jsx(p,{onClick:m,startIcon:e.jsx(V,{}),variant:"contained",color:"success",disabled:w,children:"Guardar"})]})]})]})};export{Pe as default};
