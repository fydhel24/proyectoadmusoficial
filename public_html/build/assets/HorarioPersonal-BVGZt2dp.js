import{r as u,j as e,$ as B,m as F}from"./app-DpimSwWW.js";import{A as k}from"./app-layout-D5OrI1FG.js";import{A as O}from"./AssignmentTurnedIn-CmTu0uMT.js";import{L as W}from"./LocationOn-D69gMpHJ.js";import I from"./MapComponent-BWYODE1Q.js";import{B as t}from"./Box-CcvOzitD.js";import{P as S,T as o}from"./Typography-KhbTzJKe.js";import{G as l}from"./Grid-CoUOdwyl.js";import{C as d}from"./Card-DPEhf4Im.js";import{B as b}from"./Button-Wm0H3U4H.js";import{A as T}from"./Avatar-Cs6vm9Gc.js";import{D as w,a as z,b as R}from"./DialogTitle-DvoWtW-x.js";import{D as H}from"./DialogActions-BvV5DOfo.js";import"./button-CFsyWUbq.js";import"./clsx-B-dksMZM.js";import"./avatar-CMLXmpAO.js";import"./createLucideIcon-D4CW-wHK.js";import"./index-CTw00F6I.js";import"./index-C0zh00gI.js";import"./index-VNCpVeP9.js";import"./settings-DlGdy5XP.js";import"./app-logo-icon-ZRykUD-a.js";import"./createSvgIcon-CzCXeKc2.js";import"./DefaultPropsProvider-DZDWfkmA.js";import"./leaflet-OtwwC_2u.js";import"./Popup-BEJfRezs.js";import"./createSimplePaletteValueFilter-CGtfMTWx.js";import"./useThemeProps-CLLhiJ1u.js";import"./getThemeProps-B8XpDgi_.js";import"./isMuiElement-D4a5-yK2.js";import"./useId-B3TWxL2D.js";import"./ButtonBase-pmj5C_mX.js";import"./useTimeout-BOj4Dk7I.js";import"./TransitionGroupContext-eXL9qMo5.js";import"./CircularProgress-DtoVrIul.js";import"./useSlot-wiR_y7XT.js";import"./Fade-C4vPWcQd.js";import"./Modal-CR54Ot3q.js";import"./ownerDocument-DW-IO8s5.js";import"./Portal-b9dgGZtC.js";function Ee({user:f,horarioSemanal:s,currentWeek:y,weeks:m=[],diasSemana:x,turnos:v,totalAsignaciones:p}){const[C,h]=u.useState(!1),[n,j]=u.useState(null),A=r=>{const i=r.target.value;F.get("/mi-horario",{week_id:i})},E=r=>{j(r),h(!0)},g=()=>{h(!1),j(null)},D=r=>{switch(r){case"ma√±ana":return"‚òÄÔ∏è";case"tarde":return"üå§Ô∏è";case"noche":return"üåô";default:return"‚è∞"}};return e.jsx(k,{children:e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Mi Horario Semanal"}),e.jsx(t,{sx:{minHeight:"100vh",backgroundColor:"#F9FAFB",py:6},children:e.jsxs(t,{sx:{mx:"auto",maxWidth:"6xl",px:4},children:[e.jsx(S,{elevation:3,sx:{mb:6,p:6},children:e.jsxs(t,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{md:"center"},justifyContent:"space-between"},children:[e.jsxs(t,{children:[e.jsx(o,{variant:"h4",component:"h1",sx:{mb:2,fontWeight:"bold"},children:"Mi Horario Semanal"}),e.jsxs(o,{variant:"body1",color:"text.secondary",children:["Bienvenido, ",e.jsx(o,{component:"span",sx:{fontWeight:"semibold"},children:f.name})]})]}),e.jsxs(t,{sx:{mt:{xs:4,md:0}},children:[e.jsx(o,{variant:"subtitle2",sx:{mb:1},children:"Seleccionar semana:"}),e.jsx("select",{onChange:A,value:y.id,style:{borderRadius:4,border:"1px solid #CBD5E0",backgroundColor:"white",padding:"8px 12px",fontSize:"0.875rem",outline:"none"},children:m&&m.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))})]})]})}),e.jsxs(l,{container:!0,spacing:4,sx:{mb:6},children:[e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:2,sx:{textAlign:"center",p:4},children:[e.jsx(o,{variant:"h3",component:"div",color:"primary",children:p}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Asignaciones totales"})]})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:2,sx:{textAlign:"center",p:4},children:[e.jsx(o,{variant:"h3",component:"div",color:"success.main",children:Object.values(s).filter(r=>Object.values(r).some(i=>i!==null)).length}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"D√≠as con trabajo"})]})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:2,sx:{textAlign:"center",p:4},children:[e.jsx(o,{variant:"h3",component:"div",color:"purple",children:new Set(Object.values(s).flatMap(r=>Object.values(r).filter(i=>i).map(i=>i.company.id))).size}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Empresas diferentes"})]})})]}),e.jsx(t,{sx:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#F3F4F6"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"0.75rem",textTransform:"uppercase",color:"#6B7280"},children:"Turno"}),Object.entries(x).map(([r,i])=>e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"0.75rem",textTransform:"uppercase",color:"#6B7280"},children:i},r))]})}),e.jsx("tbody",{children:Object.entries(v).map(([r,i])=>e.jsxs("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[e.jsx("td",{style:{padding:"12px"},children:e.jsxs(t,{sx:{display:"inline-flex",alignItems:"center",borderRadius:"9999px",px:2,py:1,fontSize:"0.75rem",fontWeight:"medium",...r==="ma√±ana"?{backgroundColor:"#DBEAFE",color:"#1E40AF"}:r==="tarde"?{backgroundColor:"#FEF3C7",color:"#92400E"}:r==="noche"?{backgroundColor:"#EDE9FE",color:"#5B21B6"}:{backgroundColor:"#E5E7EB",color:"#374151"}},children:[e.jsx("span",{style:{marginRight:4},children:D(r)}),r.charAt(0).toUpperCase()+r.slice(1)]})}),Object.keys(x).map(c=>{const a=s[c]&&s[c][r];return e.jsx("td",{style:{padding:"12px",textAlign:"center",verticalAlign:"top"},children:a?e.jsxs(t,{sx:{border:"1px solid #D1FAE5",backgroundColor:"#ECFDF5",p:2,borderRadius:2,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(o,{variant:"subtitle2",sx:{fontWeight:"medium",color:"green.dark"},children:a.company.name}),a.company.direccion&&e.jsx(b,{size:"small",variant:"outlined",startIcon:e.jsx(W,{}),onClick:()=>E(a.company),sx:{mt:1},children:"Ver ubicaci√≥n"})]}):e.jsx(o,{variant:"caption",color:"text.disabled",children:"Libre"})},`${c}-${r}`)})]},r))})]})}),p===0&&e.jsxs(t,{sx:{mt:6,textAlign:"center"},children:[e.jsx(T,{sx:{bgcolor:"grey.300",width:64,height:64,mx:"auto",mb:2},children:e.jsx(O,{sx:{fontSize:40,color:"grey.600"}})}),e.jsx(o,{variant:"h6",color:"text.secondary",children:"No tienes asignaciones esta semana"})]}),e.jsxs(w,{open:C,onClose:g,maxWidth:"md",fullWidth:!0,children:[e.jsx(z,{children:"Ubicaci√≥n de la empresa"}),e.jsx(R,{dividers:!0,children:n?e.jsxs(t,{children:[e.jsx(o,{variant:"subtitle1",sx:{mb:1,fontWeight:"bold"},children:n.name}),n.direccion&&e.jsx(I,{direccion:n.direccion,nombre:n.name,direccion:n.direccion})]}):e.jsx(o,{variant:"body2",children:"No se encontr√≥ la empresa seleccionada."})}),e.jsx(H,{children:e.jsx(b,{onClick:g,color:"primary",children:"Cerrar"})})]})]})})]})})}export{Ee as default};
