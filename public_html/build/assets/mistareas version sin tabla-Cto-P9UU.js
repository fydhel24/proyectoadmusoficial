import{r as u,a as h,j as e,$ as v}from"./app-DwTpSH0U.js";import{A as w,B as z}from"./app-layout-DnzGBPFG.js";import{d as E}from"./debounce-Be36O1Ab.js";import{B as i}from"./Box-Dm-9Odlo.js";import{C as f}from"./Container-tLZarD4t.js";import{T as t,P as S}from"./Typography-B8heRhDi.js";import{G as b}from"./Grid-CGKqZQau.js";import{C as T}from"./Card-BU2PQy8v.js";import{C as F}from"./CardContent-CdRAFDU_.js";import{C as d}from"./Chip-BiIDCYhV.js";import{F as R}from"./FolderOutlined-CO5rHF7x.js";import{C as W}from"./CalendarToday-wKIm76Dd.js";import{R as M,a as m}from"./RadioGroup-D5FHdKIf.js";import{F as p}from"./FormControlLabel-DD1hsK1z.js";import{T as N}from"./TextField-C7xTuRXe.js";import{b as c}from"./DefaultPropsProvider-DRRnqVYH.js";import{f as L}from"./format-C6wJrPT2.js";import"./button-CE2sw9In.js";import"./clsx-B-dksMZM.js";import"./avatar-3rZPDCsD.js";import"./createLucideIcon-8z-XiBgF.js";import"./index-DQwHB60N.js";import"./index-Bu13Uyqm.js";import"./index-DuFQU5C7.js";import"./settings-BWGxbpXO.js";import"./app-logo-icon-kT6HeMlV.js";import"./createSvgIcon-DkcSd2-O.js";import"./useThemeProps-BzNHYq9I.js";import"./getThemeProps-BDgLecqf.js";import"./createSimplePaletteValueFilter-fPviOYGM.js";import"./isMuiElement-BJS3qdzF.js";import"./useSlot-DErp_0ST.js";import"./TransitionGroupContext-nALX_Gj3.js";import"./ButtonBase-DRmvLRZN.js";import"./useTimeout--HoZvQIH.js";import"./SwitchBase-DWy3ZVON.js";import"./Select-D3mwh1vN.js";import"./index-Bw2APseq.js";import"./useSlotProps-BNWp3nnv.js";import"./List-NBjoO2Ug.js";import"./ownerDocument-DW-IO8s5.js";import"./Modal-EvmVwdIL.js";import"./Portal-dRwe7D2B.js";import"./Fade-CPmkmtx1.js";import"./Grow-BaQddceE.js";import"./useControlled-CkY63cvR.js";import"./useId-DQCmvY1A.js";import"./FormGroup-DzPvduDi.js";const P=[{title:"Mis Tareas",href:"/pasante/mistareas"}],g=l=>{if(!l)return"#9E9E9E";switch(l.toLowerCase()){case"alta":return"#FF1744";case"media":return"#FF9100";case"baja":return"#00E676";default:return"#9E9E9E"}},A=l=>{if(!l)return"default";switch(l.toLowerCase()){case"completada":return"success";case"en progreso":return"primary";case"pendiente":return"warning";default:return"default"}};function We({tareas:l}){const[n,x]=u.useState(l),j=u.useCallback(E(async(r,o)=>{var s;try{await h.patch(`/tareas/actualizar-estado/${r}`,{detalle:o,estado:((s=n.find(a=>a.id===r))==null?void 0:s.estado)||"pendiente"})}catch(a){console.error("Error al guardar el detalle:",a)}},1e3),[n]),y=async(r,o)=>{var s;try{await h.patch(`/tareas/actualizar-estado/${r}`,{estado:o,detalle:((s=n.find(a=>a.id===r))==null?void 0:s.detalle)||""}),x(n.map(a=>a.id===r?{...a,estado:o}:a))}catch(a){console.error("Error al actualizar el estado:",a)}},C=(r,o)=>{x(n.map(s=>s.id===r?{...s,detalle:o}:s)),j(r,o)};return e.jsxs(w,{breadcrumbs:P,children:[e.jsx(v,{title:"Mis Tareas"}),e.jsx(i,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #0d47a1 100%)",color:"white",py:3,position:"relative",overflow:"hidden"},children:e.jsxs(f,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:[e.jsx(t,{variant:"h4",className:"mb-6",fontWeight:"bold",children:"ğŸ“‹ Mis Tareas Asignadas"}),e.jsx(t,{variant:"subtitle1",sx:{opacity:.9},children:"Gestiona y actualiza el estado de tus tareas"})]})}),e.jsxs(f,{maxWidth:"xl",sx:{py:4},children:[e.jsx(b,{container:!0,spacing:3,children:n.map(r=>e.jsx(b,{item:!0,xs:12,md:6,lg:4,children:e.jsx(T,{sx:{height:"100%",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0,0,0,0.15)"},borderRadius:3,overflow:"hidden",border:"1px solid rgba(0,0,0,0.1)",borderLeft:`6px solid ${g(r.tarea.prioridad)}`},children:e.jsxs(F,{sx:{p:3},children:[e.jsxs(i,{className:"flex flex-col gap-2 mb-4",children:[e.jsxs(i,{className:"flex justify-between items-start",children:[e.jsx(t,{variant:"h6",className:"font-bold",children:r.tarea.titulo}),e.jsx(d,{label:r.tarea.prioridad,sx:{bgcolor:g(r.tarea.prioridad),color:"white",fontWeight:"bold"},size:"small"})]}),r.tarea.tipo&&e.jsx(i,{className:"flex items-center gap-2",children:e.jsx(d,{label:r.tarea.tipo.nombre_tipo,size:"small",sx:{bgcolor:c("#1976d2",.1),color:"primary.main","& .MuiChip-label":{fontWeight:500}},icon:e.jsx(R,{sx:{fontSize:16}})})})]}),e.jsx(t,{className:"mb-3",sx:{color:"text.secondary",p:2,bgcolor:c("#1976d2",.05),borderRadius:2,borderLeft:"4px solid #1976d2"},children:r.tarea.descripcion}),r.tarea.company&&e.jsxs(i,{sx:{mb:2},children:[e.jsxs(i,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(d,{icon:e.jsx(z,{fontSize:"small"}),label:r.tarea.company.name,variant:"outlined",color:"primary",size:"small"}),e.jsx(d,{icon:e.jsx(W,{fontSize:"small"}),label:L(new Date(r.fecha),"dd/MM/yyyy"),variant:"outlined",color:"primary",size:"small"})]}),e.jsxs(t,{variant:"body2",sx:{mt:1,color:"text.secondary",fontSize:"0.875rem"},children:["ğŸ“ ",r.tarea.company.ubicacion]}),e.jsxs(t,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.875rem"},children:["ğŸ¢ ",r.tarea.company.direccion]})]}),e.jsx(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,pt:2,borderTop:"1px solid rgba(0,0,0,0.1)"},children:e.jsx(d,{label:r.estado||"Sin estado",color:A(r.estado),size:"small",sx:{fontWeight:"medium"}})}),r.detalle&&e.jsxs(t,{sx:{mt:2,fontSize:"0.875rem",fontStyle:"italic",color:"text.secondary",p:1.5,bgcolor:c("#000",.03),borderRadius:1},children:["â„¹ï¸ ",r.detalle]}),e.jsxs(i,{sx:{mt:3,p:2,bgcolor:c("#1976d2",.05),borderRadius:2,border:"1px solid",borderColor:c("#1976d2",.1)},children:[e.jsx(t,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold",color:"primary.main"},children:"Estado de la tarea"}),e.jsxs(M,{row:!0,value:r.estado||"pendiente",onChange:o=>y(r.id,o.target.value),sx:{mb:2},children:[e.jsx(p,{value:"completada",control:e.jsx(m,{color:"success"}),label:"Completada"}),e.jsx(p,{value:"en progreso",control:e.jsx(m,{color:"primary"}),label:"En Progreso"}),e.jsx(p,{value:"pendiente",control:e.jsx(m,{color:"warning"}),label:"Pendiente"})]}),e.jsx(N,{fullWidth:!0,multiline:!0,rows:2,variant:"outlined",placeholder:"Agregar detalles o comentarios sobre la tarea...",value:r.detalle||"",onChange:o=>C(r.id,o.target.value),sx:{"& .MuiOutlinedInput-root":{bgcolor:"white","&:hover":{borderColor:"primary.main"}}}})]})]})})},r.id))}),n.length===0&&e.jsxs(S,{sx:{p:6,textAlign:"center",borderRadius:3,background:"linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%)"},children:[e.jsx(t,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"ğŸ“ No tienes tareas asignadas"}),e.jsx(t,{color:"text.secondary",children:"Por el momento no hay tareas asignadas para ti"})]})]})]})}export{We as default};
