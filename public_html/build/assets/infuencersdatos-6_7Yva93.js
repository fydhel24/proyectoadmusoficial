import{q as nt,r as n,j as e,$ as rt,m as Ie}from"./app-CUaISujP.js";import{A as st}from"./app-layout-CWuB6NnO.js";import{C as De}from"./Close-Dux9YOWC.js";import{V as Te,C as H,I as it}from"./VideoLibrary-Dj7TmAi_.js";import{D as le}from"./Delete-Dw3wghQe.js";import{E as J}from"./Edit-BqoUF0Kc.js";import{P as lt}from"./PhotoCamera-BnzYFIwx.js";import{S as ct}from"./Search-C72N3j8E.js";import{u as dt,T as i,P as ut}from"./Typography-BXYVZiZC.js";import{B as c}from"./Box-F7bZ1tjM.js";import{T as y}from"./TextField-k7btXKeC.js";import{I as O}from"./IconButton-C9CZ2MaG.js";import{T as mt,a as pt}from"./TablePagination-B-tqJKy2.js";import{T as ht}from"./TableContainer-CWbvjH18.js";import{T as xt,a as ft,b as Pe,c as gt}from"./TableRow-DPD5_gbf.js";import{T as h}from"./TableCell-CNOqIwaJ.js";import{C as Fe}from"./Checkbox-CELrtglo.js";import{T as Y}from"./TableSortLabel-C328wzC9.js";import{B as b}from"./Button-BnJ1HrMo.js";import{D as Le,a as Re,b as Oe}from"./DialogTitle-BDIXDovD.js";import{G as S}from"./Grid-D22HHTDy.js";import{C as z}from"./CircularProgress-nCrY-oKD.js";import{I as jt,a as bt}from"./ImageListItem-C8qw5pss.js";import{D as Ve}from"./DialogActions-V7uP84uM.js";import{C as ce}from"./Card-WOrh8z9Z.js";import{C as de}from"./CardContent-Cfc9Wxl5.js";import{S as ue}from"./Stack-DTJ6fEPw.js";import{S as vt}from"./Snackbar-B7vsGb3O.js";import"./button-0Hij8kFa.js";import"./clsx-B-dksMZM.js";import"./avatar-vMY4vQMB.js";import"./createLucideIcon-XVNSMSUw.js";import"./index-DZ5Pi2z6.js";import"./index-b-iRS2c_.js";import"./index-JQPl0ewz.js";import"./settings-CLpIyV6T.js";import"./app-logo-icon-DxXq1G7b.js";import"./createSvgIcon-CsdeE9h-.js";import"./DefaultPropsProvider-DnyQ5W7l.js";import"./useSlot-CYEIGEy5.js";import"./TransitionGroupContext-Ci2WFGYL.js";import"./useId-B2OWouFT.js";import"./Select-vcTzVEW7.js";import"./isMuiElement-6h6e2Qkh.js";import"./index-Coxc2Kyf.js";import"./useSlotProps-BLv6iqgZ.js";import"./List-C4LEDEwh.js";import"./ownerDocument-DW-IO8s5.js";import"./Modal-ZVwyIF_S.js";import"./useTimeout-BTm0asfU.js";import"./Portal-8nlpaEwd.js";import"./Fade-ChnIJY1B.js";import"./debounce-Be36O1Ab.js";import"./Grow-B_EMGJuI.js";import"./useControlled-QlBAzUVK.js";import"./ButtonBase-DE1CgUJq.js";import"./KeyboardArrowRight-CBXyxG8r.js";import"./LastPage-pLnkY1fb.js";import"./MenuItem-bfQTmTsC.js";import"./listItemTextClasses-D-n0sOX5.js";import"./dividerClasses-Bv3o9dJ8.js";import"./SwitchBase-C0XU40cX.js";import"./useThemeProps-DJqCDgEx.js";import"./getThemeProps-DVd4S7h3.js";import"./ClickAwayListener-CJ5v628k.js";const yt=[{title:"Listado de influencers",href:"/infuencersdatos"}];function Ue(r,x,l){return x[l]<r[l]?-1:x[l]>r[l]?1:0}function Ct(r,x){return r==="desc"?(l,p)=>Ue(l,p,x):(l,p)=>-Ue(l,p,x)}function St(r,x){const l=r.map((p,w)=>[p,w]);return l.sort((p,w)=>{const k=x(p[0],w[0]);return k!==0?k:p[1]-w[1]}),l.map(p=>p[0])}function Uo(){const r=dt(),{users:x,flash:l}=nt().props,[p,w]=n.useState(x),[k,Ae]=n.useState(""),[V,U]=n.useState(null),[A,me]=n.useState(null),[D,T]=n.useState(""),[B,s]=n.useState(null),[Q,W]=n.useState(""),[We,pe]=n.useState(!1),[P,he]=n.useState(null),[C,Z]=n.useState([]),[xe,fe]=n.useState([]),[ee,ge]=n.useState(!1),[$e,je]=n.useState(!1),[ze,be]=n.useState(!1),[g,ve]=n.useState(null),[m,te]=n.useState(""),[v,E]=n.useState({nombre:"",edad:0,descripcion:""}),[ye,Ce]=n.useState([]),[F,N]=n.useState(!1),[Be,Se]=n.useState(!1),[oe,M]=n.useState("video"),[ae,ne]=n.useState(null),[f,Ne]=n.useState("asc"),[u,Me]=n.useState("id"),[j,q]=n.useState([]),[_,we]=n.useState(0),[$,qe]=n.useState(10);n.useEffect(()=>{w(x)},[x]),n.useEffect(()=>{l!=null&&l.success?s(l.success):l!=null&&l.error&&s(l.error)},[l]);const L=(t,a,o)=>{U(t),me(a),T(o),a==="cantidad"&&!o&&T(0)},R=async()=>{if(D.toString().trim()===""){s("El campo no puede estar vacío.");return}const t={[A]:D};Ie.put(`/infuencersdatos/${V}`,t,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w(a=>a.map(o=>o.id===V?{...o,[A]:D}:o)),U(null),me(null),T("")},onError:()=>{s("Hubo un error al actualizar el campo")}})},_e=async t=>{he(t),pe(!0),await re(t)},re=async t=>{je(!0);try{const o=await(await fetch(`/infuencersdatos/${t}/photos`)).json();fe(o.photos||[])}catch{s("Error al cargar las fotos")}finally{je(!1)}},se=()=>{pe(!1),he(null),Z([]),fe([])},Ke=t=>{const a=Array.from(t.target.files||[]);Z(a)},Ge=async()=>{var a;if(!P||C.length===0)return;ge(!0);const t=new FormData;C.forEach(o=>{t.append("photos[]",o)});try{const o=await fetch(`/infuencersdatos/${P}/photos`,{method:"POST",body:t,headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}),d=await o.json();o.ok?(s("Fotos subidas exitosamente"),Z([]),await re(P)):s(d.message||"Error al subir las fotos")}catch{s("Error al subir las fotos")}finally{ge(!1)}},Xe=async t=>{var a;if(!(!P||!window.confirm("¿Estás seguro de que deseas eliminar esta foto?")))try{const o=await fetch(`/infuencersdatos/${P}/photos/${t}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}),d=await o.json();o.ok?(s("Foto eliminada exitosamente"),await re(P)):s(d.message||"Error al eliminar la foto")}catch{s("Error al eliminar la foto")}},He=async t=>{ve(t),be(!0),M("video"),await K(t)},ie=()=>{be(!1),ve(null),te(""),E({nombre:"",edad:0,descripcion:""}),W(""),Ce([]),ne(null),M("video")},K=async t=>{Se(!0);try{const o=await(await fetch(`/infuencersdatos/${t}/videos`)).json();Ce(o.videos||[]);const d=(o.videos||[]).find(X=>X.tipo==="datos");d?(ne(d.id),E(d.influencer_data||{nombre:"",edad:0,descripcion:""}),W(d.cupon||"")):(ne(null),E({nombre:"",edad:0,descripcion:""}),W(""))}catch{s("Error al cargar el contenido")}finally{Se(!1)}},Je=async()=>{var t;if(!g||!m.trim()){s("Por favor ingresa una URL válida");return}N(!0);try{const a=await fetch(`/infuencersdatos/${g}/videos`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({content_type:"video",video_url:m})}),o=await a.json();a.ok?(s("Video guardado exitosamente"),te(""),await K(g)):s(o.error||o.message||"Error al guardar el video")}catch{s("Error al guardar el video")}finally{N(!1)}},Ye=async()=>{var t,a;if(!g||!v.nombre.trim()||!v.descripcion.trim()){s("Por favor completa todos los campos requeridos");return}N(!0);try{let o;ae?o=await fetch(`/infuencersdatos/${g}/datos/${ae}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({influencer_data:v,cupon:Q})}):o=await fetch(`/infuencersdatos/${g}/videos`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({content_type:"datos",influencer_data:v,cupon:Q})});const d=await o.json();console.log("Respuesta backend:",d),o.ok?(s(ae?"Datos actualizados exitosamente":"Datos guardados exitosamente"),E({nombre:"",edad:0,descripcion:""}),W(""),await K(g)):s(d.error||d.message||"Error al guardar los datos")}catch{s("Error al guardar los datos")}finally{N(!1)}},Qe=async t=>{var a;if(!(!g||!window.confirm("¿Estás seguro de que deseas eliminar este elemento?")))try{const o=await fetch(`/infuencersdatos/${g}/videos/${t}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}}),d=await o.json();o.ok?(s("Elemento eliminado exitosamente"),await K(g)):s(d.error||"Error al eliminar el elemento")}catch{s("Error al eliminar el elemento")}},ke=t=>{const a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,o=t.match(a);return o&&o[2].length===11?o[2]:null},I=n.useMemo(()=>p.filter(t=>t.name.toLowerCase().includes(k.toLowerCase())||String(t.id).includes(k)),[p,k]),Ee=n.useMemo(()=>St(I,Ct(f,u)),[I,f,u]),Ze=n.useMemo(()=>Ee.slice(_*$,_*$+$),[Ee,_,$]),G=t=>{Ne(u===t&&f==="asc"?"desc":"asc"),Me(t)},et=t=>{t.target.checked?q(I.map(a=>a.id)):q([])},tt=t=>{q(a=>a.includes(t)?a.filter(o=>o!==t):[...a,t])},ot=t=>j.indexOf(t)!==-1,at=()=>{window.confirm(`¿Estás seguro de que deseas eliminar ${j.length} usuario${j.length>1?"s":""}?`)&&(j.forEach(t=>{Ie.delete(`/infuencersdatos/${t}`,{preserveState:!0,preserveScroll:!0})}),q([]))};return n.useEffect(()=>{if(!B)return;const t=setTimeout(()=>s(null),4e3);return()=>clearTimeout(t)},[B]),e.jsxs(st,{breadcrumbs:yt,children:[e.jsx(rt,{title:"Influencer"}),e.jsx(i,{variant:"h4",color:"primary",gutterBottom:!0,children:"Agregar la cantidad de videos que tendrá el influencer"}),e.jsx(c,{sx:{display:"flex",gap:2,mb:3,alignItems:"center"},children:e.jsx(y,{label:"Buscar por nombre o ID",variant:"outlined",size:"small",value:k,onChange:t=>Ae(t.target.value),sx:{maxWidth:320},InputProps:{startAdornment:e.jsx(O,{tabIndex:-1,children:e.jsx(ct,{})})}})}),j.length>0&&e.jsxs(mt,{sx:{bgcolor:"action.selected",mb:1,borderRadius:2},children:[e.jsxs(i,{sx:{flex:"1 1 100%"},color:"inherit",children:[j.length," seleccionado",j.length>1?"s":""]}),e.jsx(O,{color:"error",onClick:at,children:e.jsx(le,{})})]}),e.jsxs(ht,{component:ut,sx:{borderRadius:2,boxShadow:3,overflowX:"auto",border:"1px solid #e0e0e0",background:r.palette.background.paper,mx:{xs:0,md:2}},children:[e.jsxs(xt,{size:"small",children:[e.jsx(ft,{children:e.jsxs(Pe,{children:[e.jsx(h,{padding:"checkbox",sx:{backgroundColor:r.palette.primary.main,color:r.palette.common.white},children:e.jsx(Fe,{indeterminate:j.length>0&&j.length<I.length,checked:I.length>0&&j.length===I.length,onChange:et,sx:{color:r.palette.common.white}})}),e.jsx(h,{sortDirection:u==="id"?f:!1,sx:{fontWeight:"bold",backgroundColor:r.palette.primary.main,color:r.palette.common.white},children:e.jsx(Y,{active:u==="id",direction:u==="id"?f:"asc",onClick:()=>G("id"),sx:{color:r.palette.common.white,"&.Mui-active":{color:r.palette.common.white}},children:"ID"})}),e.jsx(h,{sortDirection:u==="name"?f:!1,sx:{fontWeight:"bold",backgroundColor:r.palette.primary.main,color:r.palette.common.white},children:e.jsx(Y,{active:u==="name",direction:u==="name"?f:"asc",onClick:()=>G("name"),sx:{color:r.palette.common.white,"&.Mui-active":{color:r.palette.common.white}},children:"Nombre"})}),e.jsx(h,{sortDirection:u==="email"?f:!1,sx:{fontWeight:"bold",backgroundColor:r.palette.primary.main,color:r.palette.common.white},children:e.jsx(Y,{active:u==="email",direction:u==="email"?f:"asc",onClick:()=>G("email"),sx:{color:r.palette.common.white,"&.Mui-active":{color:r.palette.common.white}},children:"Email"})}),e.jsx(h,{sortDirection:u==="cantidad"?f:!1,sx:{fontWeight:"bold",backgroundColor:r.palette.primary.main,color:r.palette.common.white},children:e.jsx(Y,{active:u==="cantidad",direction:u==="cantidad"?f:"asc",onClick:()=>G("cantidad"),sx:{color:r.palette.common.white,"&.Mui-active":{color:r.palette.common.white}},children:"Cantidad de videos asignados"})}),e.jsx(h,{sx:{fontWeight:"bold",backgroundColor:r.palette.primary.main,color:r.palette.common.white},children:"Acciones"})]})}),e.jsx(gt,{children:Ze.map(t=>{const a=ot(t.id);return e.jsxs(Pe,{hover:!0,selected:a,onClick:()=>tt(t.id),children:[e.jsx(h,{padding:"checkbox",children:e.jsx(Fe,{checked:a})}),e.jsx(h,{children:t.id}),e.jsx(h,{children:V===t.id&&A==="name"?e.jsx(y,{value:D,size:"small",autoFocus:!0,onChange:o=>T(o.target.value),onBlur:R,onKeyDown:o=>{o.key==="Enter"&&R(),o.key==="Escape"&&U(null)}}):e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(J,{fontSize:"small",color:"action",sx:{cursor:"pointer"},onClick:o=>{o.stopPropagation(),L(t.id,"name",t.name)}}),e.jsx("span",{onDoubleClick:()=>L(t.id,"name",t.name),style:{cursor:"pointer"},title:"Doble click para editar",children:t.name})]})}),e.jsx(h,{children:V===t.id&&A==="email"?e.jsx(y,{value:D,size:"small",autoFocus:!0,onChange:o=>T(o.target.value),onBlur:R,onKeyDown:o=>{o.key==="Enter"&&R(),o.key==="Escape"&&U(null)}}):e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(J,{fontSize:"small",color:"action",sx:{cursor:"pointer"},onClick:o=>{o.stopPropagation(),L(t.id,"email",t.email)}}),e.jsx("span",{onDoubleClick:()=>L(t.id,"email",t.email),style:{cursor:"pointer"},title:"Doble click para editar",children:t.email})]})}),e.jsx(h,{children:V===t.id&&A==="cantidad"?e.jsx(y,{type:"number",value:D,size:"small",autoFocus:!0,onChange:o=>T(o.target.value),onBlur:R,onKeyDown:o=>{o.key==="Enter"&&R(),o.key==="Escape"&&U(null)}}):e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(J,{fontSize:"small",color:"action",sx:{cursor:"pointer"},onClick:o=>{o.stopPropagation(),L(t.id,"cantidad",t.cantidad)}}),e.jsx("span",{onDoubleClick:()=>L(t.id,"cantidad",t.cantidad),style:{cursor:"pointer"},title:"Doble click para editar",children:t.cantidad})]})}),e.jsx(h,{children:e.jsxs(c,{sx:{display:"flex",gap:1},children:[e.jsx(b,{size:"small",variant:"outlined",startIcon:e.jsx(lt,{}),onClick:o=>{o.stopPropagation(),_e(t.id)},sx:{mr:1},children:"Fotos"}),e.jsx(b,{size:"small",variant:"outlined",startIcon:e.jsx(Te,{}),onClick:o=>{o.stopPropagation(),He(t.id)},children:"Subir Videos"})]})})]},t.id)})})]}),e.jsx(pt,{component:"div",count:I.length,page:_,rowsPerPage:$,onPageChange:(t,a)=>we(a),onRowsPerPageChange:t=>{qe(parseInt(t.target.value,10)),we(0)},rowsPerPageOptions:[5,10,25],labelRowsPerPage:"Filas por página"})]}),e.jsxs(Le,{open:We,onClose:se,maxWidth:"md",fullWidth:!0,children:[e.jsx(Re,{children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"h6",children:"Gestionar Fotos del Influencer"}),e.jsx(O,{onClick:se,children:e.jsx(De,{})})]})}),e.jsxs(Oe,{children:[e.jsxs(c,{sx:{mb:3},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Subir nuevas fotos"}),e.jsxs(c,{sx:{display:"flex",gap:2,alignItems:"center",mb:2},children:[e.jsxs(b,{variant:"outlined",component:"label",startIcon:e.jsx(H,{}),children:["Seleccionar Fotos",e.jsx("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:Ke})]}),C.length>0&&e.jsxs(i,{variant:"body2",color:"textSecondary",children:[C.length," archivo",C.length>1?"s":""," seleccionado",C.length>1?"s":""]})]}),C.length>0&&e.jsxs(c,{sx:{mb:2},children:[e.jsx(i,{variant:"body2",gutterBottom:!0,children:"Vista previa:"}),e.jsx(S,{container:!0,spacing:2,children:C.map((t,a)=>e.jsx(S,{item:!0,xs:6,sm:4,md:3,children:e.jsxs(c,{sx:{position:"relative"},children:[e.jsx("img",{src:URL.createObjectURL(t),alt:`Preview ${a+1}`,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px"}}),e.jsx(i,{variant:"caption",sx:{display:"block",mt:1,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name})]})},a))}),e.jsx(c,{sx:{mt:2},children:e.jsx(b,{variant:"contained",onClick:Ge,disabled:ee,startIcon:ee?e.jsx(z,{size:20}):e.jsx(H,{}),children:ee?"Subiendo...":"Subir Fotos"})})]})]}),e.jsxs(c,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Fotos actuales"}),$e?e.jsx(c,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(z,{})}):xe.length===0?e.jsx(i,{variant:"body2",color:"textSecondary",sx:{textAlign:"center",py:3},children:"No hay fotos subidas para este influencer"}):e.jsx(jt,{cols:3,rowHeight:200,gap:8,children:xe.map(t=>e.jsxs(bt,{children:[e.jsx("img",{src:t.path,alt:t.nombre,loading:"lazy",style:{width:"100%",height:"200px",objectFit:"cover"}}),e.jsx(it,{title:t.nombre,actionIcon:e.jsx(O,{sx:{color:"rgba(255, 255, 255, 0.54)"},onClick:()=>Xe(t.id),size:"small",children:e.jsx(le,{})})})]},t.id))})]})]}),e.jsx(Ve,{children:e.jsx(b,{onClick:se,children:"Cerrar"})})]}),e.jsxs(Le,{open:ze,onClose:ie,fullWidth:!0,maxWidth:"md",children:[e.jsx(Re,{children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"h6",children:"Gestionar Contenido del Influencer"}),e.jsx(O,{onClick:ie,children:e.jsx(De,{})})]})}),e.jsx(Oe,{dividers:!0,sx:{maxHeight:"75vh",overflowY:"auto"},children:e.jsxs(S,{container:!0,spacing:3,children:[e.jsx(S,{item:!0,xs:12,children:e.jsx(ce,{variant:"outlined",children:e.jsxs(de,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Tipo de Contenido"}),e.jsxs(ue,{direction:"row",spacing:2,children:[e.jsx(b,{variant:oe==="video"?"contained":"outlined",onClick:()=>M("video"),startIcon:e.jsx(Te,{}),fullWidth:!0,children:"Video"}),e.jsx(b,{variant:oe==="datos"?"contained":"outlined",onClick:()=>M("datos"),startIcon:e.jsx(J,{}),fullWidth:!0,children:"Datos del Influencer"})]})]})})}),e.jsx(S,{item:!0,xs:12,children:e.jsx(ce,{variant:"outlined",children:e.jsx(de,{children:oe==="video"?e.jsxs(ue,{spacing:2,children:[e.jsx(i,{variant:"h6",children:"Agregar Video"}),e.jsx(y,{fullWidth:!0,label:"Link del video",placeholder:"https://www.youtube.com/watch?v=...",variant:"outlined",value:m,onChange:t=>te(t.target.value),error:m&&!m.includes("youtube.com")&&!m.includes("youtu.be"),helperText:m&&!m.includes("youtube.com")&&!m.includes("youtu.be")?"Por favor ingresa una URL válida de YouTube":""}),m&&(m.includes("youtube.com")||m.includes("youtu.be"))&&e.jsxs(c,{children:[e.jsx(i,{variant:"body2",children:"Vista previa:"}),(()=>{const t=ke(m);return t?e.jsx(c,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",borderRadius:1},children:e.jsx("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:`https://www.youtube.com/embed/${t}`,title:"Vista previa del video",frameBorder:"0",allowFullScreen:!0})}):e.jsx(i,{variant:"body2",color:"error",children:"URL de video no válida"})})()]}),e.jsx(b,{variant:"contained",startIcon:F?e.jsx(z,{size:20}):e.jsx(H,{}),onClick:Je,disabled:F||!m.trim(),fullWidth:!0,children:F?"Guardando...":"Guardar Video"})]}):e.jsxs(ue,{spacing:2,children:[e.jsx(i,{variant:"h6",children:"Datos del Influencer"}),e.jsx(y,{fullWidth:!0,label:"Nombre",value:v.nombre,onChange:t=>E(a=>({...a,nombre:t.target.value}))}),e.jsx(y,{fullWidth:!0,label:"Edad",type:"number",value:v.edad||"",onChange:t=>E(a=>({...a,edad:parseInt(t.target.value)||0})),inputProps:{min:1,max:120}}),e.jsx(y,{fullWidth:!0,label:"Descripción",multiline:!0,rows:4,value:v.descripcion,onChange:t=>E(a=>({...a,descripcion:t.target.value}))}),e.jsx(y,{fullWidth:!0,label:"Cupón (Opcional)",placeholder:"Ingresa el código de cupón",value:Q,onChange:t=>W(t.target.value),helperText:"Este campo es opcional y estará disponible para usuarios influencer"}),e.jsx(b,{variant:"contained",startIcon:F?e.jsx(z,{size:20}):e.jsx(H,{}),onClick:Ye,disabled:F||!v.nombre.trim()||!v.descripcion.trim(),fullWidth:!0,children:F?"Guardando...":"Guardar Datos"})]})})})}),e.jsxs(S,{item:!0,xs:12,children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Contenido Actual"}),Be?e.jsx(c,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(z,{})}):ye.length===0?e.jsx(i,{variant:"body2",color:"textSecondary",align:"center",sx:{py:3},children:"No hay contenido guardado para este influencer"}):e.jsx(S,{container:!0,spacing:2,children:ye.map(t=>{var a,o,d;return e.jsx(S,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(ce,{variant:"outlined",children:e.jsxs(de,{children:[t.tipo==="video"?e.jsxs(e.Fragment,{children:[(()=>{const X=ke(t.url);return X?e.jsx(c,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",borderRadius:1,mb:2},children:e.jsx("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:`https://www.youtube.com/embed/${X}`,title:t.nombre,frameBorder:"0",allowFullScreen:!0})}):e.jsx(i,{variant:"body2",color:"error",children:"Video no disponible"})})(),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:"Video"}),e.jsx(i,{variant:"body2",color:"textSecondary",children:t.nombre})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{sx:{mb:2,p:2,bgcolor:"grey.100",borderRadius:1},children:e.jsx(i,{variant:"subtitle2",color:"primary",children:"DATOS DEL INFLUENCER"})}),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:((a=t.influencer_data)==null?void 0:a.nombre)||"Sin nombre"}),e.jsxs(i,{variant:"body2",color:"textSecondary",children:["Edad: ",((o=t.influencer_data)==null?void 0:o.edad)||"No especificada"]}),e.jsx(i,{variant:"body2",color:"textSecondary",children:((d=t.influencer_data)==null?void 0:d.descripcion)||"Sin descripción"}),t.cupon&&e.jsxs(i,{variant:"body2",color:"primary",sx:{mt:1},children:[e.jsx("strong",{children:"Cupón:"})," ",t.cupon]})]}),e.jsx(c,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:e.jsx(O,{color:"error",onClick:()=>Qe(t.id),size:"small",children:e.jsx(le,{})})})]})})},t.id)})})]})]})}),e.jsx(Ve,{children:e.jsx(b,{onClick:ie,children:"Cerrar"})})]}),e.jsx(vt,{open:!!B,message:B,onClose:()=>s(null),autoHideDuration:4e3})]})}export{Uo as default};
