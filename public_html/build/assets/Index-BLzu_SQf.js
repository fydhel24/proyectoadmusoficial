import{j as r,q as I,r as E}from"./app-DWYhLQL6.js";import{A as P,B as z}from"./app-layout-p7K4X7eV.js";import{c as A}from"./createSvgIcon-C-V1FIKo.js";import{C as L}from"./CheckCircle-BPToE68B.js";import{P as R}from"./HourglassEmpty-C8xZOaW_.js";import{W as M}from"./WbSunny-C1NkJNLy.js";import{u as G,P as S}from"./Paper-EniTK7He.js";import{B as n}from"./Box-BbMU-_RR.js";import{T as e}from"./Typography-IkT196je.js";import{T as N,a as U,b as v,c as _}from"./TableRow-DBOU2XrP.js";import{T as d}from"./TableCell-C5DOKis2.js";import{S as m}from"./Stack-nT1jkqe3.js";import{T as q}from"./Tooltip-D9IkZOyx.js";import{C as T}from"./Chip-Dd1dfm5j.js";import{D as H,a as J,b as O}from"./DialogTitle-BRc-au27.js";import{G as p}from"./Grid-DU2EuT6q.js";import{D as V}from"./Divider-_DokKI_g.js";import{D as X}from"./DialogActions-2fZYmJbN.js";import{B as F}from"./Button-BrLf_Pls.js";import"./button-wMTuvAkw.js";import"./clsx-B-dksMZM.js";import"./avatar-C0bnmZQz.js";import"./createLucideIcon-DISkT-zV.js";import"./index-vDywYphy.js";import"./index-CvZMSx04.js";import"./index-C-qtZoBa.js";import"./settings-B1FLQ7wV.js";import"./app-logo-icon-HoYzQaBs.js";import"./DefaultPropsProvider-CHy6HlRv.js";import"./createSimplePaletteValueFilter-WGi9SSDd.js";import"./useThemeProps-Bas4AH8z.js";import"./getThemeProps-DLKBaTjH.js";import"./index-DtBJPI5W.js";import"./useSlot-CO4IlLCl.js";import"./TransitionGroupContext-D4TXwhqE.js";import"./useTimeout-CcjJ2cmE.js";import"./useControlled-5UsadrEY.js";import"./useId-o3zk_1yM.js";import"./Fade-BWgYys4A.js";import"./Grow-IF_zPiYA.js";import"./Popper-BNtv9MeI.js";import"./ownerDocument-DW-IO8s5.js";import"./Portal-Dt5KHSRP.js";import"./useSlotProps-CBCDIG0V.js";import"./ButtonBase-DpqQEAAf.js";import"./Modal-N30Js5sT.js";import"./createChainedFunction-BO_9K8Jh.js";import"./isMuiElement-D94hBNTL.js";import"./dividerClasses-BOZ5yH6J.js";import"./CircularProgress-Bo20HsGQ.js";const K=A(r.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"})),Vr=()=>{var g;const t=G(),{datosPorEmpresa:k,diasSemana:x}=I().props,[i,h]=E.useState(null),f=o=>{switch(o){case"alta":return t.palette.error.main;case"media":return t.palette.warning.main;case"baja":return t.palette.success.main;default:return t.palette.grey[500]}},j=["linear-gradient(135deg, #e3f2fd, #bbdefb)","linear-gradient(135deg, #fce4ec, #f8bbd0)","linear-gradient(135deg, #ede7f6, #d1c4e9)","linear-gradient(135deg, #f1f8e9, #dcedc8)","linear-gradient(135deg, #fff3e0, #ffe0b2)","linear-gradient(135deg, #e0f7fa, #b2ebf2)"],u=()=>{h(null)},D=o=>{switch(o){case"pendiente":return r.jsx(R,{fontSize:"small",sx:{ml:.5}});case"en_proceso":return r.jsx(K,{fontSize:"small",sx:{ml:.5}});case"completada":return r.jsx(L,{fontSize:"small",sx:{ml:.5}});default:return null}},W={monday:"Lunes",tuesday:"Martes",wednesday:"MiÃ©rcoles",thursday:"Jueves",friday:"Viernes",saturday:"SÃ¡bado",sunday:"Domingo"};return r.jsxs(P,{children:[r.jsxs(n,{p:3,children:[r.jsx(e,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"ðŸ“… Calendario Semanal por Empresa"}),r.jsx(S,{elevation:3,sx:{overflowX:"auto",borderRadius:3},children:r.jsxs(N,{children:[r.jsx(U,{children:r.jsxs(v,{sx:{backgroundColor:t.palette.grey[100]},children:[r.jsx(d,{children:r.jsxs(m,{direction:"row",alignItems:"center",gap:1,children:[r.jsx(z,{color:"action"}),r.jsx("strong",{children:"Empresa"})]})}),x.map((o,a)=>r.jsx(d,{children:r.jsxs(m,{direction:"row",alignItems:"center",gap:1,children:[r.jsx(M,{fontSize:"small"}),r.jsxs(n,{children:[r.jsx(e,{fontWeight:"bold",children:W[o.nombre.toLowerCase()]??o.nombre}),r.jsx(e,{variant:"caption",children:o.fecha})]})]})},a))]})}),r.jsx(_,{children:k.map((o,a)=>r.jsxs(v,{sx:{background:j[a%j.length],transition:"background 0.3s ease-in-out"},children:[r.jsx(d,{sx:{fontWeight:"bold"},children:o.empresa.name??"Empresa sin nombre"}),x.map((w,B)=>{const b=o.tareas[w.fecha]||[];return r.jsx(d,{children:b.length>0?r.jsx(m,{spacing:.5,children:b.slice().sort((s,c)=>{const l={alta:1,media:2,baja:3};return(l[s.prioridad]||4)-(l[c.prioridad]||4)}).map(s=>{var c,l,y,C;return r.jsx(q,{title:((l=(c=s.asignaciones)==null?void 0:c[0])==null?void 0:l.estado)??"Sin estado",children:r.jsx(T,{icon:D((C=(y=s.asignaciones)==null?void 0:y[0])==null?void 0:C.estado),label:s.titulo,size:"small",onClick:()=>h(s),sx:{backgroundColor:f(s.prioridad),color:"#fff",fontWeight:"bold",cursor:"pointer",pl:1}},s.id)})})}):r.jsx(e,{variant:"caption",color:"text.secondary",children:"â€”"})},B)})]},a))})]})})]}),r.jsxs(H,{open:!!i,onClose:u,maxWidth:"sm",fullWidth:!0,children:[r.jsx(J,{sx:{fontWeight:"bold",backgroundColor:t.palette.primary.main,color:"#fff"},children:"ðŸ“ Detalles de la Tarea"}),r.jsx(O,{dividers:!0,sx:{p:3},children:i&&r.jsxs(n,{display:"flex",flexDirection:"column",gap:3,children:[r.jsxs(n,{children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"TÃ­tulo"}),r.jsx(e,{variant:"body1",fontWeight:"bold",children:i.titulo})]}),r.jsxs(p,{container:!0,spacing:2,children:[r.jsxs(p,{item:!0,xs:6,children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"Prioridad"}),r.jsx(T,{label:i.prioridad.toUpperCase(),size:"small",sx:{fontWeight:"bold",color:"#fff",backgroundColor:f(i.prioridad)}})]}),r.jsxs(p,{item:!0,xs:6,children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"Tipo"}),r.jsx(e,{children:((g=i.tipo)==null?void 0:g.nombre_tipo)??"No especificado"})]})]}),r.jsxs(n,{children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"DescripciÃ³n"}),r.jsx(e,{children:i.descripcion||"Sin descripciÃ³n"})]}),r.jsxs(n,{children:[r.jsx(e,{variant:"subtitle2",color:"text.secondary",children:"DescripciÃ³n"}),r.jsx(e,{children:i.descripcion||"Sin descripciÃ³n"})]}),r.jsx(V,{}),r.jsxs(n,{children:[r.jsx(e,{variant:"h6",gutterBottom:!0,children:"ðŸ‘¤ Asignaciones"}),i.asignaciones&&i.asignaciones.length>0?r.jsx(m,{spacing:2,children:i.asignaciones.map(o=>{var a;return r.jsxs(S,{variant:"outlined",sx:{p:2,borderRadius:2,backgroundColor:t.palette.grey[50]},children:[r.jsxs(e,{children:[r.jsx("strong",{children:"Usuario:"})," ",((a=o.user)==null?void 0:a.name)??"Sin asignar"]}),r.jsxs(e,{children:[r.jsx("strong",{children:"Estado:"})," ",o.estado]}),r.jsxs(e,{children:[r.jsx("strong",{children:"Detalle:"})," ",o.detalle||"Sin detalle"]})]},o.id)})}):r.jsx(e,{color:"text.secondary",children:"No hay asignaciones para esta tarea."})]})]})}),r.jsx(X,{sx:{p:2},children:r.jsx(F,{variant:"contained",color:"primary",onClick:u,children:"Cerrar"})})]})]})};export{Vr as default};
