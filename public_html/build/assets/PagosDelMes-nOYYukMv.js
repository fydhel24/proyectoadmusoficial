import{j as e,r as m,$ as H}from"./app-hmuC0z_W.js";import{A as G}from"./app-layout-tfxOdOKB.js";import{B as s}from"./Box-4C9-OmNb.js";import{C as k}from"./Container-mX-SkPwN.js";import{F as w}from"./Fade-CwyH9ByJ.js";import{T as o,P as C}from"./Typography-D9aOS4L9.js";import{G as n}from"./Grid-B8p_XyNn.js";import{Z as u}from"./Zoom-dCXXe_5O.js";import{C as y}from"./Card-DF9nCZsV.js";import{L as Y}from"./LinearProgress-B4Ob9dOD.js";import{T as L}from"./TextField-C5FPbCxz.js";import{I as N}from"./InputAdornment-DSMijJF8.js";import{S as O}from"./Search-BGzkUUj0.js";import{M as I}from"./MenuItem-BrmMwhAd.js";import{C as R}from"./Chip-Dcvl53u6.js";import{B as Z}from"./Button-CI4PvYH9.js";import{c as E}from"./createSvgIcon-DmtCSiy2.js";import{T as q}from"./TableContainer-DfD3xtBG.js";import{F as U}from"./FilterList-OFwQkETs.js";import{T as J,a as K,b as T,c as Q}from"./TableRow-CqlzVxMY.js";import{T as c}from"./TableCell-CmdScgSd.js";import{T as W}from"./TableSortLabel-BV3AVpl5.js";import{A as X}from"./Avatar-B5gU_Hib.js";import{C as ee}from"./CalendarToday-BQPCHoPf.js";import{C as te}from"./CheckCircle-DIV5afmv.js";import{C as re}from"./Cancel-DLTggAVp.js";import{T as M}from"./Tooltip-C2YJTe4A.js";import{I as P}from"./IconButton-5suIbhPZ.js";import{V as oe}from"./Visibility-V6NGGVoP.js";import{A as ae}from"./AttachMoney-BH1epguL.js";import{S as se}from"./Schedule-t62lRHkh.js";import{a as i}from"./DefaultPropsProvider-B9G9mrQg.js";import"./button-BdWLbofJ.js";import"./clsx-B-dksMZM.js";import"./avatar-SH5xSAMo.js";import"./createLucideIcon-B2A0n4jm.js";import"./index-BeDZ4tg0.js";import"./index-B2CGEqEW.js";import"./index-CDmN9uZR.js";import"./settings-B81NYrWU.js";import"./app-logo-icon-DF-2vurZ.js";import"./useThemeProps-D5Z9mzbb.js";import"./getThemeProps-Ci1Myslq.js";import"./TransitionGroupContext-zx_Mae6Z.js";import"./createSimplePaletteValueFilter-BLiQVDB3.js";import"./isMuiElement-DUef8CkO.js";import"./index-CPN-dXc6.js";import"./useSlot-b8oj5fjv.js";import"./useId-CIKGyZXY.js";import"./Select-BXe5PBU8.js";import"./useSlotProps-B7GeVvJr.js";import"./List-e32Tbcmu.js";import"./ownerDocument-DW-IO8s5.js";import"./Modal-B3L5jhwL.js";import"./useTimeout-CyHmLoFO.js";import"./Portal-3qAPjvvz.js";import"./debounce-Be36O1Ab.js";import"./Grow-CwDNX7JD.js";import"./useControlled-D8uUDMf0.js";import"./ButtonBase-CKxFeLN_.js";import"./listItemTextClasses-BuwBTG13.js";import"./dividerClasses-DyS1-ewh.js";import"./CircularProgress-DbGwbuXF.js";import"./Popper-Bof0hLwX.js";const ie=E(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"})),ne=E(e.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}));function ut({empresas:z,mesActual:g}){const[j,D]=m.useState(""),[v,_]=m.useState("all"),[d,F]=m.useState("name"),[p,A]=m.useState("asc"),b=m.useMemo(()=>z.map(t=>{const r=t.link_comprobantes.some(a=>a.comprobante_id!==null&&a.mes.toLowerCase()===g.toLowerCase());return{...t,pagado:r}}),[z,g]),f=m.useMemo(()=>{let t=b;return j&&(t=t.filter(r=>r.name.toLowerCase().includes(j.toLowerCase()))),v!=="all"&&(t=t.filter(r=>v==="pagado"?r.pagado:!r.pagado)),t.sort((r,a)=>{let l,h;switch(d){case"name":l=r.name.toLowerCase(),h=a.name.toLowerCase();break;case"start_date":l=new Date(r.start_date),h=new Date(a.start_date);break;case"status":l=r.pagado?1:0,h=a.pagado?1:0;break;default:return 0}return l<h?p==="asc"?-1:1:l>h?p==="asc"?1:-1:0}),t},[b,j,v,d,p]),x=m.useMemo(()=>{const t=b.length,r=b.filter(h=>h.pagado).length,a=t-r,l=t>0?r/t*100:0;return{total:t,pagadas:r,noPagadas:a,porcentajePagado:l}},[b]),S=t=>{d===t?A(p==="asc"?"desc":"asc"):(F(t),A("asc"))},V=t=>{const r=["#1976d2","#388e3c","#f57c00","#7b1fa2","#c2185b","#00796b","#5d4037","#455a64","#e64a19","#1565c0"],a=t.charCodeAt(0)%r.length;return r[a]},$=t=>t.split(" ").map(r=>r[0]).join("").toUpperCase().slice(0,2),B=(t,r)=>{const a=new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"short"}),l=new Date(r).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"});return`${a} - ${l}`};return e.jsxs(G,{children:[e.jsx(H,{title:`Pagos del mes: ${g}`}),e.jsx(s,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #2196f3 25%, #00bcd4 50%, #4caf50 75%, #8bc34a 100%)",color:"white",py:4,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 0%, transparent 50%)",pointerEvents:"none"},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%)",pointerEvents:"none"}},children:e.jsx(k,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:e.jsx(w,{in:!0,timeout:800,children:e.jsxs(s,{children:[e.jsxs(o,{variant:"h3",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:2,textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:["ðŸ’° Pagos de Empresas - ",g]}),e.jsx(o,{variant:"h6",sx:{opacity:.95,textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"ðŸ¢ GestiÃ³n y seguimiento de pagos empresariales"})]})})})}),e.jsxs(k,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(n,{container:!0,spacing:2,sx:{mb:4},children:[e.jsx(n,{item:!0,xs:6,sm:3,children:e.jsx(u,{in:!0,timeout:300,children:e.jsxs(y,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #2196f3 100%)",color:"white",borderRadius:3,p:2,textAlign:"center",boxShadow:"0 4px 15px rgba(25, 118, 210, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(25, 118, 210, 0.4)"}},children:[e.jsx(o,{variant:"h4",fontWeight:"bold",children:x.total}),e.jsx(o,{variant:"body2",sx:{opacity:.9},children:"Total"})]})})}),e.jsx(n,{item:!0,xs:6,sm:3,children:e.jsx(u,{in:!0,timeout:400,children:e.jsxs(y,{sx:{background:"linear-gradient(135deg, #4caf50 0%, #8bc34a 100%)",color:"white",borderRadius:3,p:2,textAlign:"center",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(76, 175, 80, 0.4)"}},children:[e.jsx(o,{variant:"h4",fontWeight:"bold",children:x.pagadas}),e.jsx(o,{variant:"body2",sx:{opacity:.9},children:"Pagadas"})]})})}),e.jsx(n,{item:!0,xs:6,sm:3,children:e.jsx(u,{in:!0,timeout:500,children:e.jsxs(y,{sx:{background:"linear-gradient(135deg, #f44336 0%, #e57373 100%)",color:"white",borderRadius:3,p:2,textAlign:"center",boxShadow:"0 4px 15px rgba(244, 67, 54, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(244, 67, 54, 0.4)"}},children:[e.jsx(o,{variant:"h4",fontWeight:"bold",children:x.noPagadas}),e.jsx(o,{variant:"body2",sx:{opacity:.9},children:"Pendientes"})]})})}),e.jsx(n,{item:!0,xs:6,sm:3,children:e.jsx(u,{in:!0,timeout:600,children:e.jsxs(y,{sx:{background:"linear-gradient(135deg, #ff9800 0%, #ffb74d 100%)",color:"white",borderRadius:3,p:2,textAlign:"center",boxShadow:"0 4px 15px rgba(255, 152, 0, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(255, 152, 0, 0.4)"}},children:[e.jsxs(o,{variant:"h4",fontWeight:"bold",children:[Math.round(x.porcentajePagado),"%"]}),e.jsx(o,{variant:"body2",sx:{opacity:.9,mb:1},children:"Completado"}),e.jsx(Y,{variant:"determinate",value:x.porcentajePagado,sx:{height:4,borderRadius:2,bgcolor:"rgba(255,255,255,0.2)","& .MuiLinearProgress-bar":{bgcolor:"white",borderRadius:2}}})]})})})]}),e.jsx(C,{elevation:0,sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 50%, #e3f2fd 100%)",border:"2px solid rgba(25, 118, 210, 0.1)",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.15)"},children:e.jsxs(n,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(n,{item:!0,xs:12,md:5,children:e.jsx(L,{fullWidth:!0,placeholder:"ðŸ” Buscar empresa...",value:j,onChange:t=>D(t.target.value),InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(O,{sx:{color:"#1976d2"}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3,"&:hover":{boxShadow:"0 4px 12px rgba(25, 118, 210, 0.2)"},"&.Mui-focused":{boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)"}}}})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsxs(L,{select:!0,fullWidth:!0,label:"ðŸ“Š Estado",value:v,onChange:t=>_(t.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:3,"&:hover":{boxShadow:"0 4px 12px rgba(25, 118, 210, 0.2)"}}},children:[e.jsx(I,{value:"all",children:"Todos"}),e.jsx(I,{value:"pagado",children:"âœ… Pagadas"}),e.jsx(I,{value:"no_pagado",children:"âŒ Pendientes"})]})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsxs(s,{sx:{textAlign:"center"},children:[e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Mostrando"}),e.jsx(R,{label:`${f.length} de ${x.total}`,color:"primary",sx:{fontWeight:"bold"}})]})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(Z,{variant:"outlined",startIcon:e.jsx(ne,{}),fullWidth:!0,sx:{borderRadius:3,borderColor:"#1976d2",color:"#1976d2","&:hover":{borderColor:"#1565c0",bgcolor:i("#1976d2",.1)}},children:"Exportar"})})]})}),e.jsx(w,{in:!0,timeout:800,children:e.jsxs(q,{component:C,sx:{borderRadius:4,overflow:"hidden",boxShadow:"0 12px 40px rgba(0,0,0,0.15)",border:"1px solid rgba(25, 118, 210, 0.2)"},children:[e.jsxs(s,{sx:{background:"linear-gradient(90deg, #1976d2 0%, #2196f3 25%, #00bcd4 50%, #4caf50 75%, #8bc34a 100%)",color:"white",p:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(o,{variant:"h5",fontWeight:"bold",sx:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"ðŸ“‹ Lista de Empresas"}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(U,{}),e.jsxs(o,{variant:"body1",children:[f.length," resultados"]})]})]}),e.jsxs(J,{sx:{minWidth:650},children:[e.jsx(K,{sx:{bgcolor:i("#1976d2",.05)},children:e.jsxs(T,{children:[e.jsx(c,{sx:{py:2,px:3},children:e.jsx(W,{active:d==="name",direction:d==="name"?p:"asc",onClick:()=>S("name"),sx:{fontWeight:"bold",fontSize:"1rem",color:"#1976d2","& .MuiTableSortLabel-icon":{color:"#1976d2 !important"}},children:"ðŸ¢ Empresa"})}),e.jsx(c,{sx:{py:2,px:3},children:e.jsx(W,{active:d==="start_date",direction:d==="start_date"?p:"asc",onClick:()=>S("start_date"),sx:{fontWeight:"bold",fontSize:"1rem",color:"#1976d2","& .MuiTableSortLabel-icon":{color:"#1976d2 !important"}},children:"ðŸ“… Vigencia"})}),e.jsx(c,{sx:{py:2,px:3},children:e.jsx(W,{active:d==="status",direction:d==="status"?p:"asc",onClick:()=>S("status"),sx:{fontWeight:"bold",fontSize:"1rem",color:"#1976d2","& .MuiTableSortLabel-icon":{color:"#1976d2 !important"}},children:"ðŸ“Š Estado"})}),e.jsx(c,{sx:{py:2,px:3,textAlign:"center"},children:e.jsx(o,{variant:"body1",fontWeight:"bold",color:"#1976d2",children:"ðŸ”§ Acciones"})})]})}),e.jsx(Q,{children:f.length===0?e.jsx(T,{children:e.jsx(c,{colSpan:4,sx:{py:8,textAlign:"center"},children:e.jsxs(s,{children:[e.jsx(o,{variant:"h5",color:"text.secondary",sx:{mb:2,fontWeight:"bold"},children:"ðŸ” No se encontraron empresas"}),e.jsx(o,{variant:"body1",color:"text.secondary",children:"Intenta ajustar los filtros de bÃºsqueda"})]})})}):f.map((t,r)=>e.jsx(u,{in:!0,timeout:200+r*50,children:e.jsxs(T,{sx:{"&:nth-of-type(odd)":{bgcolor:i("#1976d2",.02)},"&:hover":{bgcolor:i("#1976d2",.08),transform:"scale(1.01)",boxShadow:"0 4px 20px rgba(25, 118, 210, 0.2)"},transition:"all 0.3s ease",borderLeft:`4px solid ${t.pagado?"#4caf50":"#f44336"}`},children:[e.jsx(c,{sx:{py:3,px:3},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(X,{sx:{bgcolor:V(t.name),width:48,height:48,fontSize:"1rem",fontWeight:"bold",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:$(t.name)}),e.jsxs(s,{children:[e.jsx(o,{variant:"h6",fontWeight:"bold",sx:{mb:.5},children:t.name}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:["ID: ",t.id]})]})]})}),e.jsx(c,{sx:{py:3,px:3},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,p:2,bgcolor:i("#1976d2",.05),borderRadius:2,border:`1px solid ${i("#1976d2",.2)}`},children:[e.jsx(ee,{sx:{fontSize:20,color:"#1976d2"}}),e.jsxs(s,{children:[e.jsx(o,{variant:"body1",fontWeight:"bold",children:B(t.start_date,t.end_date)}),e.jsx(o,{variant:"caption",color:"text.secondary",children:"PerÃ­odo activo"})]})]})}),e.jsx(c,{sx:{py:3,px:3},children:e.jsx(R,{icon:t.pagado?e.jsx(te,{}):e.jsx(re,{}),label:t.pagado?"âœ… PAGADO":"âŒ PENDIENTE",sx:{bgcolor:t.pagado?"#e8f5e8":"#ffebee",color:t.pagado?"#2e7d32":"#c62828",fontWeight:"bold",fontSize:"0.9rem",px:2,py:1,height:"auto","& .MuiChip-icon":{color:t.pagado?"#2e7d32":"#c62828"},boxShadow:t.pagado?"0 2px 8px rgba(46, 125, 50, 0.3)":"0 2px 8px rgba(198, 40, 40, 0.3)"}})}),e.jsx(c,{sx:{py:3,px:3,textAlign:"center"},children:e.jsxs(s,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(M,{title:"Ver detalles",children:e.jsx(P,{size:"small",sx:{bgcolor:i("#1976d2",.1),color:"#1976d2","&:hover":{bgcolor:i("#1976d2",.2),transform:"scale(1.1)"},transition:"all 0.3s ease"},children:e.jsx(oe,{fontSize:"small"})})}),e.jsx(M,{title:"Historial",children:e.jsx(P,{size:"small",sx:{bgcolor:i("#4caf50",.1),color:"#4caf50","&:hover":{bgcolor:i("#4caf50",.2),transform:"scale(1.1)"},transition:"all 0.3s ease"},children:e.jsx(ie,{fontSize:"small"})})}),e.jsx(M,{title:"Pagos",children:e.jsx(P,{size:"small",sx:{bgcolor:i("#ff9800",.1),color:"#ff9800","&:hover":{bgcolor:i("#ff9800",.2),transform:"scale(1.1)"},transition:"all 0.3s ease"},children:e.jsx(ae,{fontSize:"small"})})})]})})]})},t.id))})]})]})}),f.length>0&&e.jsx(w,{in:!0,timeout:1e3,children:e.jsx(C,{sx:{mt:4,p:3,borderRadius:3,background:"linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)",border:"1px solid rgba(25, 118, 210, 0.3)"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2},children:[e.jsx(se,{sx:{color:"#1976d2",fontSize:28}}),e.jsxs(o,{variant:"h6",fontWeight:"bold",color:"#1976d2",children:["ðŸ“Š Resumen: ",x.pagadas," de ",x.total," empresas han completado el pago del mes ",g]})]})})})]})]})}export{ut as default};
