import{r as p,a as f,j as e,$ as F}from"./app-C9FYWxt2.js";import{A as R,b as S,B as M}from"./app-layout-DmzbA60l.js";import{d as B}from"./debounce-Be36O1Ab.js";import{B as x}from"./Box-Bq5diqRU.js";import{C as g}from"./Container-Bi_zIdzV.js";import{T as i,P as y}from"./Typography-ChZrof4A.js";import{T as P}from"./TableContainer-C8RRRQB8.js";import{T as W,a as A,b as h,c as I}from"./TableRow-CkZJRGNB.js";import{T as o}from"./TableCell-DRNoLjy7.js";import{I as L}from"./IconButton-WOx5yTT3.js";import{C as d}from"./Chip-C3khZ1EE.js";import{F as $}from"./FolderOutlined-DVYwhz5-.js";import{C as k}from"./CalendarToday-BTrSB7jF.js";import{C as D}from"./Collapse-BGjp-oum.js";import{R as G,a as u}from"./RadioGroup-DBYPYliJ.js";import{F as j}from"./FormControlLabel-CXv8M7mb.js";import{T as O}from"./TextField-BXw8MSJw.js";import{a as c}from"./DefaultPropsProvider-ZncIBFYl.js";import{f as H}from"./format-C6wJrPT2.js";import"./button-Tq1l60An.js";import"./clsx-B-dksMZM.js";import"./avatar-FJwtKWDO.js";import"./createLucideIcon-CxvTyEZH.js";import"./index-BRQOeZDx.js";import"./index-CbpD1ODr.js";import"./index-CTU4SEXm.js";import"./settings-6wmvEXTi.js";import"./app-logo-icon-DeROgz-_.js";import"./createSvgIcon-BeWwfM08.js";import"./useThemeProps-VB07dJvB.js";import"./getThemeProps-QoLWqXG_.js";import"./useId-BWw3VObj.js";import"./ButtonBase-DpSlwJZ0.js";import"./useTimeout-BU9dWeAN.js";import"./CircularProgress-Dq1DDrXf.js";import"./useSlot-DE_1Wxdu.js";import"./Fade-Dxqqf-S-.js";import"./SwitchBase-VpAtKddf.js";import"./Select-BfGrSzPw.js";import"./isMuiElement-DPAZRHqk.js";import"./index-BDY8rXHp.js";import"./useSlotProps-DhP8vEMs.js";import"./List-eZh72x_E.js";import"./Modal-rnOcQKoj.js";import"./Portal-DkTiE7_4.js";import"./Grow-rrETuSGo.js";import"./useControlled-DFhhtwhL.js";import"./FormGroup-Cu0FbUCy.js";const N=[{title:"Mis Tareas",href:"/pasante/mistareas"}],v=l=>{if(!l)return"#9E9E9E";switch(l.toLowerCase()){case"alta":return"#FF1744";case"media":return"#FF9100";case"baja":return"#00E676";default:return"#9E9E9E"}},_=l=>{if(!l)return"default";switch(l.toLowerCase()){case"completada":return"success";case"en progreso":return"primary";case"pendiente":return"warning";default:return"default"}};function De({tareas:l}){const[n,b]=p.useState(l),[m,C]=p.useState(null),w=p.useCallback(B(async(r,a)=>{var t;try{await f.patch(`/tareas/actualizar-estado/${r}`,{detalle:a,estado:((t=n.find(s=>s.id===r))==null?void 0:t.estado)||"pendiente"})}catch(s){console.error("Error al guardar el detalle:",s)}},1e3),[n]),T=async(r,a)=>{var t;try{await f.patch(`/tareas/actualizar-estado/${r}`,{estado:a,detalle:((t=n.find(s=>s.id===r))==null?void 0:t.detalle)||""}),b(n.map(s=>s.id===r?{...s,estado:a}:s))}catch(s){console.error("Error al actualizar el estado:",s)}},E=(r,a)=>{b(n.map(t=>t.id===r?{...t,detalle:a}:t)),w(r,a)},z=r=>{C(m===r?null:r)};return e.jsxs(R,{breadcrumbs:N,children:[e.jsx(F,{title:"Mis Tareas"}),e.jsx(x,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #0d47a1 100%)",color:"white",py:3,position:"relative",overflow:"hidden"},children:e.jsxs(g,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:[e.jsx(i,{variant:"h4",fontWeight:"bold",children:"ğŸ“‹ Mis Tareas Asignadas"}),e.jsx(i,{variant:"subtitle1",sx:{opacity:.9},children:"Gestiona y actualiza el estado de tus tareas"})]})}),e.jsxs(g,{maxWidth:"xl",sx:{py:4},children:[e.jsx(P,{component:y,sx:{borderRadius:2,boxShadow:2},children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(h,{sx:{bgcolor:c("#1976d2",.05)},children:[e.jsx(o,{sx:{width:"40px"}}),e.jsx(o,{children:"TÃ­tulo"}),e.jsx(o,{children:"Tipo"}),e.jsx(o,{children:"Empresa"}),e.jsx(o,{children:"Fecha"}),e.jsx(o,{children:"Prioridad"}),e.jsx(o,{children:"Estado"})]})}),e.jsx(I,{children:n.map(r=>e.jsxs(e.Fragment,{children:[e.jsxs(h,{sx:{"&:hover":{bgcolor:c("#1976d2",.02)},borderLeft:`4px solid ${v(r.tarea.prioridad)}`},children:[e.jsx(o,{children:e.jsx(L,{size:"small",onClick:()=>z(r.id),sx:{transform:m===r.id?"rotate(180deg)":"none",transition:"transform 0.2s"},children:e.jsx(S,{})})}),e.jsx(o,{children:e.jsx(i,{variant:"subtitle2",fontWeight:"medium",children:r.tarea.titulo})}),e.jsx(o,{children:r.tarea.tipo&&e.jsx(d,{icon:e.jsx($,{sx:{fontSize:16}}),label:r.tarea.tipo.nombre_tipo,size:"small",sx:{bgcolor:c("#1976d2",.1),color:"primary.main"}})}),e.jsx(o,{children:r.tarea.company&&e.jsx(d,{icon:e.jsx(M,{fontSize:"small"}),label:r.tarea.company.name,size:"small",variant:"outlined"})}),e.jsx(o,{children:e.jsx(d,{icon:e.jsx(k,{fontSize:"small"}),label:H(new Date(r.fecha),"dd/MM/yyyy"),size:"small",variant:"outlined"})}),e.jsx(o,{children:e.jsx(d,{label:r.tarea.prioridad,size:"small",sx:{bgcolor:v(r.tarea.prioridad),color:"white"}})}),e.jsx(o,{children:e.jsx(d,{label:r.estado||"Sin estado",color:_(r.estado),size:"small"})})]},r.id),e.jsx(h,{children:e.jsx(o,{colSpan:7,sx:{py:0},children:e.jsx(D,{in:m===r.id,children:e.jsxs(x,{sx:{p:3},children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"DescripciÃ³n:"}),e.jsx(i,{variant:"body2",sx:{mb:3},children:r.tarea.descripcion}),e.jsxs(x,{sx:{p:2,bgcolor:c("#1976d2",.05),borderRadius:2},children:[e.jsx(i,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold",color:"primary.main"},children:"Estado de la tarea"}),e.jsxs(G,{row:!0,value:r.estado||"pendiente",onChange:a=>T(r.id,a.target.value),sx:{mb:2},children:[e.jsx(j,{value:"completada",control:e.jsx(u,{color:"success"}),label:"Completada"}),e.jsx(j,{value:"en progreso",control:e.jsx(u,{color:"primary"}),label:"En Progreso"}),e.jsx(j,{value:"pendiente",control:e.jsx(u,{color:"warning"}),label:"Pendiente"})]}),e.jsx(O,{fullWidth:!0,multiline:!0,rows:2,variant:"outlined",placeholder:"Agregar detalles o comentarios sobre la tarea...",value:r.detalle||"",onChange:a=>E(r.id,a.target.value),sx:{"& .MuiOutlinedInput-root":{bgcolor:"white"}}})]})]})})})})]}))})]})}),n.length===0&&e.jsxs(y,{sx:{p:6,textAlign:"center",borderRadius:3,background:"linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%)"},children:[e.jsx(i,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"ğŸ“ No tienes tareas asignadas"}),e.jsx(i,{color:"text.secondary",children:"Por el momento no hay tareas asignadas para ti"})]})]})]})}export{De as default};
