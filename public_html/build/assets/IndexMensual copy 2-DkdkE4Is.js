import{q as f,r as c,j as r}from"./app-CUaISujP.js";import{A as u}from"./app-layout-CWuB6NnO.js";import{F as g,l as j,i as C,a as v}from"./index-D0xhZEoA.js";import{T as t}from"./Typography-BXYVZiZC.js";import{D as y,a as b,b as E}from"./DialogTitle-BDIXDovD.js";import{C as k}from"./Chip-3MHDmL7Q.js";import{D as M}from"./DialogActions-V7uP84uM.js";import{B as P}from"./Button-BnJ1HrMo.js";import"./button-0Hij8kFa.js";import"./clsx-B-dksMZM.js";import"./avatar-vMY4vQMB.js";import"./createLucideIcon-XVNSMSUw.js";import"./index-DZ5Pi2z6.js";import"./index-b-iRS2c_.js";import"./index-JQPl0ewz.js";import"./settings-CLpIyV6T.js";import"./app-logo-icon-DxXq1G7b.js";import"./createSvgIcon-CsdeE9h-.js";import"./DefaultPropsProvider-DnyQ5W7l.js";import"./useSlot-CYEIGEy5.js";import"./TransitionGroupContext-Ci2WFGYL.js";import"./Fade-ChnIJY1B.js";import"./useId-B2OWouFT.js";import"./Modal-ZVwyIF_S.js";import"./ownerDocument-DW-IO8s5.js";import"./useTimeout-BTm0asfU.js";import"./Portal-8nlpaEwd.js";import"./ButtonBase-DE1CgUJq.js";import"./CircularProgress-nCrY-oKD.js";const ir=()=>{const{semanas:p}=f().props,[s,a]=c.useState(null),[d]=c.useState({}),m=o=>{if(d[o])return d[o];const i="#"+Math.floor(Math.random()*16777215).toString(16);return d[o]=i,i},l=[];p.forEach(o=>o.forEach(i=>{Object.values(i.empresas).forEach(e=>{const n=m(e.empresa.id);l.push({id:`${i.fecha}-${e.empresa.id}`,title:e.empresa.name??"Empresa",date:i.fecha,extendedProps:{empresa:e.empresa,tareas:e.tareas},backgroundColor:n,textColor:"#fff",borderColor:"#fff"})})}));const h=o=>{a(o.event.extendedProps)},x=o=>{switch(o){case"alta":return"#f44336";case"media":return"#ff9800";case"baja":return"#4caf50";default:return"#9e9e9e"}};return r.jsxs(u,{children:[r.jsx(t,{variant:"h4",align:"center",gutterBottom:!0,children:"ðŸ“… Calendario Mensual"}),r.jsx(g,{plugins:[C,v],initialView:"dayGridMonth",locale:j,events:l,eventClick:h,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay"},height:"auto"}),r.jsxs(y,{open:!!s,onClose:()=>a(null),maxWidth:"md",fullWidth:!0,children:[r.jsxs(b,{children:["ðŸ¢ ",s==null?void 0:s.empresa.name]}),r.jsx(E,{dividers:!0,children:s==null?void 0:s.tareas.map(o=>{var i;return r.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",border:"1px solid #ddd",borderRadius:"8px"},children:[r.jsxs(t,{variant:"h6",children:["ðŸ“ ",o.titulo]}),r.jsxs(t,{children:[r.jsx("strong",{children:"Prioridad:"})," ",r.jsx(k,{label:o.prioridad.toUpperCase(),size:"small",sx:{fontWeight:"bold",color:"#fff",backgroundColor:x(o.prioridad)}})]}),r.jsxs(t,{children:[r.jsx("strong",{children:"Tipo:"})," ",((i=o.tipo)==null?void 0:i.nombre_tipo)??"No especificado"]}),r.jsxs(t,{children:[r.jsx("strong",{children:"DescripciÃ³n:"})," ",o.descripcion||"Sin descripciÃ³n"]}),r.jsx(t,{mt:1,variant:"subtitle2",children:"ðŸ‘¤ Asignaciones:"}),o.asignaciones&&o.asignaciones.length>0?o.asignaciones.map(e=>{var n;return r.jsxs("div",{style:{marginLeft:"1rem"},children:[r.jsxs(t,{variant:"body1",children:["Usuario: ",((n=e.user)==null?void 0:n.name)??"Sin asignar"]}),r.jsxs(t,{variant:"body2",color:"textSecondary",children:["Estado: ",e.estado]})]},e.id)}):r.jsx(t,{children:"No hay asignaciones para esta tarea."})]},o.id)})}),r.jsx(M,{children:r.jsx(P,{onClick:()=>a(null),variant:"contained",color:"primary",children:"Cerrar"})})]})]})};export{ir as default};
