import{j as r,q as B,r as j}from"./app-CUaISujP.js";import{A as E,C as I,B as W,d as P,P as u}from"./app-layout-CWuB6NnO.js";import{F as z,l as A,i as R,a as M}from"./index-D0xhZEoA.js";import{C as D}from"./Container-D7VV_BeN.js";import{s as c}from"./DefaultPropsProvider-DnyQ5W7l.js";import{C as T}from"./CardContent-Cfc9Wxl5.js";import{B as o}from"./Box-F7bZ1tjM.js";import{A as l}from"./Avatar-B3oc0cGH.js";import{T as a,P as h}from"./Typography-BXYVZiZC.js";import{D as G,a as F,b as $}from"./DialogTitle-BDIXDovD.js";import{S as m}from"./Stack-DTJ6fEPw.js";import{A as y}from"./Assignment-DPFhWYma.js";import{C as g}from"./Chip-3MHDmL7Q.js";import{D as H}from"./Divider-DFO96sJa.js";import{B as L}from"./Badge-CtmYTf4X.js";import{D as N}from"./DialogActions-V7uP84uM.js";import{C as V}from"./Close-Dux9YOWC.js";import{C}from"./Card-WOrh8z9Z.js";import{c as Y}from"./createSvgIcon-CsdeE9h-.js";import{C as q}from"./CheckCircle--hUGYKNs.js";import{S as O}from"./Schedule-BNNqycmq.js";import{P as U}from"./PriorityHigh-L4m9Fiw_.js";import{B as _}from"./Button-BnJ1HrMo.js";import"./button-0Hij8kFa.js";import"./clsx-B-dksMZM.js";import"./avatar-vMY4vQMB.js";import"./createLucideIcon-XVNSMSUw.js";import"./index-DZ5Pi2z6.js";import"./index-b-iRS2c_.js";import"./index-JQPl0ewz.js";import"./settings-CLpIyV6T.js";import"./app-logo-icon-DxXq1G7b.js";import"./useThemeProps-DJqCDgEx.js";import"./getThemeProps-DVd4S7h3.js";import"./useSlot-CYEIGEy5.js";import"./TransitionGroupContext-Ci2WFGYL.js";import"./Fade-ChnIJY1B.js";import"./useId-B2OWouFT.js";import"./Modal-ZVwyIF_S.js";import"./ownerDocument-DW-IO8s5.js";import"./useTimeout-BTm0asfU.js";import"./Portal-8nlpaEwd.js";import"./ButtonBase-DE1CgUJq.js";import"./dividerClasses-Bv3o9dJ8.js";import"./usePreviousProps-CqJPJccm.js";import"./CircularProgress-nCrY-oKD.js";const J=Y(r.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"})),K=c(C)(({theme:n})=>({background:"linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)",color:"white",marginBottom:n.spacing(4)})),Q=c(C)(({theme:n})=>({borderRadius:24,boxShadow:"0 20px 40px rgba(0,0,0,0.1)",overflow:"hidden","& .fc":{fontFamily:n.typography.fontFamily},"& .fc-toolbar":{padding:n.spacing(2),background:"linear-gradient(90deg, #f8fafc 0%, #f1f5f9 100%)",borderBottom:"1px solid #e2e8f0"},"& .fc-toolbar-title":{fontSize:"1.5rem !important",fontWeight:"700 !important",color:"#1e293b"},"& .fc-button":{borderRadius:"8px !important",border:"none !important",padding:"8px 16px !important",fontWeight:"600 !important",textTransform:"none !important","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}},"& .fc-button-primary":{background:"linear-gradient(45deg, #3b82f6 30%, #6366f1 90%) !important"},"& .fc-daygrid-day":{"&:hover":{backgroundColor:"rgba(59, 130, 246, 0.05)"}},"& .fc-event":{border:"none !important",borderRadius:"6px !important",margin:"2px !important",padding:"2px 6px !important",fontSize:"0.8rem !important",fontWeight:"500 !important",cursor:"pointer",transition:"all 0.2s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"}}})),X=c(h)(({theme:n})=>({padding:n.spacing(3),marginBottom:n.spacing(2),borderRadius:16,border:"1px solid #e2e8f0",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 24px rgba(0,0,0,0.1)",borderColor:"#3b82f6"}})),Z=c(g)(({theme:n,priority:t})=>({fontWeight:"bold",color:"white","& .MuiChip-icon":{color:"white !important"},...t==="alta"&&{background:"linear-gradient(45deg, #ef4444 30%, #dc2626 90%)"},...t==="media"&&{background:"linear-gradient(45deg, #f59e0b 30%, #d97706 90%)"},...t==="baja"&&{background:"linear-gradient(45deg, #10b981 30%, #059669 90%)"}})),rr=c(_)(({theme:n})=>({borderRadius:12,padding:"12px 32px",background:"linear-gradient(45deg, #6366f1 30%, #8b5cf6 90%)",boxShadow:"0 3px 5px 2px rgba(99, 102, 241, .3)","&:hover":{background:"linear-gradient(45deg, #5b21b6 30%, #7c3aed 90%)",transform:"translateY(-2px)",boxShadow:"0 6px 10px 4px rgba(99, 102, 241, .3)"},transition:"all 0.3s ease"})),Ur=()=>{const{semanas:n}=B().props,[t,p]=j.useState(null),[x]=j.useState({}),v=e=>{if(x[e])return x[e];const s=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#f97316","#84cc16","#ec4899","#6366f1"],i=s[e%s.length];return x[e]=i,i},f=[];n.forEach(e=>e.forEach(s=>{Object.values(s.empresas).forEach(i=>{const d=v(i.empresa.id);f.push({id:`${s.fecha}-${i.empresa.id}`,title:`${i.empresa.name??"Empresa"} (${i.tareas.length})`,date:s.fecha,extendedProps:{empresa:i.empresa,tareas:i.tareas},backgroundColor:d,textColor:"#fff",borderColor:d})})}));const w=e=>{p(e.event.extendedProps)},k=e=>{switch(e){case"alta":return r.jsx(U,{});case"media":return r.jsx(O,{});case"baja":return r.jsx(q,{});default:return r.jsx(J,{})}},S=e=>{switch(e.toLowerCase()){case"completado":return"success";case"en progreso":return"primary";case"pendiente":return"warning";default:return"default"}};return r.jsx(E,{children:r.jsxs(D,{maxWidth:"xl",sx:{py:4},children:[r.jsx(K,{elevation:8,children:r.jsx(T,{sx:{p:4},children:r.jsxs(o,{display:"flex",alignItems:"center",gap:3,children:[r.jsx(l,{sx:{bgcolor:"rgba(255,255,255,0.2)",width:64,height:64},children:r.jsx(I,{sx:{fontSize:"2rem"}})}),r.jsxs(o,{children:[r.jsx(a,{variant:"h3",fontWeight:"bold",gutterBottom:!0,children:"Calendario Mensual"}),r.jsx(a,{variant:"h6",sx:{opacity:.9},children:"Visualiza y gestiona las tareas de todas las empresas"})]})]})})}),r.jsx(Q,{elevation:12,children:r.jsx(z,{plugins:[R,M],initialView:"dayGridMonth",locale:A,events:f,eventClick:w,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay"},height:"auto",eventDisplay:"block",dayMaxEvents:3,moreLinkClick:"popover"})}),r.jsxs(G,{open:!!t,onClose:()=>p(null),maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:4,maxHeight:"90vh"}},children:[r.jsx(F,{sx:{background:"linear-gradient(90deg, #6366f1 0%, #8b5cf6 100%)",color:"white",p:3},children:r.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(l,{sx:{bgcolor:"rgba(255,255,255,0.2)"},children:r.jsx(W,{})}),r.jsxs(o,{children:[r.jsx(a,{variant:"h5",fontWeight:"bold",children:(t==null?void 0:t.empresa.name)||"Empresa"}),r.jsxs(a,{variant:"body2",sx:{opacity:.9},children:[(t==null?void 0:t.tareas.length)||0," tareas programadas"]})]})]})}),r.jsx($,{dividers:!0,sx:{p:3},children:t!=null&&t.tareas.length?r.jsx(m,{spacing:3,children:t.tareas.map(e=>{var s,i;return r.jsxs(X,{elevation:2,children:[r.jsxs(o,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2,children:[r.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(l,{sx:{bgcolor:"#6366f1"},children:r.jsx(y,{})}),r.jsxs(o,{children:[r.jsx(a,{variant:"h6",fontWeight:"bold",color:"primary",children:e.titulo}),r.jsxs(a,{variant:"body2",color:"text.secondary",children:["ID: ",e.id]})]})]}),r.jsx(Z,{priority:e.prioridad,label:e.prioridad.toUpperCase(),icon:k(e.prioridad),size:"small"})]}),r.jsxs(o,{mb:3,children:[r.jsx(m,{direction:"row",spacing:2,mb:2,children:r.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(P,{color:"action"}),r.jsx(a,{variant:"body2",color:"text.secondary",children:"Tipo:"}),r.jsx(g,{label:((s=e.tipo)==null?void 0:s.nombre_tipo)||"No especificado",size:"small",variant:"outlined",color:"primary"})]})}),r.jsxs(a,{variant:"body1",sx:{mb:2,lineHeight:1.6},children:[r.jsx("strong",{children:"Descripción:"})," ",e.descripcion||"Sin descripción disponible"]})]}),r.jsx(H,{sx:{my:2}}),r.jsxs(o,{children:[r.jsxs(o,{display:"flex",alignItems:"center",gap:1,mb:2,children:[r.jsx(u,{color:"action"}),r.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Asignaciones"}),r.jsx(L,{badgeContent:((i=e.asignaciones)==null?void 0:i.length)||0,color:"primary",sx:{ml:1},children:r.jsx(o,{})})]}),e.asignaciones&&e.asignaciones.length>0?r.jsx(m,{spacing:2,children:e.asignaciones.map(d=>{var b;return r.jsx(h,{sx:{p:2,bgcolor:"#f8fafc",borderRadius:2,border:"1px solid #e2e8f0"},children:r.jsxs(o,{display:"flex",alignItems:"center",justify:"space-between",children:[r.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(l,{sx:{width:32,height:32,bgcolor:"#6366f1"},children:r.jsx(u,{fontSize:"small"})}),r.jsxs(o,{children:[r.jsx(a,{variant:"body1",fontWeight:"medium",children:((b=d.user)==null?void 0:b.name)||"Sin asignar"}),r.jsx(a,{variant:"body2",color:"text.secondary",children:d.detalle||"Sin detalles"})]})]}),r.jsx(g,{label:d.estado,color:S(d.estado),size:"small",variant:"outlined"})]})},d.id)})}):r.jsx(h,{sx:{p:3,textAlign:"center",bgcolor:"#f8fafc",borderRadius:2,border:"1px dashed #cbd5e1"},children:r.jsx(a,{variant:"body1",color:"text.secondary",children:"No hay asignaciones para esta tarea"})})]})]},e.id)})}):r.jsxs(o,{textAlign:"center",py:6,children:[r.jsx(l,{sx:{width:64,height:64,bgcolor:"#f1f5f9",color:"#64748b",mx:"auto",mb:2},children:r.jsx(y,{sx:{fontSize:"2rem"}})}),r.jsx(a,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No hay tareas programadas"}),r.jsx(a,{variant:"body2",color:"text.secondary",children:"Esta empresa no tiene tareas asignadas para esta fecha"})]})}),r.jsx(N,{sx:{p:3,bgcolor:"#f8fafc"},children:r.jsx(rr,{onClick:()=>p(null),variant:"contained",startIcon:r.jsx(V,{}),children:"Cerrar"})})]})]})})};export{Ur as default};
