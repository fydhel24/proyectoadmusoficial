import{q as L,r as a,j as e,Y as N,m as l}from"./app-CyHY4qXq.js";import{A as B}from"./app-layout-CR2VM0FS.js";import{a as G,b as Y,F as $,c as q,d as z,e as H,f as U}from"./index-B7cHNRrB.js";import{D as y,a as w,b as C}from"./DialogTitle-CsQ7IZVm.js";import{T as V}from"./TextField-CaWg8z4c.js";import{D as S}from"./DialogActions-DzIW1MJD.js";import{B as m}from"./Button-B5QymhUM.js";import"./button-D9s6bao3.js";import"./clsx-B-dksMZM.js";import"./avatar-DM9x7_D4.js";import"./createLucideIcon-DzD-rnf8.js";import"./index-Rp65u7US.js";import"./index-B36Mxma7.js";import"./index-CQLPyUva.js";import"./settings-DdDrqPmp.js";import"./app-logo-icon-C6G1VvIS.js";import"./createSvgIcon-DFkYpeFR.js";import"./DefaultPropsProvider-CieIQJ4l.js";import"./Typography-DquxNzfk.js";import"./createSimplePaletteValueFilter-CHgcW5pF.js";import"./useSlot-BD1cC_p3.js";import"./TransitionGroupContext-BSxo9aJI.js";import"./Fade-CJOgqix0.js";import"./useId-AiqUT9-C.js";import"./Modal-Br5Yv6Vo.js";import"./ownerDocument-DW-IO8s5.js";import"./useTimeout-2kURTJpt.js";import"./Portal-3K29QfTN.js";import"./Select-6JcSj1Oi.js";import"./isMuiElement-tDv9Kr5f.js";import"./index-DeuVn2yV.js";import"./useSlotProps-mZ78eGn3.js";import"./List-FQZRBiMT.js";import"./debounce-Be36O1Ab.js";import"./Grow-BhDWOfCT.js";import"./useControlled-BWKDwO3o.js";import"./ButtonBase-B7jPhJrj.js";import"./CircularProgress-BcU9b_yV.js";const Re=()=>{const{informes:c,filters:I}=L().props,[k,F]=a.useState(I.search||""),[M,x]=a.useState(!1),[D,p]=a.useState(!1),[i,n]=a.useState(""),[u,h]=a.useState(null),[b,g]=a.useState([]),[E,f]=a.useState(""),T=t=>{confirm("¬øEliminar este informe?")&&l.delete(route("informes.destroy",t))},R=t=>{h(t),n(""),x(!0)},d=()=>{x(!1),h(null),n("")},O=()=>{!i||u===null||l.post(route("comentarios.store"),{contenido:i,informe_id:u},{onSuccess:()=>{d(),alert("Comentario agregado con √©xito!")}})},P=t=>{g(t.comentarios??[]),f(t.titulo),p(!0)},j=()=>{g([]),f(""),p(!1)},W=t=>{F(t.target.value),l.get(route("informes.index"),{search:t.target.value},{preserveState:!0,replace:!0})},_=c.data.reduce((t,r)=>{var o;const s=((o=r.company)==null?void 0:o.name)??"Sin empresa";return t[s]||(t[s]=[]),t[s].push(r),t},{}),A=t=>{switch(t==null?void 0:t.toLowerCase()){case"completado":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"en progreso":return"bg-amber-100 text-amber-800 border-amber-200";case"pendiente":return"bg-slate-100 text-slate-800 border-slate-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsx(B,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-12",children:[e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:"Gesti√≥n de Informes"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Administra y organiza todos tus informes empresariales"})]}),e.jsxs(N,{href:route("informes.create"),className:"group relative inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-3 font-semibold text-white shadow-lg transition-all duration-200 hover:scale-105 hover:shadow-xl hover:from-blue-700 hover:to-indigo-700",children:[e.jsx(G,{className:"w-4 h-4"}),"Crear Informe",e.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),e.jsxs("div",{className:"relative max-w-md",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Y,{className:"h-5 w-5 text-slate-400"})}),e.jsx("input",{type:"text",placeholder:"Buscar informes...",value:k,onChange:W,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl bg-white/70 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 shadow-sm hover:shadow-md"})]})]}),Object.entries(_).map(([t,r])=>e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-1 w-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t}),e.jsxs("span",{className:"px-3 py-1 text-sm font-medium bg-blue-100 text-blue-800 rounded-full border border-blue-200",children:[r.length," informe",r.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(s=>{var o,v;return e.jsx("div",{className:"group relative",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-slate-200/60 rounded-2xl p-6 hover:shadow-xl hover:shadow-slate-200/50 transition-all duration-300 hover:-translate-y-1 hover:bg-white/95",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl shadow-lg",children:e.jsx($,{className:"text-white text-xl"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 truncate group-hover:text-blue-600 transition-colors",children:s.titulo}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-md border ${A(s.estado)}`,children:s.estado??"Sin estado"})})]})]}),e.jsxs("p",{className:"text-slate-600 text-sm mb-4 line-clamp-2 leading-relaxed",children:[((o=s.descripcion)==null?void 0:o.substring(0,100))??"Sin descripci√≥n disponible",s.descripcion&&s.descripcion.length>100&&"..."]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Inicio:"}),e.jsx("span",{className:"text-slate-700 font-semibold",children:s.fecha_inicio})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Fin:"}),e.jsx("span",{className:"text-slate-700 font-semibold",children:s.fecha_fin??"No definida"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(N,{href:route("informes.edit",s.id),className:"flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-100 transition-colors border border-blue-200",children:[e.jsx(q,{className:"w-3 h-3"}),"Editar"]}),e.jsxs("button",{onClick:()=>T(s.id),className:"flex items-center justify-center gap-2 px-3 py-2 bg-red-50 text-red-700 text-xs font-medium rounded-lg hover:bg-red-100 transition-colors border border-red-200",children:[e.jsx(z,{className:"w-3 h-3"}),"Eliminar"]}),e.jsxs("button",{onClick:()=>R(s.id),className:"flex items-center justify-center gap-2 px-3 py-2 bg-emerald-50 text-emerald-700 text-xs font-medium rounded-lg hover:bg-emerald-100 transition-colors border border-emerald-200",children:[e.jsx(H,{className:"w-3 h-3"}),"Comentar"]}),e.jsxs("button",{onClick:()=>P(s),className:"flex items-center justify-center gap-2 px-3 py-2 bg-slate-50 text-slate-700 text-xs font-medium rounded-lg hover:bg-slate-100 transition-colors border border-slate-200",children:[e.jsx(U,{className:"w-3 h-3"}),"Ver (",((v=s.comentarios)==null?void 0:v.length)??0,")"]})]})]})},s.id)})})]},t)),e.jsx("div",{className:"mt-12 flex justify-center",children:e.jsx("div",{className:"flex items-center gap-1 bg-white/80 backdrop-blur-sm rounded-xl p-2 border border-slate-200/60 shadow-lg",children:c.links.map((t,r)=>e.jsx("button",{className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${t.active?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"text-slate-600 hover:bg-slate-100 hover:text-slate-800"}`,disabled:!t.url,onClick:()=>t.url&&l.get(t.url,{},{preserveState:!0,replace:!0}),dangerouslySetInnerHTML:{__html:t.label}},r))})}),e.jsxs(y,{open:M,onClose:d,PaperProps:{style:{borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"}},children:[e.jsx(w,{className:"text-xl font-bold text-slate-800 border-b border-slate-200",children:"üí¨ Agregar Comentario"}),e.jsx(C,{className:"mt-4",children:e.jsx(V,{label:"Escribe tu comentario",fullWidth:!0,multiline:!0,rows:4,value:i,onChange:t=>n(t.target.value),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px","&:hover fieldset":{borderColor:"#3b82f6"},"&.Mui-focused fieldset":{borderColor:"#3b82f6"}}}})}),e.jsxs(S,{className:"p-6 gap-2",children:[e.jsx(m,{onClick:d,variant:"outlined",sx:{borderRadius:"8px",textTransform:"none",fontWeight:600},children:"Cancelar"}),e.jsx(m,{onClick:O,variant:"contained",sx:{borderRadius:"8px",background:"linear-gradient(45deg, #3b82f6, #6366f1)",textTransform:"none",fontWeight:600,"&:hover":{background:"linear-gradient(45deg, #2563eb, #5855f5)"}},children:"Guardar"})]})]}),e.jsxs(y,{open:D,onClose:j,fullWidth:!0,maxWidth:"sm",PaperProps:{style:{borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"}},children:[e.jsxs(w,{className:"text-xl font-bold text-slate-800 border-b border-slate-200",children:['üí¨ Comentarios de "',E,'"']}),e.jsx(C,{dividers:!0,className:"max-h-96",children:b.length>0?e.jsx("div",{className:"space-y-4",children:b.map(t=>{var r;return e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[e.jsx("p",{className:"text-slate-800 leading-relaxed mb-3",children:t.contenido}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx("span",{className:"font-medium text-slate-600",children:((r=t.user)==null?void 0:r.name)??"Usuario an√≥nimo"}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]},t.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üìù"}),e.jsx("p",{className:"text-slate-500 text-lg",children:"No hay comentarios para este informe"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"¬°S√© el primero en comentar!"})]})}),e.jsx(S,{className:"p-6",children:e.jsx(m,{onClick:j,variant:"contained",sx:{borderRadius:"8px",background:"linear-gradient(45deg, #3b82f6, #6366f1)",textTransform:"none",fontWeight:600,"&:hover":{background:"linear-gradient(45deg, #2563eb, #5855f5)"}},children:"Cerrar"})})]})]})})})};export{Re as default};
