import{v as x,r as b,j as e}from"./app-hmuC0z_W.js";import{A as g}from"./app-layout-tfxOdOKB.js";import"./button-BdWLbofJ.js";import"./clsx-B-dksMZM.js";import"./avatar-SH5xSAMo.js";import"./createLucideIcon-B2A0n4jm.js";import"./index-BeDZ4tg0.js";import"./index-B2CGEqEW.js";import"./index-CDmN9uZR.js";import"./settings-B81NYrWU.js";import"./app-logo-icon-DF-2vurZ.js";import"./createSvgIcon-DmtCSiy2.js";import"./DefaultPropsProvider-B9G9mrQg.js";function O({reporte:o,empresas:m}){const d=x({tipo_periodo:o.tipo_periodo||"semanal",fecha_reporte:o.fecha_reporte||"",fecha_inicio:o.fecha_inicio||"",fecha_fin:o.fecha_fin||"",observaciones:o.observaciones||"",recomendaciones:o.recomendaciones||"",seguimiento_empresa_ids:(o.empresas||[]).map(a=>String(a.id))||[],actividades:(o.actividades||[]).map(a=>({tipo_actividad:a.tipo_actividad||"",descripcion:a.descripcion||"",fecha_actividad:a.fecha_actividad||"",observaciones:a.observaciones||""})),estrategias:(o.estrategias||[]).map(a=>({metodo_estrategia:a.metodo_estrategia||"",herramientas_usadas:a.herramientas_usadas||"",resultado_esperado:a.resultado_esperado||""})),resultados:(o.resultados||[]).map(a=>({indicador:a.indicador||"",meta_mes:a.meta_mes||"",resultado_real:a.resultado_real||"",observaciones:a.observaciones||""})),dificultades:(o.dificultades||[]).map(a=>({tipo:a.tipo||"",descripcion:a.descripcion||"",impacto:a.impacto||"",accion_tomada:a.accion_tomada||""})),metas:(o.metas||[]).map(a=>({objetivo:a.objetivo||"",accion_implementar:a.accion_implementar||"",responsable:a.responsable||"",fecha_cumplimiento:a.fecha_cumplimiento||""}))}),[l,p]=b.useState({});function r(a){const t={actividades:{tipo_actividad:"",descripcion:"",fecha_actividad:"",observaciones:""},estrategias:{metodo_estrategia:"",herramientas_usadas:"",resultado_esperado:""},resultados:{indicador:"",meta_mes:"",resultado_real:"",observaciones:""},dificultades:{tipo:"",descripcion:"",impacto:"",accion_tomada:""},metas:{objetivo:"",accion_implementar:"",responsable:"",fecha_cumplimiento:""}},s=d.data[a]||[];d.setData(a,[...s,t[a]])}function c(a,t){const s=[...d.data[a]||[]];s.splice(t,1),d.setData(a,s)}function i(a,t,s,h){const n=[...d.data[a]||[]];n[t]={...n[t],[s]:h},d.setData(a,n)}function u(a){a.preventDefault();const t={},s=d.data;(!s.actividades||s.actividades.length===0)&&(t.actividades="Agrega al menos una actividad"),(!s.estrategias||s.estrategias.length===0)&&(t.estrategias="Agrega al menos una estrategia"),(!s.resultados||s.resultados.length===0)&&(t.resultados="Agrega al menos un resultado"),(!s.dificultades||s.dificultades.length===0)&&(t.dificultades="Agrega al menos una dificultad"),(!s.metas||s.metas.length===0)&&(t.metas="Agrega al menos una meta"),p(t),!(Object.keys(t).length>0)&&d.put(route("reportes.update",o.id))}return e.jsx(g,{children:e.jsxs("div",{className:"mx-auto max-w-5xl p-4",children:[e.jsxs("h1",{className:"mb-4 text-2xl font-bold",children:["Editar Reporte #",o.id]}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"block",children:["Tipo de Periodo:",e.jsxs("select",{value:d.data.tipo_periodo,onChange:a=>d.setData("tipo_periodo",a.target.value),className:"mt-1 block w-full rounded border px-2 py-1",children:[e.jsx("option",{value:"diario",children:"Diario"}),e.jsx("option",{value:"semanal",children:"Semanal"}),e.jsx("option",{value:"mensual",children:"Mensual"})]})]}),e.jsxs("label",{className:"block",children:["Fecha inicio:",e.jsx("input",{type:"date",value:d.data.fecha_inicio,onChange:a=>d.setData("fecha_inicio",a.target.value),className:"mt-1 block w-full rounded border px-2 py-1"})]}),e.jsxs("label",{className:"block",children:["Fecha fin:",e.jsx("input",{type:"date",value:d.data.fecha_fin,onChange:a=>d.setData("fecha_fin",a.target.value),className:"mt-1 block w-full rounded border px-2 py-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Empresas relacionadas:"}),e.jsx("select",{multiple:!0,value:d.data.seguimiento_empresa_ids,onChange:a=>d.setData("seguimiento_empresa_ids",Array.from(a.target.selectedOptions,t=>t.value)),className:"w-full rounded border px-2 py-1",children:m.map(a=>e.jsxs("option",{value:a.id,children:[a.nombre_empresa," (",a.estado,")"]},a.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"block",children:["Observaciones:",e.jsx("textarea",{value:d.data.observaciones,onChange:a=>d.setData("observaciones",a.target.value),className:"mt-1 block w-full rounded border px-2 py-1",rows:4})]}),e.jsxs("label",{className:"block",children:["Recomendaciones:",e.jsx("textarea",{value:d.data.recomendaciones,onChange:a=>d.setData("recomendaciones",a.target.value),className:"mt-1 block w-full rounded border px-2 py-1",rows:4})]})]}),e.jsxs("section",{className:"border rounded p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Actividades"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:()=>r("actividades"),className:"rounded bg-blue-600 px-3 py-1 text-white",children:"Añadir"})})]}),l.actividades&&e.jsx("p",{className:"text-red-600 mb-2",children:l.actividades}),d.data.actividades&&d.data.actividades.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No hay actividades."}):d.data.actividades.map((a,t)=>e.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[e.jsx("input",{placeholder:"Tipo",value:a.tipo_actividad,onChange:s=>i("actividades",t,"tipo_actividad",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("input",{placeholder:"Descripción",value:a.descripcion,onChange:s=>i("actividades",t,"descripcion",s.target.value),className:"rounded border px-2 py-1 md:col-span-2"}),e.jsx("input",{type:"date",value:a.fecha_actividad,onChange:s=>i("actividades",t,"fecha_actividad",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("textarea",{placeholder:"Observaciones",value:a.observaciones,onChange:s=>i("actividades",t,"observaciones",s.target.value),className:"rounded border px-2 py-1 md:col-span-4",rows:2}),e.jsx("div",{className:"md:col-span-4 flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>c("actividades",t),className:"text-red-600",children:"Eliminar"})})]},t))]}),e.jsxs("section",{className:"border rounded p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Estrategias"}),e.jsx("button",{type:"button",onClick:()=>r("estrategias"),className:"rounded bg-blue-600 px-3 py-1 text-white",children:"Añadir"})]}),l.estrategias&&e.jsx("p",{className:"text-red-600 mb-2",children:l.estrategias}),(d.data.estrategias||[]).map((a,t)=>e.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsx("input",{placeholder:"Método",value:a.metodo_estrategia,onChange:s=>i("estrategias",t,"metodo_estrategia",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("input",{placeholder:"Herramientas usadas",value:a.herramientas_usadas,onChange:s=>i("estrategias",t,"herramientas_usadas",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("input",{placeholder:"Resultado esperado",value:a.resultado_esperado,onChange:s=>i("estrategias",t,"resultado_esperado",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("div",{className:"md:col-span-3 flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>c("estrategias",t),className:"text-red-600",children:"Eliminar"})})]},t))]}),e.jsxs("section",{className:"border rounded p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Resultados"}),e.jsx("button",{type:"button",onClick:()=>r("resultados"),className:"rounded bg-blue-600 px-3 py-1 text-white",children:"Añadir"})]}),l.resultados&&e.jsx("p",{className:"text-red-600 mb-2",children:l.resultados}),(d.data.resultados||[]).map((a,t)=>e.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[e.jsx("input",{placeholder:"Indicador",value:a.indicador,onChange:s=>i("resultados",t,"indicador",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("input",{placeholder:"Meta mes",value:a.meta_mes,onChange:s=>i("resultados",t,"meta_mes",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("input",{placeholder:"Resultado real",value:a.resultado_real,onChange:s=>i("resultados",t,"resultado_real",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("textarea",{placeholder:"Observaciones",value:a.observaciones,onChange:s=>i("resultados",t,"observaciones",s.target.value),className:"rounded border px-2 py-1 md:col-span-4",rows:2}),e.jsx("div",{className:"md:col-span-4 flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>c("resultados",t),className:"text-red-600",children:"Eliminar"})})]},t))]}),e.jsxs("section",{className:"border rounded p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Dificultades"}),e.jsx("button",{type:"button",onClick:()=>r("dificultades"),className:"rounded bg-blue-600 px-3 py-1 text-white",children:"Añadir"})]}),l.dificultades&&e.jsx("p",{className:"text-red-600 mb-2",children:l.dificultades}),(d.data.dificultades||[]).map((a,t)=>e.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[e.jsx("input",{placeholder:"Tipo",value:a.tipo,onChange:s=>i("dificultades",t,"tipo",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("input",{placeholder:"Descripción",value:a.descripcion,onChange:s=>i("dificultades",t,"descripcion",s.target.value),className:"rounded border px-2 py-1 md:col-span-2"}),e.jsx("input",{placeholder:"Impacto",value:a.impacto,onChange:s=>i("dificultades",t,"impacto",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("input",{placeholder:"Acción tomada",value:a.accion_tomada,onChange:s=>i("dificultades",t,"accion_tomada",s.target.value),className:"rounded border px-2 py-1 md:col-span-4"}),e.jsx("div",{className:"md:col-span-4 flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>c("dificultades",t),className:"text-red-600",children:"Eliminar"})})]},t))]}),e.jsxs("section",{className:"border rounded p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Metas Siguientes"}),e.jsx("button",{type:"button",onClick:()=>r("metas"),className:"rounded bg-blue-600 px-3 py-1 text-white",children:"Añadir"})]}),l.metas&&e.jsx("p",{className:"text-red-600 mb-2",children:l.metas}),(d.data.metas||[]).map((a,t)=>e.jsxs("div",{className:"mb-3 grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[e.jsx("input",{placeholder:"Objetivo",value:a.objetivo,onChange:s=>i("metas",t,"objetivo",s.target.value),className:"rounded border px-2 py-1 md:col-span-2"}),e.jsx("input",{placeholder:"Acción a implementar",value:a.accion_implementar,onChange:s=>i("metas",t,"accion_implementar",s.target.value),className:"rounded border px-2 py-1 md:col-span-2"}),e.jsx("input",{placeholder:"Responsable",value:a.responsable,onChange:s=>i("metas",t,"responsable",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("input",{type:"date",placeholder:"Fecha cumplimiento",value:a.fecha_cumplimiento,onChange:s=>i("metas",t,"fecha_cumplimiento",s.target.value),className:"rounded border px-2 py-1"}),e.jsx("div",{className:"md:col-span-4 flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>c("metas",t),className:"text-red-600",children:"Eliminar"})})]},t))]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"rounded border px-4 py-2",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:d.processing,className:"rounded bg-blue-600 px-4 py-2 text-white",children:"Guardar cambios"})]})]})]})})}export{O as default};
