import{r as o,j as e,a as M,$ as Ne}from"./app-DWYhLQL6.js";import{A as He,e as xr,P as ur,B as we,d as $e,b as mr,c as pr}from"./app-layout-p7K4X7eV.js";import{u as hr,P as U}from"./Paper-EniTK7He.js";import{u as gr}from"./index-BcECN-C9.js";import{C as Se}from"./Container-C7xxEfFj.js";import{S as Be}from"./Skeleton-B1sLvN_q.js";import{G as l}from"./Grid-DU2EuT6q.js";import{B as a}from"./Box-BbMU-_RR.js";import{F as V}from"./Fade-BWgYys4A.js";import{T as n}from"./Typography-IkT196je.js";import{S as fr}from"./Slide-CUxwwMqY.js";import{A as jr}from"./Alert-DVZ0JWC1.js";import{B as v}from"./Button-BrLf_Pls.js";import{S as ke}from"./Stack-nT1jkqe3.js";import{A as br}from"./ArrowBack-C7ffWRV4.js";import{c as de}from"./createSvgIcon-C-V1FIKo.js";import{T as G}from"./Tooltip-D9IkZOyx.js";import{I as F}from"./IconButton-BGvBFu85.js";import{A as q}from"./Add-C3coAMIP.js";import{T as g}from"./TextField-MHNYv_sC.js";import{I as vr}from"./InputAdornment-elME3r4g.js";import{S as yr}from"./Search-DU2LiQPG.js";import{M as p}from"./MenuItem-Bm9YqGqc.js";import{C}from"./Chip-Dd1dfm5j.js";import{A as Cr}from"./Assignment-D4_LioE8.js";import{Z as Y}from"./Zoom-DQdHpb6B.js";import{C as Z}from"./Card-8ZfkaAJ7.js";import{F as P,a as Q}from"./Select-DJEe7ust.js";import{R as O,a as f}from"./RadioGroup-Dte4L1TE.js";import{F as j}from"./FormControlLabel-C_q7oJPT.js";import{A as le}from"./Avatar-DoV_5ciI.js";import{C as Ie}from"./Cancel-DqEYgzrO.js";import{S as Fe}from"./Save-cVr3gk7X.js";import{S as Ue}from"./Star-Ck1w0E7y.js";import{a as wr,L as Sr}from"./List-DOdfdsGa.js";import{L as kr,a as Ir}from"./ListItem-DYQNgQZO.js";import{c as Fr}from"./clsx-B-dksMZM.js";import{a as Er,g as Wr,u as Dr,s as Tr,c as Mr,b as w}from"./DefaultPropsProvider-CHy6HlRv.js";import{P as Rr}from"./PriorityHigh-C2qxcSdJ.js";import{T as zr}from"./TrendingUp-rz6NbUpJ.js";import{L as Ar}from"./ListItemText-WowRyo6r.js";import{C as Ve}from"./CalendarToday-zfC2SNRe.js";import{E as Ee}from"./Edit-y_0_0Hdp.js";import{D as Ge}from"./Delete-mfqLQQwu.js";import{D as _r}from"./Divider-_DokKI_g.js";import{C as Lr}from"./Collapse-DXQ7ULMV.js";import{F as Pr}from"./Fab-D3EfU8En.js";import"./button-wMTuvAkw.js";import"./avatar-C0bnmZQz.js";import"./createLucideIcon-DISkT-zV.js";import"./index-vDywYphy.js";import"./index-CvZMSx04.js";import"./index-C-qtZoBa.js";import"./settings-B1FLQ7wV.js";import"./app-logo-icon-HoYzQaBs.js";import"./getThemeProps-DLKBaTjH.js";import"./useTimeout-CcjJ2cmE.js";import"./useThemeProps-Bas4AH8z.js";import"./createSimplePaletteValueFilter-WGi9SSDd.js";import"./isMuiElement-D94hBNTL.js";import"./TransitionGroupContext-D4TXwhqE.js";import"./debounce-Be36O1Ab.js";import"./Modal-N30Js5sT.js";import"./ownerDocument-DW-IO8s5.js";import"./createChainedFunction-BO_9K8Jh.js";import"./useSlot-CO4IlLCl.js";import"./Portal-Dt5KHSRP.js";import"./Close-DmBjolgA.js";import"./useId-o3zk_1yM.js";import"./ButtonBase-DpqQEAAf.js";import"./CircularProgress-Bo20HsGQ.js";import"./index-DtBJPI5W.js";import"./useControlled-5UsadrEY.js";import"./Grow-IF_zPiYA.js";import"./Popper-BNtv9MeI.js";import"./useSlotProps-CBCDIG0V.js";import"./useFormControl-CsRgqpY5.js";import"./listItemTextClasses-Cw1PQWTE.js";import"./dividerClasses-BOZ5yH6J.js";import"./SwitchBase-B7zN4q3R.js";import"./FormGroup-CSMZ22Zq.js";function Or(m){return Er("MuiListItemAvatar",m)}Wr("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Nr=m=>{const{alignItems:E,classes:W}=m;return Mr({root:["root",E==="flex-start"&&"alignItemsFlexStart"]},Or,W)},Hr=Tr("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(m,E)=>{const{ownerState:W}=m;return[E.root,W.alignItems==="flex-start"&&E.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),$r=o.forwardRef(function(E,W){const N=Dr({props:E,name:"MuiListItemAvatar"}),{className:X,...ce}=N,R=o.useContext(wr),_={...N,alignItems:R.alignItems},xe=Nr(_);return e.jsx(Hr,{className:Fr(xe.root,X),ownerState:_,ref:W,...ce})}),Br=de(e.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2M8 11H4V6h4zm6 0h-4V6h4zm6 0h-4V6h4zM8 18H4v-5h4zm6 0h-4v-5h4zm6 0h-4v-5h4z"})),Ur=de(e.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),Vr=de(e.jsx("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"})),Gr=de(e.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}));function va(){const[m,E]=o.useState([]),[W,N]=o.useState([]),[X,ce]=o.useState([]),[R,_]=o.useState("aleatoria"),[xe,qe]=o.useState([]),[ue,J]=o.useState(""),[Ye,We]=o.useState(!0),[me,L]=o.useState(null),[De,Te]=o.useState({}),[d,H]=o.useState("semana"),[z,Me]=o.useState(null),[K,Ze]=o.useState(""),[ee,Qe]=o.useState(""),[re,Xe]=o.useState(""),[pe,te]=o.useState(null),[c,k]=o.useState({titulo:"",prioridad:"",descripcion:"",fecha:"",tipo_id:"",company_id:""}),[Re,ae]=o.useState(!1),[x,I]=o.useState({titulo:"",prioridad:"",descripcion:"",fecha:"",tipo_id:"",company_id:""}),[ze,he]=o.useState("no"),[Ae,ge]=o.useState("no"),Je=hr();gr(Je.breakpoints.down("sm"));const D=o.useCallback(async()=>{We(!0),L(null);try{const[r,t,i,s]=await Promise.all([M.get("/tareas-con-asignaciones"),M.get("/api/tipos"),M.get("/api/companies"),M.get("/api/pasantes")]);E(r.data),N(t.data),ce(i.data),qe(s.data)}catch(r){console.error("Error al cargar datos:",r),L("Hubo un error al cargar los datos. Por favor, intenta de nuevo.")}finally{We(!1)}},[]);o.useEffect(()=>{D()},[D]);const $=o.useCallback(r=>{const[t,i,s]=r.split("-").map(S=>Number.parseInt(S,10));return new Date(t,i-1,s)},[]),ie=o.useCallback(r=>{const t=$(r),i=new Date,S=(i.getDay()+6)%7,u=new Date(i);u.setDate(i.getDate()-S),u.setHours(0,0,0,0);const h=new Date(u);return h.setDate(u.getDate()+6),h.setHours(23,59,59,999),t>=u&&t<=h},[$]),fe=o.useMemo(()=>{const r=new Date,i=(r.getDay()+6)%7,s=new Date(r);s.setDate(r.getDate()-i),s.setHours(0,0,0,0);const S=[];for(let u=0;u<7;u++){const h=new Date(s);h.setDate(s.getDate()+u);const b=h.getFullYear(),y=String(h.getMonth()+1).padStart(2,"0"),Ce=String(h.getDate()).padStart(2,"0");S.push(`${b}-${y}-${Ce}`)}return S},[]),A=o.useMemo(()=>{let r=m;if(d==="semana")r=m.filter(t=>ie(t.fecha));else if(d==="mes"){const t=new Date;r=m.filter(i=>{const s=$(i.fecha);return s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()})}else d==="dia"&&z&&(r=m.filter(t=>t.fecha===z));return K&&(r=r.filter(t=>t.titulo.toLowerCase().includes(K.toLowerCase()))),re&&(r=r.filter(t=>t.prioridad===re)),ee&&(r=r.filter(t=>t.asignados.some(i=>i.user_name===ee))),r},[m,d,z,ie,$,K,re,ee]),Ke=o.useMemo(()=>{const r={};return d==="semana"&&m.filter(t=>ie(t.fecha)).forEach(t=>{r[t.fecha]||(r[t.fecha]=[]),r[t.fecha].push(t)}),r},[m,d,ie]),se=o.useMemo(()=>{if(d!=="dia")return{};const r={};return A.forEach(t=>{t.asignados.forEach(i=>{const s=i.user_name;r[s]||(r[s]=[]),r[s].push(t)})}),r},[A,d]),_e=o.useMemo(()=>{const r=new Set;return m.forEach(t=>{t.asignados.forEach(i=>{r.add(i.user_name)})}),Array.from(r).sort()},[m]);o.useEffect(()=>{const r={};Object.keys(se).forEach(t=>{r[t]=!0}),Te(r)},[se]);const er=r=>{Te(t=>({...t,[r]:!t[r]}))},Le=r=>{Me(r),H("dia")},rr=()=>{H("semana"),Me(null),te(null),ae(!1)},Pe=r=>{var t,i;te(r.id),k({titulo:r.titulo,prioridad:r.prioridad,descripcion:r.descripcion,fecha:r.fecha,tipo_id:(t=r.tipo)!=null&&t.id?String(r.tipo.id):"",company_id:(i=r.company)!=null&&i.id?String(r.company.id):""}),ge(r.company?"si":"no")},tr=()=>{te(null),k({titulo:"",prioridad:"",descripcion:"",fecha:"",tipo_id:"",company_id:""}),ge("no")},B=r=>{ae(!0),I({titulo:"",prioridad:"",descripcion:"",fecha:r||new Date().toISOString().split("T")[0],tipo_id:"",company_id:""}),he("no")},ar=()=>{ae(!1),I({titulo:"",prioridad:"",descripcion:"",fecha:"",tipo_id:"",company_id:""}),he("no"),_("aleatoria"),J("")},ir=async()=>{if(x.titulo.trim())try{const r={...x,tipo_id:x.tipo_id?Number(x.tipo_id):null,company_id:x.company_id?Number(x.company_id):null,asignacion_aleatoria:R==="aleatoria",pasante_id:R==="manual"?Number(ue):null};await M.post("/create/tareas",r),ae(!1),D(),_("aleatoria"),J("")}catch(r){console.error("Error al crear tarea:",r),L("Error al crear la tarea")}},Oe=async r=>{if(confirm("Â¿EstÃ¡s seguro de que deseas eliminar esta tarea?"))try{await M.delete(`/tareas/${r}`),D()}catch(t){console.error("Error al eliminar tarea:",t),L("Error al eliminar la tarea")}},T=r=>{switch(r.toLowerCase()){case"alta":return"#FF1744";case"media":return"#FF9100";case"baja":return"#00E676";default:return"#9E9E9E"}},je=r=>{const t=["#1976d2","#1565c0","#0d47a1","#2196f3","#0288d1","#01579b","#03a9f4","#00b0ff","#0091ea","#3f51b5"],i=r.charCodeAt(0)%t.length;return t[i]},be=r=>r.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),sr=(r,t=!1)=>{if(t)return"linear-gradient(135deg, #FF6B35 0%, #F7931E 50%, #FFD23F 100%)";const i=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)","linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)"];return i[r%i.length]},[ve,ye]=o.useState(null),[oe,ne]=o.useState({estado:"",detalle:""});if(Ye)return e.jsxs(He,{breadcrumbs:[{title:"Tareas",href:"/tareas"}],children:[e.jsx(Ne,{title:"Tareas"}),e.jsxs(Se,{maxWidth:"xl",sx:{py:4},children:[e.jsx(Be,{variant:"rectangular",height:60,sx:{mb:2,borderRadius:1}}),e.jsx(l,{container:!0,spacing:2,children:[...Array(7)].map((r,t)=>e.jsx(l,{item:!0,xs:12,sm:6,md:!0,children:e.jsx(Be,{variant:"rectangular",height:400,sx:{borderRadius:2}})},t))})]})]});function or(r){ye(r.id),ne({estado:r.estado,detalle:r.detalle??""})}function nr(){ye(null),ne({estado:"",detalle:""})}async function lr(){if(ve)try{await M.patch(`/asignaciones/${ve}`,{estado:oe.estado,detalle:oe.detalle}),await D(),ye(null)}catch(r){console.error("Error al actualizar asignaciÃ³n:",r),L("No se pudo actualizar la asignaciÃ³n")}}const dr=async()=>{if(c.titulo.trim())try{const r={...c,tipo_id:c.tipo_id?Number(c.tipo_id):null,company_id:c.company_id?Number(c.company_id):null};await M.put(`/tareas/${pe}`,r),te(null),D()}catch(r){console.error("Error al actualizar tarea:",r),L("Error al actualizar la tarea")}};return e.jsxs(He,{breadcrumbs:[{title:"Tareas",href:"/tareas"}],children:[e.jsx(Ne,{title:"Tareas"}),e.jsx(a,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #0d47a1 100%)",color:"white",py:3,position:"relative",overflow:"hidden"},children:e.jsx(Se,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:e.jsx(V,{in:!0,timeout:800,children:e.jsxs(a,{children:[e.jsxs(n,{variant:"h4",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:["ðŸ“… ",d==="dia"?`Tareas del ${z}`:"GestiÃ³n de Tareas"]}),e.jsx(n,{variant:"subtitle1",sx:{opacity:.9},children:d==="dia"?"Edita las tareas directamente en la lista":"Organiza y gestiona todas tus tareas de manera eficiente"})]})})})}),e.jsxs(Se,{maxWidth:"xl",sx:{py:3},children:[me&&e.jsx(fr,{direction:"down",in:!!me,children:e.jsx(jr,{severity:"error",sx:{mb:3,borderRadius:2},action:e.jsx(v,{color:"inherit",size:"small",onClick:D,children:"Reintentar"}),children:me})}),e.jsx(U,{elevation:0,sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",border:"1px solid rgba(0,0,0,0.05)",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:e.jsxs(ke,{spacing:3,children:[e.jsxs(a,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[d==="dia"&&e.jsx(v,{variant:"outlined",startIcon:e.jsx(br,{}),onClick:rr,sx:{borderRadius:2,borderColor:"#1976d2",color:"#1976d2"},children:"Volver a la semana"}),e.jsxs(a,{sx:{display:"flex",gap:1},children:[e.jsx(v,{variant:d==="semana"?"contained":"outlined",startIcon:e.jsx(xr,{}),onClick:()=>H("semana"),sx:{borderRadius:2},children:"Semana"}),e.jsx(v,{variant:d==="mes"?"contained":"outlined",startIcon:e.jsx(Br,{}),onClick:()=>H("mes"),sx:{borderRadius:2},children:"Mes"}),e.jsx(v,{variant:d==="todas"?"contained":"outlined",startIcon:e.jsx(Gr,{}),onClick:()=>H("todas"),sx:{borderRadius:2},children:"Todas"})]}),e.jsx(a,{sx:{flexGrow:1}}),e.jsxs(a,{sx:{display:"flex",gap:1},children:[e.jsx(G,{title:"Actualizar",children:e.jsx(F,{onClick:D,sx:{bgcolor:"white","&:hover":{bgcolor:"grey.100"}},children:e.jsx(Ur,{})})}),e.jsx(v,{variant:"contained",onClick:()=>B(),startIcon:e.jsx(q,{}),sx:{borderRadius:2,background:"linear-gradient(45deg, #1976d2 0%, #0d47a1 100%)","&:hover":{background:"linear-gradient(45deg, #1565c0 0%, #0a3880 100%)"},px:3,py:1},children:"Nueva Tarea Para HOY"})]})]}),d!=="dia"&&e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,md:4,children:e.jsx(g,{fullWidth:!0,placeholder:"Buscar tareas...",value:K,onChange:r=>Ze(r.target.value),InputProps:{startAdornment:e.jsx(vr,{position:"start",children:e.jsx(yr,{})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(g,{select:!0,fullWidth:!0,label:"Filtrar por usuario",value:ee,onChange:r=>Qe(r.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(p,{value:"",children:"Todos los usuarios"}),_e.map(r=>e.jsx(p,{value:r,children:r},r))]})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(g,{select:!0,fullWidth:!0,label:"Filtrar por prioridad",value:re,onChange:r=>Xe(r.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(p,{value:"",children:"Todas las prioridades"}),e.jsx(p,{value:"alta",children:"Alta"}),e.jsx(p,{value:"media",children:"Media"}),e.jsx(p,{value:"baja",children:"Baja"})]})})]}),e.jsxs(a,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(C,{icon:e.jsx(Cr,{}),label:`${A.length} tareas`,color:"primary",variant:"outlined",sx:{fontWeight:"bold"}}),d!=="dia"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{icon:e.jsx(ur,{}),label:`${_e.length} usuarios`,color:"primary",variant:"outlined",sx:{fontWeight:"bold"}}),e.jsx(C,{icon:e.jsx(we,{}),label:`${new Set(m.map(r=>{var t;return(t=r.company)==null?void 0:t.name}).filter(Boolean)).size} empresas`,color:"primary",variant:"outlined",sx:{fontWeight:"bold"}})]})]})]})}),Re&&e.jsx(Y,{in:!0,children:e.jsxs(Z,{sx:{mb:3,borderRadius:3,border:"3px solid #1976d2",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.2)",overflow:"hidden"},children:[e.jsxs(a,{sx:{p:3,background:"linear-gradient(135deg, #1976d2 0%, #0d47a1 100%)",color:"white"},children:[e.jsx(n,{variant:"h5",fontWeight:"bold",sx:{display:"flex",alignItems:"center",gap:1},children:"âœ¨ Crear Nueva Tarea"}),e.jsx(n,{variant:"body2",sx:{opacity:.9,mt:.5},children:"Completa todos los campos para crear una tarea detallada"})]}),e.jsx(a,{sx:{p:4,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(P,{component:"fieldset",fullWidth:!0,children:[e.jsx(Q,{component:"legend",sx:{fontWeight:"bold",mb:1,color:"#1976d2"},children:"ðŸ‘¥ Tipo de AsignaciÃ³n"}),e.jsxs(O,{row:!0,value:R,onChange:r=>{_(r.target.value),r.target.value==="aleatoria"&&J("")},children:[e.jsx(j,{value:"aleatoria",control:e.jsx(f,{}),label:"Aleatoria"}),e.jsx(j,{value:"manual",control:e.jsx(f,{}),label:"Manual"})]})]})}),R==="manual"&&e.jsx(l,{item:!0,xs:12,children:e.jsxs(g,{select:!0,fullWidth:!0,label:"ðŸ§‘â€ðŸ’¼ Seleccionar Pasante",value:ue,onChange:r=>J(r.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(p,{value:"",children:"Seleccionar pasante"}),xe.map(r=>e.jsx(p,{value:r.id,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(le,{sx:{width:24,height:24,bgcolor:je(r.name),fontSize:"0.875rem"},children:be(r.name)}),e.jsx(n,{children:r.name}),e.jsxs(n,{variant:"caption",sx:{color:"text.secondary"},children:["(",r.email,")"]})]})},r.id))]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(g,{fullWidth:!0,label:"ðŸ“ TÃ­tulo de la tarea",value:x.titulo,onChange:r=>I({...x,titulo:r.target.value}),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover":{borderColor:"#1976d2"}}}})}),e.jsx(l,{item:!0,xs:12,md:3,children:e.jsx(g,{type:"date",fullWidth:!0,label:"ðŸ“… Fecha",value:x.fecha,onChange:r=>I({...x,fecha:r.target.value}),InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(l,{item:!0,xs:12,md:3,children:e.jsxs(g,{select:!0,fullWidth:!0,label:"ðŸ·ï¸ Tipo",value:x.tipo_id,onChange:r=>I({...x,tipo_id:r.target.value}),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(p,{value:"",children:"Sin tipo"}),W.map(r=>e.jsx(p,{value:r.id,children:r.nombre},r.id))]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(P,{component:"fieldset",fullWidth:!0,children:[e.jsx(Q,{component:"legend",sx:{fontWeight:"bold",mb:1,color:"#1976d2"},children:"âš¡ Prioridad"}),e.jsxs(O,{row:!0,value:x.prioridad,onChange:r=>I({...x,prioridad:r.target.value}),children:[e.jsx(j,{value:"alta",control:e.jsx(f,{sx:{color:"#FF1744","&.Mui-checked":{color:"#FF1744"}}}),label:"ðŸ”´ Alta"}),e.jsx(j,{value:"media",control:e.jsx(f,{sx:{color:"#FF9100","&.Mui-checked":{color:"#FF9100"}}}),label:"ðŸŸ¡ Media"}),e.jsx(j,{value:"baja",control:e.jsx(f,{sx:{color:"#00E676","&.Mui-checked":{color:"#00E676"}}}),label:"ðŸŸ¢ Baja"})]})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(P,{component:"fieldset",fullWidth:!0,children:[e.jsx(Q,{component:"legend",sx:{fontWeight:"bold",mb:1,color:"#1976d2"},children:"ðŸ¢ Â¿Asignar empresa?"}),e.jsxs(O,{row:!0,value:ze,onChange:r=>{he(r.target.value),r.target.value==="no"&&I({...x,company_id:""})},children:[e.jsx(j,{value:"si",control:e.jsx(f,{}),label:"SÃ­"}),e.jsx(j,{value:"no",control:e.jsx(f,{}),label:"No"})]})]})}),ze==="si"&&e.jsx(l,{item:!0,xs:12,children:e.jsxs(g,{select:!0,fullWidth:!0,label:"ðŸ¢ Empresa",value:x.company_id,onChange:r=>I({...x,company_id:r.target.value}),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(p,{value:"",children:"Seleccionar empresa"}),X.map(r=>e.jsx(p,{value:r.id,children:r.nombre},r.id))]})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(g,{fullWidth:!0,multiline:!0,rows:3,label:"ðŸ“„ DescripciÃ³n",value:x.descripcion,onChange:r=>I({...x,descripcion:r.target.value}),placeholder:"Describe la tarea en detalle...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(v,{variant:"outlined",startIcon:e.jsx(Ie,{}),onClick:ar,sx:{borderRadius:2,minWidth:120},children:"Cancelar"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(Fe,{}),onClick:ir,disabled:!x.titulo.trim()||R==="manual"&&!ue,sx:{borderRadius:2,minWidth:120,background:"linear-gradient(45deg, #4caf50 0%, #2e7d32 100%)","&:hover":{background:"linear-gradient(45deg, #388e3c 0%, #1b5e20 100%)"}},children:"Crear Tarea"})]})})]})})]})}),pe&&e.jsx(Y,{in:!0,children:e.jsxs(Z,{sx:{mb:3,borderRadius:3,border:"3px solid #FF9100",boxShadow:"0 8px 32px rgba(255, 145, 0, 0.2)",overflow:"hidden"},children:[e.jsxs(a,{sx:{p:3,background:"linear-gradient(135deg, #FF9100 0%, #FF6F00 100%)",color:"white"},children:[e.jsx(n,{variant:"h5",fontWeight:"bold",sx:{display:"flex",alignItems:"center",gap:1},children:"âœï¸ Editar Tarea"}),e.jsx(n,{variant:"body2",sx:{opacity:.9,mt:.5},children:"Modifica los campos que necesites actualizar"})]}),e.jsx(a,{sx:{p:4,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(g,{fullWidth:!0,label:"ðŸ“ TÃ­tulo de la tarea",value:c.titulo,onChange:r=>k({...c,titulo:r.target.value}),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover":{borderColor:"#FF9100"}}}})}),e.jsx(l,{item:!0,xs:12,md:3,children:e.jsx(g,{type:"date",fullWidth:!0,label:"ðŸ“… Fecha",value:c.fecha,onChange:r=>k({...c,fecha:r.target.value}),InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(l,{item:!0,xs:12,md:3,children:e.jsxs(g,{select:!0,fullWidth:!0,label:"ðŸ·ï¸ Tipo",value:c.tipo_id,onChange:r=>k({...c,tipo_id:r.target.value}),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(p,{value:"",children:"Sin tipo"}),W.map(r=>e.jsx(p,{value:r.id,children:r.nombre},r.id))]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(P,{component:"fieldset",fullWidth:!0,children:[e.jsx(Q,{component:"legend",sx:{fontWeight:"bold",mb:1,color:"#FF9100"},children:"âš¡ Prioridad"}),e.jsxs(O,{row:!0,value:c.prioridad,onChange:r=>k({...c,prioridad:r.target.value}),children:[e.jsx(j,{value:"alta",control:e.jsx(f,{sx:{color:"#FF1744","&.Mui-checked":{color:"#FF1744"}}}),label:"ðŸ”´ Alta"}),e.jsx(j,{value:"media",control:e.jsx(f,{sx:{color:"#FF9100","&.Mui-checked":{color:"#FF9100"}}}),label:"ðŸŸ¡ Media"}),e.jsx(j,{value:"baja",control:e.jsx(f,{sx:{color:"#00E676","&.Mui-checked":{color:"#00E676"}}}),label:"ðŸŸ¢ Baja"})]})]})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(P,{component:"fieldset",fullWidth:!0,children:[e.jsx(Q,{component:"legend",sx:{fontWeight:"bold",mb:1,color:"#FF9100"},children:"ðŸ¢ Â¿Cambiar empresa?"}),e.jsxs(O,{row:!0,value:Ae,onChange:r=>{ge(r.target.value),r.target.value==="no"&&k({...c,company_id:""})},children:[e.jsx(j,{value:"si",control:e.jsx(f,{}),label:"SÃ­"}),e.jsx(j,{value:"no",control:e.jsx(f,{}),label:"No"})]})]})}),Ae==="si"&&e.jsx(l,{item:!0,xs:12,children:e.jsxs(g,{select:!0,fullWidth:!0,label:"ðŸ¢ Empresa",value:c.company_id,onChange:r=>k({...c,company_id:r.target.value}),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(p,{value:"",children:"Sin empresa"}),X.map(r=>e.jsx(p,{value:r.id,children:r.nombre},r.id))]})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(g,{fullWidth:!0,multiline:!0,rows:3,label:"ðŸ“„ DescripciÃ³n",value:c.descripcion,onChange:r=>k({...c,descripcion:r.target.value}),placeholder:"Describe la tarea en detalle...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(v,{variant:"outlined",startIcon:e.jsx(Ie,{}),onClick:tr,sx:{borderRadius:2,minWidth:120},children:"Cancelar"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(Fe,{}),onClick:dr,disabled:!c.titulo.trim(),sx:{borderRadius:2,minWidth:120,background:"linear-gradient(45deg, #FF9100 0%, #FF6F00 100%)","&:hover":{background:"linear-gradient(45deg, #FF8F00 0%, #E65100 100%)"}},children:"Actualizar"})]})})]})})]})}),d==="semana"&&e.jsx(V,{in:!0,children:e.jsxs(U,{sx:{borderRadius:3,overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.12)"},children:[e.jsxs(a,{sx:{background:"linear-gradient(90deg, #1976d2 0%, #2196f3 100%)",color:"white",p:2,textAlign:"center"},children:[e.jsx(n,{variant:"h5",fontWeight:"bold",children:"ðŸ“… Calendario Semanal"}),e.jsxs(n,{variant:"body2",sx:{opacity:.9},children:[fe[0]," - ",fe[6]]})]}),e.jsx(a,{sx:{display:"flex",minHeight:600},children:fe.map((r,t)=>{const i=$(r),s=i.toLocaleDateString("es-ES",{weekday:"long"}),S=i.getDate(),u=i.toLocaleDateString("es-ES",{month:"short"}),h=Ke[r]||[],b=r===new Date().toISOString().split("T")[0];return e.jsxs(a,{sx:{flex:1,borderRight:t<6?"1px solid rgba(0,0,0,0.1)":"none",cursor:"pointer",transition:"all 0.3s ease","&:hover":{bgcolor:w("#1976d2",.05)},display:"flex",flexDirection:"column"},onClick:()=>Le(r),children:[e.jsxs(a,{sx:{background:sr(t,b),color:"white",p:b?3:2,textAlign:"center",position:"relative",minHeight:b?140:100},children:[e.jsx(n,{variant:b?"h6":"body2",fontWeight:"bold",sx:{textTransform:"capitalize"},children:s}),e.jsx(n,{variant:b?"h2":"h4",fontWeight:"bold",sx:{my:b?1:0},children:S}),e.jsx(n,{variant:b?"body1":"caption",sx:{opacity:.9},children:u}),b&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,mt:1},children:[e.jsx(Ue,{sx:{fontSize:20}}),e.jsx(n,{variant:"body1",sx:{fontWeight:"bold"},children:"HOY"}),e.jsx(Ue,{sx:{fontSize:20}})]})]}),e.jsx(a,{sx:{p:1,flex:1,display:"flex",flexDirection:"column",gap:1},children:h.length===0?e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,color:"text.secondary"},children:[e.jsx(n,{variant:"body2",sx:{mb:1},children:"Sin tareas"}),e.jsx(v,{size:"small",variant:"outlined",startIcon:e.jsx(q,{}),onClick:y=>{y.stopPropagation(),B(r)},sx:{borderRadius:2},children:"Agregar"})]}):e.jsxs(e.Fragment,{children:[h.map((y,Ce)=>e.jsx(Y,{in:!0,style:{transitionDelay:`${Ce*100}ms`},children:e.jsx(Z,{sx:{p:1,borderRadius:2,borderLeft:`4px solid ${T(y.prioridad)}`,bgcolor:T(y.prioridad),color:"white",cursor:"pointer",transition:"all 0.2s ease","&:hover":{transform:"translateX(4px)",boxShadow:"0 4px 12px rgba(0,0,0,0.25)",filter:"brightness(1.1)"},minHeight:50,display:"flex",alignItems:"center"},onClick:cr=>{cr.stopPropagation(),Le(r)},children:e.jsxs(a,{sx:{flex:1},children:[e.jsx(n,{variant:"body2",fontWeight:"bold",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"0.85rem"},children:y.titulo}),y.tipo&&e.jsx(n,{variant:"caption",sx:{opacity:.9,fontSize:"0.7rem",display:"block"},children:y.tipo.nombre_tipo})]})})},y.id)),e.jsx(v,{size:"small",variant:"text",startIcon:e.jsx(q,{}),onClick:y=>{y.stopPropagation(),B(r)},sx:{borderRadius:2,color:"#1976d2","&:hover":{bgcolor:w("#1976d2",.1)},mt:"auto"},children:"Agregar"})]})})]},r)})})]})}),(d==="mes"||d==="todas")&&e.jsx(V,{in:!0,children:e.jsx(a,{children:A.length===0?e.jsxs(U,{sx:{p:6,textAlign:"center",borderRadius:3,background:"linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%)"},children:[e.jsx(n,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"ðŸ“ No hay tareas que mostrar"}),e.jsx(n,{color:"text.secondary",sx:{mb:3},children:d==="mes"?"No se encontraron tareas para este mes":"No se encontraron tareas"})]}):e.jsxs(U,{sx:{borderRadius:3,overflow:"hidden"},children:[e.jsxs(a,{sx:{background:"linear-gradient(90deg, #1976d2 0%, #2196f3 100%)",color:"white",p:2,textAlign:"center"},children:[e.jsxs(n,{variant:"h5",fontWeight:"bold",children:["ðŸ“‹ ",d==="mes"?"Tareas del Mes":"Todas las Tareas"]}),e.jsxs(n,{variant:"body2",sx:{opacity:.9},children:[A.length," tareas encontradas"]})]}),e.jsx(Sr,{disablePadding:!0,children:A.map((r,t)=>e.jsx(Y,{in:!0,style:{transitionDelay:`${t*50}ms`},children:e.jsxs(a,{children:[e.jsxs(kr,{sx:{py:2,px:3,borderLeft:`6px solid ${T(r.prioridad)}`,"&:hover":{bgcolor:w(T(r.prioridad),.05)}},children:[e.jsx($r,{children:e.jsx(le,{sx:{bgcolor:T(r.prioridad),color:"white"},children:r.prioridad==="alta"?e.jsx(Rr,{}):r.prioridad==="media"?e.jsx(zr,{}):e.jsx(Vr,{})})}),e.jsx(Ar,{primary:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",mb:1},children:[e.jsx(n,{variant:"h6",fontWeight:"bold",children:r.titulo}),e.jsx(C,{label:r.prioridad.toUpperCase(),size:"small",sx:{bgcolor:T(r.prioridad),color:"white",fontWeight:"bold"}})]}),secondary:e.jsxs(a,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap",mb:1},children:[e.jsx(C,{icon:e.jsx(Ve,{fontSize:"small"}),label:r.fecha,size:"small",variant:"outlined",color:"primary"}),r.company&&e.jsx(C,{icon:e.jsx(we,{fontSize:"small"}),label:r.company.name,size:"small",variant:"outlined",color:"primary"}),r.tipo&&e.jsx(C,{icon:e.jsx($e,{fontSize:"small"}),label:r.tipo.nombre_tipo,size:"small",variant:"outlined",color:"primary"})]}),r.descripcion&&e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:1},children:r.descripcion}),r.asignados.length>0&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e.jsx(n,{variant:"body2",color:"text.secondary",children:"Asignado a:"}),r.asignados.map(i=>e.jsx(C,{avatar:e.jsx(le,{sx:{bgcolor:je(i.user_name)},children:be(i.user_name)}),label:i.user_name,size:"small",variant:"outlined"},i.user_id))]})]})}),e.jsx(Ir,{children:e.jsxs(a,{sx:{display:"flex",gap:1},children:[e.jsx(G,{title:"Editar tarea",children:e.jsx(F,{onClick:()=>Pe(r),color:"primary",sx:{bgcolor:w("#1976d2",.1),"&:hover":{bgcolor:w("#1976d2",.2)}},children:e.jsx(Ee,{})})}),e.jsx(G,{title:"Eliminar tarea",children:e.jsx(F,{onClick:()=>Oe(r.id),color:"error",sx:{bgcolor:w("#f44336",.1),"&:hover":{bgcolor:w("#f44336",.2)}},children:e.jsx(Ge,{})})})]})})]}),t<A.length-1&&e.jsx(_r,{variant:"inset",component:"li"})]})},r.id))})]})})}),d==="dia"&&e.jsx(V,{in:!0,children:e.jsx(a,{children:Object.keys(se).length===0?e.jsxs(U,{sx:{p:6,textAlign:"center",borderRadius:3,background:"linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%)"},children:[e.jsx(n,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"ðŸ“ No hay tareas para este dÃ­a"}),e.jsxs(n,{color:"text.secondary",sx:{mb:3},children:["No se encontraron tareas programadas para el ",z]}),e.jsx(v,{variant:"contained",startIcon:e.jsx(q,{}),onClick:()=>B(z||void 0),sx:{borderRadius:2,background:"linear-gradient(45deg, #1976d2 0%, #0d47a1 100%)"},children:"Crear primera tarea"})]}):Object.entries(se).map(([r,t],i)=>e.jsx(V,{in:!0,timeout:300+i*100,children:e.jsxs(Z,{sx:{mb:3,borderRadius:3,overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,background:"linear-gradient(135deg, #1976d2 0%, #2196f3 100%)",color:"white",cursor:"pointer","&:hover":{background:"linear-gradient(135deg, #1565c0 0%, #1976d2 100%)"},transition:"background 0.3s ease"},onClick:()=>er(r),children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(le,{sx:{bgcolor:"white",color:je(r),fontWeight:"bold",width:48,height:48},children:be(r)}),e.jsxs(a,{children:[e.jsx(n,{variant:"h5",fontWeight:"bold",children:r}),e.jsxs(n,{variant:"body1",sx:{opacity:.9},children:[t.length," ",t.length===1?"tarea asignada":"tareas asignadas"]})]})]}),e.jsx(F,{sx:{color:"white"},children:De[r]?e.jsx(mr,{}):e.jsx(pr,{})})]}),e.jsx(Lr,{in:De[r]??!0,children:e.jsx(a,{sx:{p:2},children:t.map((s,S)=>e.jsx(Y,{in:!0,style:{transitionDelay:`${S*100}ms`},children:e.jsx(Z,{sx:{mb:2,borderRadius:2,border:"1px solid rgba(0,0,0,0.1)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},borderLeft:`6px solid ${T(s.prioridad)}`},children:e.jsxs(a,{sx:{p:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2},children:[e.jsxs(a,{sx:{flexGrow:1},children:[e.jsx(n,{variant:"h6",fontWeight:"bold",sx:{mb:1},children:s.titulo}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e.jsx(C,{label:s.prioridad.toUpperCase(),sx:{bgcolor:T(s.prioridad),color:"white",fontWeight:"bold"}}),e.jsx(C,{icon:e.jsx(Ve,{fontSize:"small"}),label:s.fecha,variant:"outlined",color:"primary"}),s.tipo&&e.jsx(C,{icon:e.jsx($e,{fontSize:"small"}),label:s.tipo.nombre_tipo,variant:"outlined",color:"primary"}),s.company&&e.jsx(C,{icon:e.jsx(we,{fontSize:"small"}),label:s.company.name,variant:"outlined",color:"primary"})]})]}),e.jsxs(a,{sx:{display:"flex",gap:1,ml:2},children:[e.jsx(G,{title:"Editar tarea",children:e.jsx(F,{onClick:()=>Pe(s),color:"primary",sx:{bgcolor:w("#1976d2",.1),"&:hover":{bgcolor:w("#1976d2",.2)}},children:e.jsx(Ee,{})})}),e.jsx(G,{title:"Eliminar tarea",children:e.jsx(F,{onClick:()=>Oe(s.id),color:"error",sx:{bgcolor:w("#f44336",.1),"&:hover":{bgcolor:w("#f44336",.2)}},children:e.jsx(Ge,{})})})]})]}),e.jsxs(a,{sx:{p:2,bgcolor:w("#1976d2",.05),borderRadius:2,borderLeft:"4px solid #1976d2",display:"flex",flexDirection:"column",gap:1},children:[s.descripcion&&e.jsxs(n,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"DescripciÃ³n:"})," ",s.descripcion]}),s.asignados.map(u=>e.jsxs(a,{sx:{ml:1,mb:1},children:[ve===u.id?e.jsxs(ke,{direction:"row",spacing:2,alignItems:"center",children:[e.jsxs(P,{component:"fieldset",size:"small",children:[e.jsxs(O,{row:!0,value:oe.estado,onChange:h=>ne(b=>({...b,estado:h.target.value})),children:[e.jsx(j,{value:"pendiente",control:e.jsx(f,{}),label:"Pendiente"}),e.jsx(j,{value:"en_revision",control:e.jsx(f,{}),label:"En revisiÃ³n"}),e.jsx(j,{value:"publicada",control:e.jsx(f,{}),label:"Publicada"})]}),e.jsx(g,{fullWidth:!0,size:"small",label:"Detalle",value:oe.detalle,onChange:h=>ne(b=>({...b,detalle:h.target.value})),sx:{mt:2}})]}),e.jsx(F,{size:"small",onClick:lr,children:e.jsx(Fe,{fontSize:"small"})}),e.jsx(F,{size:"small",onClick:nr,children:e.jsx(Ie,{fontSize:"small"})})]}):e.jsxs(ke,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(n,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Estado:"})," ",u.estado]}),e.jsx(F,{size:"small",onClick:()=>or(u),children:e.jsx(Ee,{fontSize:"small"})})]}),u.detalle&&e.jsxs(n,{variant:"body2",color:"text.secondary",sx:{ml:4,mt:.5},children:[e.jsx("strong",{children:"Detalle:"})," ",u.detalle]})]},u.id))]})]})})},s.id))})})]})},r))})}),d==="dia"&&!Re&&!pe&&e.jsx(Pr,{color:"primary","aria-label":"Nueva tarea rÃ¡pida",onClick:()=>B(z||void 0),sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(45deg, #4caf50 0%, #2e7d32 100%)","&:hover":{background:"linear-gradient(45deg, #388e3c 0%, #1b5e20 100%)",transform:"scale(1.1)"},transition:"all 0.3s ease",zIndex:1e3},children:e.jsx(q,{})})]})]})}export{va as default};
