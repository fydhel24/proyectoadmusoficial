import{r as u,a as h,j as r,$ as v}from"./app-DS3uoOND.js";import{A as w,B as z}from"./app-layout-dGixMl-5.js";import{d as E}from"./debounce-Be36O1Ab.js";import{B as n}from"./Box-CrJgDB4g.js";import{C as f}from"./Container-DcVe4QuS.js";import{T as t,P as S}from"./Typography-Cn8qhNN2.js";import{G as b}from"./Grid-COIRCFTv.js";import{C as T}from"./Card-CU0A35jw.js";import{C as R}from"./CardContent-BPx254SV.js";import{C as d}from"./Chip-37PunMoz.js";import{C as W}from"./CalendarToday-DJJoVJy5.js";import{R as F,a as m}from"./RadioGroup-CJnKYZoz.js";import{F as p}from"./FormControlLabel-DhPmX9vG.js";import{T as M}from"./TextField-v1JzYI7D.js";import{a as c}from"./DefaultPropsProvider-C7SiBE39.js";import{f as L}from"./format-C6wJrPT2.js";import"./button-Kx2Zvocp.js";import"./clsx-B-dksMZM.js";import"./avatar-DFuxCuZM.js";import"./createLucideIcon-DKQO-RzO.js";import"./index-CYi7GZxD.js";import"./index-p19kejRW.js";import"./index-C0VGp2n2.js";import"./settings-BD-k1jiO.js";import"./app-logo-icon-CG32F8XV.js";import"./createSvgIcon-Calpj8hy.js";import"./useThemeProps-DnhBS-Eg.js";import"./getThemeProps-CXW8XG3i.js";import"./isMuiElement-DyoSLfDx.js";import"./useSlot-DFNZbsPJ.js";import"./useTimeout-MaWeZhHA.js";import"./ButtonBase-Ai_L0S2Q.js";import"./SwitchBase-gK4QOO3w.js";import"./Select-DOfJ3Geg.js";import"./index-Htz8HIlZ.js";import"./useSlotProps-B3LOQJQT.js";import"./List-BlyVhjTx.js";import"./Fade-DOI0Eqcg.js";import"./Modal-BUVjLBoZ.js";import"./Portal-BW3CIyqt.js";import"./Grow-DzyevDEk.js";import"./useControlled-DphJ1wc8.js";import"./useId-JcoErVa5.js";import"./FormGroup-w4YB1JKD.js";const P=[{title:"Mis Tareas",href:"/pasante/mistareas"}],g=i=>{if(!i)return"#9E9E9E";switch(i.toLowerCase()){case"alta":return"#FF1744";case"media":return"#FF9100";case"baja":return"#00E676";default:return"#9E9E9E"}},A=i=>{if(!i)return"default";switch(i.toLowerCase()){case"completada":return"success";case"en progreso":return"primary";case"pendiente":return"warning";default:return"default"}};function Er({tareas:i}){const[l,x]=u.useState(i),j=u.useCallback(E(async(e,o)=>{var s;try{await h.patch(`/tareas/actualizar-estado/${e}`,{detalle:o,estado:((s=l.find(a=>a.id===e))==null?void 0:s.estado)||"pendiente"})}catch(a){console.error("Error al guardar el detalle:",a)}},1e3),[l]),y=async(e,o)=>{var s;try{await h.patch(`/tareas/actualizar-estado/${e}`,{estado:o,detalle:((s=l.find(a=>a.id===e))==null?void 0:s.detalle)||""}),x(l.map(a=>a.id===e?{...a,estado:o}:a))}catch(a){console.error("Error al actualizar el estado:",a)}},C=(e,o)=>{x(l.map(s=>s.id===e?{...s,detalle:o}:s)),j(e,o)};return r.jsxs(w,{breadcrumbs:P,children:[r.jsx(v,{title:"Mis Tareas"}),r.jsx(n,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #0d47a1 100%)",color:"white",py:3,position:"relative",overflow:"hidden"},children:r.jsxs(f,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:[r.jsx(t,{variant:"h4",className:"mb-6",fontWeight:"bold",children:"ğŸ“‹ Mis Tareas Asignadas"}),r.jsx(t,{variant:"subtitle1",sx:{opacity:.9},children:"Gestiona y actualiza el estado de tus tareas"})]})}),r.jsxs(f,{maxWidth:"xl",sx:{py:4},children:[r.jsx(b,{container:!0,spacing:3,children:l.map(e=>r.jsx(b,{item:!0,xs:12,md:6,lg:4,children:r.jsx(T,{sx:{height:"100%",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0,0,0,0.15)"},borderRadius:3,overflow:"hidden",border:"1px solid rgba(0,0,0,0.1)",borderLeft:`6px solid ${g(e.tarea.prioridad)}`},children:r.jsxs(R,{sx:{p:3},children:[r.jsxs(n,{className:"flex justify-between items-start mb-4",children:[r.jsx(t,{variant:"h6",className:"font-bold",gutterBottom:!0,children:e.tarea.titulo}),r.jsx(d,{label:e.tarea.prioridad,sx:{bgcolor:g(e.tarea.prioridad),color:"white",fontWeight:"bold"},size:"small"})]}),r.jsx(t,{className:"mb-3",sx:{color:"text.secondary",p:2,bgcolor:c("#1976d2",.05),borderRadius:2,borderLeft:"4px solid #1976d2"},children:e.tarea.descripcion}),e.tarea.company&&r.jsxs(n,{sx:{mb:2},children:[r.jsxs(n,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[r.jsx(d,{icon:r.jsx(z,{fontSize:"small"}),label:e.tarea.company.name,variant:"outlined",color:"primary",size:"small"}),r.jsx(d,{icon:r.jsx(W,{fontSize:"small"}),label:L(new Date(e.fecha),"dd/MM/yyyy"),variant:"outlined",color:"primary",size:"small"})]}),r.jsxs(t,{variant:"body2",sx:{mt:1,color:"text.secondary",fontSize:"0.875rem"},children:["ğŸ“ ",e.tarea.company.ubicacion]}),r.jsxs(t,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.875rem"},children:["ğŸ¢ ",e.tarea.company.direccion]})]}),r.jsx(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,pt:2,borderTop:"1px solid rgba(0,0,0,0.1)"},children:r.jsx(d,{label:e.estado||"Sin estado",color:A(e.estado),size:"small",sx:{fontWeight:"medium"}})}),e.detalle&&r.jsxs(t,{sx:{mt:2,fontSize:"0.875rem",fontStyle:"italic",color:"text.secondary",p:1.5,bgcolor:c("#000",.03),borderRadius:1},children:["â„¹ï¸ ",e.detalle]}),r.jsxs(n,{sx:{mt:3,p:2,bgcolor:c("#1976d2",.05),borderRadius:2,border:"1px solid",borderColor:c("#1976d2",.1)},children:[r.jsx(t,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold",color:"primary.main"},children:"Estado de la tarea"}),r.jsxs(F,{row:!0,value:e.estado||"pendiente",onChange:o=>y(e.id,o.target.value),sx:{mb:2},children:[r.jsx(p,{value:"completada",control:r.jsx(m,{color:"success"}),label:"Completada"}),r.jsx(p,{value:"en progreso",control:r.jsx(m,{color:"primary"}),label:"En Progreso"}),r.jsx(p,{value:"pendiente",control:r.jsx(m,{color:"warning"}),label:"Pendiente"})]}),r.jsx(M,{fullWidth:!0,multiline:!0,rows:2,variant:"outlined",placeholder:"Agregar detalles o comentarios sobre la tarea...",value:e.detalle||"",onChange:o=>C(e.id,o.target.value),sx:{"& .MuiOutlinedInput-root":{bgcolor:"white","&:hover":{borderColor:"primary.main"}}}})]})]})})},e.id))}),l.length===0&&r.jsxs(S,{sx:{p:6,textAlign:"center",borderRadius:3,background:"linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%)"},children:[r.jsx(t,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"ğŸ“ No tienes tareas asignadas"}),r.jsx(t,{color:"text.secondary",children:"Por el momento no hay tareas asignadas para ti"})]})]})]})}export{Er as default};
