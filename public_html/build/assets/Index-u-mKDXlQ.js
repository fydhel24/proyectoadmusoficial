import{j as e,q as I,r as E}from"./app-BS78KgI9.js";import{A as P,B as z}from"./app-layout-DXAC2WAv.js";import{c as A}from"./createSvgIcon-12aY9Ngm.js";import{C as L}from"./CheckCircle-DM2WBdfF.js";import{P as R}from"./HourglassEmpty-DqHdVZqs.js";import{W as M}from"./WbSunny-BtGTupMV.js";import{u as G,T as r,P as S}from"./Typography-CcX01ihT.js";import{B as n}from"./Box-DUIKlT8z.js";import{T as N,a as U,b as v,c as _}from"./TableRow-HyuXIcfb.js";import{T as d}from"./TableCell-Bw8sPQev.js";import{S as p}from"./Stack-D-Gkkt_v.js";import{T as q}from"./Tooltip-IWvH1ko8.js";import{C as T}from"./Chip-co4ExwZU.js";import{D as H,a as J,b as O}from"./DialogTitle-DtfVYivh.js";import{G as m}from"./Grid-rYS9TwvK.js";import{D as V}from"./Divider-B8ontJjP.js";import{D as X}from"./DialogActions-DeDSLuz4.js";import{B as F}from"./Button-DqXQBeNq.js";import"./button-oAFDZpeO.js";import"./clsx-B-dksMZM.js";import"./avatar-BWsYigjR.js";import"./createLucideIcon-D-6WHVmO.js";import"./index-Qic-rRyU.js";import"./index--gTV4hvx.js";import"./index-DBd0QHkk.js";import"./settings-DV0Bctrx.js";import"./app-logo-icon-GUvtkzgu.js";import"./DefaultPropsProvider-Dk6HDr1M.js";import"./useThemeProps-hgA8uWgq.js";import"./getThemeProps--CMPU-9n.js";import"./index-BZb61BhM.js";import"./useSlot-DerHgNuN.js";import"./useTimeout-oSTK7AfQ.js";import"./useControlled-wSjlUgLl.js";import"./useId-DZf0Wwsg.js";import"./Fade-FGt6R6vx.js";import"./Grow-CxMvSjLL.js";import"./Popper-DnDfq_y6.js";import"./Portal-CCwm8dqL.js";import"./useSlotProps-Cf7xKLKx.js";import"./ButtonBase-DLk8W6EL.js";import"./Modal-BH4F5tNL.js";import"./isMuiElement-w8fP3KeW.js";import"./dividerClasses-893dsvZ6.js";import"./CircularProgress-DHT395bS.js";const K=A(e.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"})),_e=()=>{var g;const t=G(),{datosPorEmpresa:k,diasSemana:x}=I().props,[o,h]=E.useState(null),j=i=>{switch(i){case"alta":return t.palette.error.main;case"media":return t.palette.warning.main;case"baja":return t.palette.success.main;default:return t.palette.grey[500]}},f=["linear-gradient(135deg, #e3f2fd, #bbdefb)","linear-gradient(135deg, #fce4ec, #f8bbd0)","linear-gradient(135deg, #ede7f6, #d1c4e9)","linear-gradient(135deg, #f1f8e9, #dcedc8)","linear-gradient(135deg, #fff3e0, #ffe0b2)","linear-gradient(135deg, #e0f7fa, #b2ebf2)"],u=()=>{h(null)},D=i=>{switch(i){case"pendiente":return e.jsx(R,{fontSize:"small",sx:{ml:.5}});case"en_proceso":return e.jsx(K,{fontSize:"small",sx:{ml:.5}});case"completada":return e.jsx(L,{fontSize:"small",sx:{ml:.5}});default:return null}},W={monday:"Lunes",tuesday:"Martes",wednesday:"MiÃ©rcoles",thursday:"Jueves",friday:"Viernes",saturday:"SÃ¡bado",sunday:"Domingo"};return e.jsxs(P,{children:[e.jsxs(n,{p:3,children:[e.jsx(r,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"ðŸ“… Calendario Semanal por Empresa"}),e.jsx(S,{elevation:3,sx:{overflowX:"auto",borderRadius:3},children:e.jsxs(N,{children:[e.jsx(U,{children:e.jsxs(v,{sx:{backgroundColor:t.palette.grey[100]},children:[e.jsx(d,{children:e.jsxs(p,{direction:"row",alignItems:"center",gap:1,children:[e.jsx(z,{color:"action"}),e.jsx("strong",{children:"Empresa"})]})}),x.map((i,a)=>e.jsx(d,{children:e.jsxs(p,{direction:"row",alignItems:"center",gap:1,children:[e.jsx(M,{fontSize:"small"}),e.jsxs(n,{children:[e.jsx(r,{fontWeight:"bold",children:W[i.nombre.toLowerCase()]??i.nombre}),e.jsx(r,{variant:"caption",children:i.fecha})]})]})},a))]})}),e.jsx(_,{children:k.map((i,a)=>e.jsxs(v,{sx:{background:f[a%f.length],transition:"background 0.3s ease-in-out"},children:[e.jsx(d,{sx:{fontWeight:"bold"},children:i.empresa.name??"Empresa sin nombre"}),x.map((w,B)=>{const b=i.tareas[w.fecha]||[];return e.jsx(d,{children:b.length>0?e.jsx(p,{spacing:.5,children:b.slice().sort((s,c)=>{const l={alta:1,media:2,baja:3};return(l[s.prioridad]||4)-(l[c.prioridad]||4)}).map(s=>{var c,l,y,C;return e.jsx(q,{title:((l=(c=s.asignaciones)==null?void 0:c[0])==null?void 0:l.estado)??"Sin estado",children:e.jsx(T,{icon:D((C=(y=s.asignaciones)==null?void 0:y[0])==null?void 0:C.estado),label:s.titulo,size:"small",onClick:()=>h(s),sx:{backgroundColor:j(s.prioridad),color:"#fff",fontWeight:"bold",cursor:"pointer",pl:1}},s.id)})})}):e.jsx(r,{variant:"caption",color:"text.secondary",children:"â€”"})},B)})]},a))})]})})]}),e.jsxs(H,{open:!!o,onClose:u,maxWidth:"sm",fullWidth:!0,children:[e.jsx(J,{sx:{fontWeight:"bold",backgroundColor:t.palette.primary.main,color:"#fff"},children:"ðŸ“ Detalles de la Tarea"}),e.jsx(O,{dividers:!0,sx:{p:3},children:o&&e.jsxs(n,{display:"flex",flexDirection:"column",gap:3,children:[e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"TÃ­tulo"}),e.jsx(r,{variant:"body1",fontWeight:"bold",children:o.titulo})]}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsxs(m,{item:!0,xs:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Prioridad"}),e.jsx(T,{label:o.prioridad.toUpperCase(),size:"small",sx:{fontWeight:"bold",color:"#fff",backgroundColor:j(o.prioridad)}})]}),e.jsxs(m,{item:!0,xs:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Tipo"}),e.jsx(r,{children:((g=o.tipo)==null?void 0:g.nombre_tipo)??"No especificado"})]})]}),e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"DescripciÃ³n"}),e.jsx(r,{children:o.descripcion||"Sin descripciÃ³n"})]}),e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"DescripciÃ³n"}),e.jsx(r,{children:o.descripcion||"Sin descripciÃ³n"})]}),e.jsx(V,{}),e.jsxs(n,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"ðŸ‘¤ Asignaciones"}),o.asignaciones&&o.asignaciones.length>0?e.jsx(p,{spacing:2,children:o.asignaciones.map(i=>{var a;return e.jsxs(S,{variant:"outlined",sx:{p:2,borderRadius:2,backgroundColor:t.palette.grey[50]},children:[e.jsxs(r,{children:[e.jsx("strong",{children:"Usuario:"})," ",((a=i.user)==null?void 0:a.name)??"Sin asignar"]}),e.jsxs(r,{children:[e.jsx("strong",{children:"Estado:"})," ",i.estado]}),e.jsxs(r,{children:[e.jsx("strong",{children:"Detalle:"})," ",i.detalle||"Sin detalle"]})]},i.id)})}):e.jsx(r,{color:"text.secondary",children:"No hay asignaciones para esta tarea."})]})]})}),e.jsx(X,{sx:{p:2},children:e.jsx(F,{variant:"contained",color:"primary",onClick:u,children:"Cerrar"})})]})]})};export{_e as default};
