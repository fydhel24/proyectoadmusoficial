import{r as i,q as Ve,v as er,a as j,j as e,$ as xe}from"./app-iQxetvcT.js";import{A as ue,c as me,d as he,b as rr,B as ar}from"./app-layout-DZNLsAUN.js";import{l as je}from"./lodash-Df330vs3.js";import{u as tr,T as p,P as ge}from"./Typography-Vu44IVe3.js";import{u as sr}from"./index-7OBKg3U7.js";import{C as Z}from"./Container-G2eoKkYg.js";import{S as fe}from"./Skeleton-ByQ9dyW8.js";import{G as n}from"./Grid-CfBvjvwC.js";import{B as o}from"./Box-F6yhJlLA.js";import{F as K}from"./Fade-Buv2aBp9.js";import{B as b}from"./Button-hUEMcK7z.js";import{A as be}from"./Add-CBCWMX5y.js";import{S as ir}from"./Slide-BCG-5WWT.js";import{A as or}from"./Alert-DZbxqEQ7.js";import{S as nr}from"./Stack-D1j1oT9l.js";import{T as h}from"./TextField-CadfSDcJ.js";import{I as lr}from"./InputAdornment-B0ocyrrl.js";import{S as dr}from"./Search-4c0MCu7S.js";import{A as R}from"./Autocomplete-K2oN1tZb.js";import{Z as Q}from"./Zoom-Bgv145aB.js";import{C as A}from"./Card-Lj3f8xs8.js";import{F as S,a as D,I as cr,S as pr}from"./Select-B2fmC2tg.js";import{R as E,a as x}from"./RadioGroup-BkqQ6-l3.js";import{F as u}from"./FormControlLabel-CACvM62A.js";import{C as ye}from"./Cancel-I5pBkqLt.js";import{S as ve}from"./Save-BHjgicSn.js";import{A as xr}from"./Avatar-DlpHK3OL.js";import{I as Ce}from"./IconButton-oUlJzW07.js";import{C as Se}from"./Collapse-BcLE16-x.js";import{C as P}from"./Chip-CJ-DR8Rk.js";import{C as ur}from"./CalendarToday-DdI7J9tV.js";import{M as mr}from"./MenuItem-C6-0h0yb.js";import{F as hr}from"./Fab-CzWeFSdr.js";import{b as L}from"./DefaultPropsProvider-ByswQ0ug.js";import"./button-Br5uzfA2.js";import"./clsx-B-dksMZM.js";import"./avatar-BfsoZtdh.js";import"./createLucideIcon-DcDr_LZ4.js";import"./index-xUTrLbSm.js";import"./index-STaUq66L.js";import"./index-HkiN5Yj1.js";import"./settings-CpjDLTZ2.js";import"./app-logo-icon-4ncQ7Ez_.js";import"./createSvgIcon-ClVcefPA.js";import"./createSimplePaletteValueFilter-DBX30MBl.js";import"./getThemeProps-CQORG8wP.js";import"./useTimeout-BYDghXNP.js";import"./useThemeProps-BAPtVuKn.js";import"./isMuiElement-BAKBvZFj.js";import"./TransitionGroupContext-BXJRKgr0.js";import"./useId-CJlvviJa.js";import"./ButtonBase-Dne6GeZ5.js";import"./CircularProgress-BqVLwA-j.js";import"./debounce-Be36O1Ab.js";import"./Modal-DA_teWuH.js";import"./ownerDocument-DW-IO8s5.js";import"./useSlot-Ea-Y7OKI.js";import"./Portal-Cwx4ynoN.js";import"./Close-Dy_oiFhm.js";import"./useControlled-BkHvu2fc.js";import"./usePreviousProps-BKfNJyla.js";import"./Popper-CEk6kpP_.js";import"./index-BXx7jxtS.js";import"./useSlotProps-DdKiwNsd.js";import"./List-Dkqnlm7C.js";import"./Grow-DFUA3ued.js";import"./SwitchBase-CZXoRgai.js";import"./FormGroup-Co6KwWpb.js";import"./listItemTextClasses-Biqf2cqH.js";import"./dividerClasses-_g5ZrvsR.js";function Aa(){var pe;const[w,we]=i.useState([]),[J,Ee]=i.useState([]),[T,Te]=i.useState([]),[ke,_e]=i.useState([]),[Fe,X]=i.useState(!0),[U,g]=i.useState(null),[k,We]=i.useState(""),[jr,gr]=i.useState(""),[_,Ie]=i.useState(""),[Y,N]=i.useState(!1),[V,F]=i.useState("no"),[B,ee]=i.useState(null),[l,y]=i.useState({titulo:"",prioridad:"",descripcion:"",fecha:"",tipo_id:"",company_id:""}),[re,ae]=i.useState("no"),[ze,te]=i.useState(null),[W,M]=i.useState(null),[se,ie]=i.useState({}),[oe,Re]=i.useState({}),[Ae,C]=i.useState({}),[De,O]=i.useState(null),[Pe,ne]=i.useState(""),Le=tr();sr(Le.breakpoints.down("sm"));const{auth:$}=Ve().props,I=(pe=$==null?void 0:$.user)==null?void 0:pe.id,{data:v,setData:f,post:Ue,processing:G,errors:c,reset:H}=er({titulo:"",prioridad:"",descripcion:"",fecha:new Date().toISOString().split("T")[0],tipo_id:"",company_id:""}),m=i.useCallback(async()=>{X(!0),g(null);try{const[r,a,t,s]=await Promise.all([j.get("/tareas-con-asignaciones"),j.get("/api/tipos"),j.get("/api/companies"),j.get("/api/pasantes")]);we(r.data),Ee(a.data),Te(t.data),_e(s.data.data)}catch(r){console.error("Error al cargar datos:",r),g("Hubo un error al cargar los datos. Por favor, intenta de nuevo.")}finally{X(!1)}},[]),Ne=i.useCallback(async(r,a)=>{C(t=>({...t,[r]:!0}));try{await j.patch(`/asignaciones/${r}`,{estado:a}),await m()}catch(t){console.error("Error al actualizar estado:",t),g("No se pudo actualizar el estado")}finally{C(t=>({...t,[r]:!1}))}},[m]);i.useCallback(je.debounce(async(r,a)=>{C(t=>({...t,[r]:!0}));try{await j.patch(`/asignaciones/${r}`,{detalle:a}),await m()}catch(t){console.error("Error al actualizar detalle:",t),g("No se pudo actualizar el detalle")}finally{C(t=>({...t,[r]:!1}))}},1e3),[m]);const Be=i.useCallback(je.debounce(async(r,a)=>{C(t=>({...t,[r]:!0}));try{await j.patch(`/tareas/${r}/descripcion`,{descripcion:a}),await m(),O(null)}catch(t){console.error("Error al actualizar descripci√≥n:",t),g("No se pudo actualizar la descripci√≥n")}finally{C(t=>({...t,[r]:!1}))}},1e3),[m]),le=i.useMemo(()=>{const r=new Date().toISOString().split("T")[0];let a=w.filter(t=>{const s=t.fecha===r,q=t.asignados.some(d=>d.user_id===I);return s&&q});return k&&(a=a.filter(t=>t.titulo.toLowerCase().includes(k.toLowerCase()))),_&&(a=a.filter(t=>t.prioridad===_)),a},[w,k,_,I]),z=i.useMemo(()=>{const r={};return le.forEach(a=>{const t=a.asignados.find(s=>s.user_id===I);if(t){const s=t.user_name;r[s]||(r[s]=[]),r[s].push(a)}}),r},[le,I]);i.useMemo(()=>{const r=new Set;return w.forEach(a=>{a.asignados.forEach(t=>{r.add(t.user_name)})}),Array.from(r).sort()},[w]),i.useEffect(()=>{m()},[m]),i.useEffect(()=>{const r={};Object.keys(z).forEach(a=>{r[a]=!0}),ie(r)},[z]);const Me=r=>{ie(a=>({...a,[r]:!a[r]}))},Oe=r=>{Re(a=>({...a,[r]:!a[r]}))},$e=()=>{ee(null),y({titulo:"",prioridad:"",descripcion:"",fecha:"",tipo_id:"",company_id:""}),ae("no")},Ge=async()=>{if(l.titulo.trim())try{const r={...l,tipo_id:l.tipo_id?Number(l.tipo_id):null,company_id:l.company_id?Number(l.company_id):null};await j.put(`/tareas/${B}`,r),ee(null),m()}catch(r){console.error("Error al actualizar tarea:",r),g("Error al actualizar la tarea")}},de=()=>{N(!0),H(),f({titulo:"",prioridad:"",descripcion:"",fecha:new Date().toISOString().split("T")[0],tipo_id:"",company_id:""}),F("no")},He=()=>{N(!1),H(),F("no")},qe=r=>{r.preventDefault(),Ue("/tareas-personales",{onSuccess:()=>{N(!1),H(),F("no"),m()},onError:a=>{console.error("Validation errors:",a),g("Error al crear la tarea. Verifica los datos ingresados.")}})},Ze=async r=>{if(W)try{const a=w.find(s=>s.id===r);if(!a||!a.asignados.length)return;const t=a.asignados[0].id;await j.delete(`/asignaciones/reasignar/${t}`,{data:{user_id:W}}).then(s=>{console.log(s.data.message)}).catch(s=>{console.error("Error al reasignar:",s)}),te(null),M(null),m()}catch(a){console.error("Error al cambiar pasante:",a),g("Error al cambiar el pasante")}},Ke=r=>{O(r.id),ne(r.descripcion||"")},ce=r=>{switch(r.toLowerCase()){case"alta":return"#FF1744";case"media":return"#FF9100";case"baja":return"#00E676";default:return"#9E9E9E"}},Qe=r=>{const a=["#1976d2","#1565c0","#0d47a1","#2196f3","#0288d1","#01579b","#03a9f4","#00b0ff","#0091ea","#3f51b5"],t=r.charCodeAt(0)%a.length;return a[t]},Je=r=>r.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2),Xe=`
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    `;return Fe?e.jsxs(ue,{breadcrumbs:[{title:"Tareas",href:"/tareas"}],children:[e.jsx(xe,{title:"Tareas"}),e.jsxs(Z,{maxWidth:"xl",sx:{py:4},children:[e.jsx(fe,{variant:"rectangular",height:60,sx:{mb:2,borderRadius:1}}),e.jsx(n,{container:!0,spacing:2,children:[...Array(7)].map((r,a)=>e.jsx(n,{item:!0,xs:12,sm:6,md:!0,children:e.jsx(fe,{variant:"rectangular",height:400,sx:{borderRadius:2}})},a))})]})]}):e.jsxs(ue,{breadcrumbs:[{title:"Tareas",href:"/tareas"}],children:[e.jsx(xe,{title:"Tareas"}),e.jsx("style",{children:Xe}),e.jsx(o,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #0d47a1 100%)",color:"white",py:3,position:"relative",overflow:"hidden"},children:e.jsx(Z,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:e.jsx(K,{in:!0,timeout:800,children:e.jsxs(o,{children:[e.jsx(p,{variant:"h4",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:"üìÖ Mis Tareas de Hoy"}),e.jsx(p,{variant:"subtitle1",sx:{opacity:.9},children:"Gestiona y edita tus tareas personales del d√≠a"}),e.jsxs(o,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[e.jsx(o,{sx:{flexGrow:1}}),e.jsx(o,{sx:{display:"flex",gap:1},children:e.jsx(b,{variant:"contained",onClick:de,startIcon:e.jsx(be,{}),sx:{borderRadius:2,background:"linear-gradient(45deg, #1976d2 0%, #0d47a1 100%)","&:hover":{background:"linear-gradient(45deg, #1565c0 0%, #0a3880 100%)"},px:3,py:1},children:"Registrar Tarea Realizada Hoy"})})]})]})})})}),e.jsxs(Z,{maxWidth:"xl",sx:{py:3},children:[U&&e.jsx(ir,{direction:"down",in:!!U,children:e.jsx(or,{severity:"error",sx:{mb:3,borderRadius:2},action:e.jsx(b,{color:"inherit",size:"small",onClick:m,children:"Reintentar"}),children:U})}),e.jsx(ge,{elevation:0,sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)",border:"1px solid rgba(0,0,0,0.05)",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:e.jsx(nr,{spacing:3,children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(h,{fullWidth:!0,placeholder:"Buscar tareas...",value:k,onChange:r=>We(r.target.value),InputProps:{startAdornment:e.jsx(lr,{position:"start",children:e.jsx(dr,{})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(R,{options:["alta","media","baja"],getOptionLabel:r=>r.charAt(0).toUpperCase()+r.slice(1),value:_||null,onChange:(r,a)=>Ie(a||""),clearOnEscape:!0,sx:{minWidth:300},renderInput:r=>e.jsx(h,{...r,label:"‚ö° Filtrar por Prioridad",placeholder:"Filtrar por prioridad",fullWidth:!0})})})]})})}),Y&&e.jsx(Q,{in:!0,children:e.jsxs(A,{sx:{mb:3,borderRadius:3,border:"2px solid #1976d2",boxShadow:"0 6px 24px rgba(25, 118, 210, 0.15)"},children:[e.jsxs(o,{sx:{p:3,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white"},children:[e.jsx(p,{variant:"h5",fontWeight:"bold",children:"üßç‚Äç‚ôÇÔ∏è Nueva Tarea Personal"}),e.jsx(p,{variant:"body2",sx:{opacity:.9},children:"Esta tarea ser√° asignada autom√°ticamente a ti"})]}),e.jsx(o,{sx:{p:4,background:"white"},children:e.jsx("form",{onSubmit:qe,children:e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(h,{label:"üìù T√≠tulo",value:v.titulo,onChange:r=>f("titulo",r.target.value),fullWidth:!0,required:!0,error:!!c.titulo,helperText:c.titulo})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(h,{label:"üìÖ Fecha",type:"date",value:v.fecha,onChange:r=>f("fecha",r.target.value),fullWidth:!0,InputLabelProps:{shrink:!0},error:!!c.fecha,helperText:c.fecha})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(R,{options:J,getOptionLabel:r=>r.nombre,value:J.find(r=>r.id===Number(v.tipo_id))||null,onChange:(r,a)=>f("tipo_id",a?String(a.id):""),sx:{minWidth:280},renderInput:r=>e.jsx(h,{...r,label:"üè∑Ô∏è Tipo de tarea",fullWidth:!0,error:!!c.tipo_id,helperText:c.tipo_id})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(S,{component:"fieldset",children:[e.jsx(D,{children:"‚ö° Prioridad"}),e.jsxs(E,{row:!0,value:v.prioridad,onChange:r=>f("prioridad",r.target.value),children:[e.jsx(u,{value:"alta",control:e.jsx(x,{}),label:"Alta"}),e.jsx(u,{value:"media",control:e.jsx(x,{}),label:"Media"}),e.jsx(u,{value:"baja",control:e.jsx(x,{}),label:"Baja"})]}),c.prioridad&&e.jsx(p,{variant:"caption",color:"error",children:c.prioridad})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(S,{component:"fieldset",children:[e.jsx(D,{children:"üè¢ ¬øAsignar empresa?"}),e.jsxs(E,{row:!0,value:V,onChange:r=>{F(r.target.value),r.target.value==="no"&&f("company_id","")},children:[e.jsx(u,{value:"si",control:e.jsx(x,{}),label:"S√≠"}),e.jsx(u,{value:"no",control:e.jsx(x,{}),label:"No"})]})]})}),V==="si"&&e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(R,{options:T,getOptionLabel:r=>r.nombre,value:T.find(r=>r.id===Number(v.company_id))||null,onChange:(r,a)=>f("company_id",a?String(a.id):""),sx:{minWidth:300},renderInput:r=>e.jsx(h,{...r,label:"üè¢ Seleccionar Empresa",fullWidth:!0,error:!!c.company_id,helperText:c.company_id})})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(h,{label:"üìÑ Descripci√≥n",multiline:!0,rows:3,value:v.descripcion,onChange:r=>f("descripcion",r.target.value),fullWidth:!0,error:!!c.descripcion,helperText:c.descripcion})}),e.jsxs(n,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(b,{variant:"outlined",onClick:He,startIcon:e.jsx(ye,{}),sx:{borderRadius:2,px:3,py:1},disabled:G,children:"Cancelar"}),e.jsx(b,{type:"submit",variant:"contained",startIcon:e.jsx(ve,{}),disabled:G||!v.titulo.trim(),sx:{borderRadius:2,px:3,py:1,background:"linear-gradient(45deg, #1976d2 0%, #0d47a1 100%)"},children:G?"Creando...":"Crear tarea"})]})]})})})]})}),B&&e.jsx(Q,{in:!0,children:e.jsxs(A,{sx:{mb:3,borderRadius:3,border:"3px solid #FF9100",boxShadow:"0 8px 32px rgba(255, 145, 0, 0.2)"},children:[e.jsx(o,{sx:{p:3,background:"linear-gradient(135deg, #FF9100 0%, #FF6F00 100%)",color:"white"},children:e.jsx(p,{variant:"h5",fontWeight:"bold",children:"‚úèÔ∏è Editar Tarea"})}),e.jsx(o,{sx:{p:4},children:e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(h,{fullWidth:!0,label:"üìù T√≠tulo",value:l.titulo,onChange:r=>y({...l,titulo:r.target.value}),required:!0})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(h,{type:"date",fullWidth:!0,label:"üìÖ Fecha",value:l.fecha,onChange:r=>y({...l,fecha:r.target.value}),InputLabelProps:{shrink:!0}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(S,{component:"fieldset",fullWidth:!0,children:[e.jsx(D,{children:"‚ö° Prioridad"}),e.jsxs(E,{row:!0,value:l.prioridad,onChange:r=>y({...l,prioridad:r.target.value}),children:[e.jsx(u,{value:"alta",control:e.jsx(x,{}),label:"Alta"}),e.jsx(u,{value:"media",control:e.jsx(x,{}),label:"Media"}),e.jsx(u,{value:"baja",control:e.jsx(x,{}),label:"Baja"})]})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(S,{component:"fieldset",fullWidth:!0,children:[e.jsx(D,{children:"üè¢ ¬øCambiar empresa?"}),e.jsxs(E,{row:!0,value:re,onChange:r=>{ae(r.target.value),r.target.value==="no"&&y(a=>({...a,company_id:""}))},children:[e.jsx(u,{value:"si",control:e.jsx(x,{}),label:"S√≠"}),e.jsx(u,{value:"no",control:e.jsx(x,{}),label:"No"})]})]})}),re==="si"&&e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(R,{options:T,getOptionLabel:r=>r.nombre,value:T.find(r=>r.id===Number(l.company_id))||null,onChange:(r,a)=>{y(t=>({...t,company_id:a?String(a.id):""}))},sx:{minWidth:300},renderInput:r=>e.jsx(h,{...r,label:"üè¢ Seleccionar Empresa",fullWidth:!0,error:!!c.company_id,helperText:c.company_id})})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(h,{fullWidth:!0,multiline:!0,rows:3,label:"üìÑ Descripci√≥n",value:l.descripcion,onChange:r=>y({...l,descripcion:r.target.value})})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(o,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(b,{variant:"outlined",startIcon:e.jsx(ye,{}),onClick:$e,children:"Cancelar"}),e.jsx(b,{variant:"contained",startIcon:e.jsx(ve,{}),onClick:Ge,disabled:!l.titulo.trim(),sx:{background:"linear-gradient(45deg, #FF9100 0%, #FF6F00 100%)"},children:"Actualizar"})]})})]})})]})}),e.jsx(K,{in:!0,children:e.jsx(o,{children:Object.keys(z).length===0?e.jsx(ge,{sx:{p:6,textAlign:"center",borderRadius:3},children:e.jsx(p,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"üìù No tienes tareas para hoy"})}):Object.entries(z).map(([r,a],t)=>e.jsx(K,{in:!0,timeout:300+t*100,children:e.jsxs(A,{sx:{mb:3,borderRadius:3,overflow:"hidden"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,background:"linear-gradient(135deg, #1976d2 0%, #2196f3 100%)",color:"white",cursor:"pointer"},onClick:()=>Me(r),children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(xr,{sx:{bgcolor:"white",color:Qe(r),fontWeight:"bold",width:48,height:48},children:Je(r)}),e.jsxs(o,{children:[e.jsx(p,{variant:"h5",fontWeight:"bold",children:r}),e.jsxs(p,{variant:"body1",sx:{opacity:.9},children:[a.length," ",a.length===1?"tarea asignada":"tareas asignadas"]})]})]}),e.jsx(Ce,{sx:{color:"white"},children:se[r]?e.jsx(me,{}):e.jsx(he,{})})]}),e.jsx(Se,{in:se[r]??!0,children:e.jsx(o,{sx:{p:2},children:a.map((s,q)=>e.jsx(Q,{in:!0,style:{transitionDelay:`${q*100}ms`},children:e.jsxs(A,{sx:{mb:2,borderRadius:2,border:"1px solid rgba(0,0,0,0.1)",borderLeft:`6px solid ${ce(s.prioridad)}`},children:[e.jsxs(o,{onClick:()=>Oe(s.id),sx:{p:2,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between","&:hover":{bgcolor:L("#1976d2",.05)}},children:[e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(p,{variant:"h6",fontWeight:"bold",sx:{mb:1},children:s.titulo}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e.jsx(P,{size:"small",label:s.prioridad.toUpperCase(),sx:{bgcolor:ce(s.prioridad),color:"white",fontWeight:"bold"}}),e.jsx(P,{size:"small",icon:e.jsx(ur,{fontSize:"small"}),label:s.fecha,variant:"outlined",color:"primary"}),s.tipo&&e.jsx(P,{size:"small",icon:e.jsx(rr,{fontSize:"small"}),label:s.tipo.nombre_tipo,variant:"outlined",color:"primary"}),s.company&&e.jsx(P,{size:"small",icon:e.jsx(ar,{fontSize:"small"}),label:s.company.name,variant:"outlined",color:"primary"})]})]}),e.jsx(o,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(Ce,{size:"small",sx:{color:"#1976d2"},children:oe[s.id]?e.jsx(me,{}):e.jsx(he,{})})})]}),s.id===ze&&e.jsxs(o,{sx:{p:3,bgcolor:L("#4caf50",.05),borderTop:"1px solid rgba(0,0,0,0.1)"},children:[e.jsx(p,{variant:"h6",sx:{mb:2,color:"#4caf50",fontWeight:"bold"},children:"üîÑ Cambiar Pasante"}),e.jsxs(S,{fullWidth:!0,size:"small",sx:{mb:2},children:[e.jsx(cr,{children:"Nuevo Pasante"}),e.jsx(pr,{value:W??"",onChange:d=>M(Number(d.target.value)),label:"Nuevo Pasante",children:ke.map(d=>e.jsxs(mr,{value:d.id,children:[d.name," (",d.email,")"]},d.id))})]}),e.jsxs(o,{sx:{display:"flex",gap:2},children:[e.jsx(b,{variant:"outlined",onClick:()=>{te(null),M(null)},size:"small",children:"Cancelar"}),e.jsx(b,{variant:"contained",onClick:()=>Ze(s.id),disabled:!W,size:"small",sx:{bgcolor:"#4caf50","&:hover":{bgcolor:"#388e3c"}},children:"Confirmar cambio"})]})]}),e.jsx(Se,{in:oe[s.id]??!1,children:e.jsx(o,{sx:{px:3,pb:3},children:e.jsxs(o,{sx:{borderTop:"1px solid rgba(0,0,0,0.1)",pt:2},children:[s.asignados.map(d=>e.jsx(o,{sx:{mb:3,p:2,borderRadius:2,bgcolor:L("#1976d2",.02),border:"1px solid rgba(25, 118, 210, 0.1)"},children:e.jsxs(o,{sx:{mb:2},children:[e.jsxs(p,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:"bold"},children:["üìä Estado de la tarea:",Ae[d.id]&&e.jsx(o,{component:"span",sx:{ml:1,display:"inline-block",width:16,height:16,border:"2px solid #1976d2",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}})]}),e.jsx(S,{component:"fieldset",size:"small",children:e.jsxs(E,{row:!0,value:d.estado,onChange:Ye=>Ne(d.id,Ye.target.value),sx:{gap:2,flexWrap:"wrap"},children:[e.jsx(u,{value:"pendiente",control:e.jsx(x,{size:"small"}),label:"Pendiente"}),e.jsx(u,{value:"corregir",control:e.jsx(x,{size:"small"}),label:"Corregir"}),e.jsx(u,{value:"en_revision",control:e.jsx(x,{size:"small"}),label:"Realizado"})]})})]})},d.id)),e.jsxs(o,{sx:{mt:2},children:[e.jsx(p,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:"bold"},children:"üìÑ Descripci√≥n de la tarea:"}),De===s.id?e.jsx(h,{fullWidth:!0,multiline:!0,rows:3,value:Pe,onChange:d=>{ne(d.target.value),Be(s.id,d.target.value)},onBlur:()=>O(null),autoFocus:!0,placeholder:"Describe la tarea en detalle..."}):e.jsx(o,{onClick:()=>Ke(s),sx:{p:2,borderRadius:2,bgcolor:"white",border:"1px dashed rgba(25, 118, 210, 0.3)",cursor:"pointer","&:hover":{bgcolor:L("#1976d2",.02),borderColor:"#1976d2"}},children:e.jsx(p,{variant:"body2",color:s.descripcion?"text.primary":"text.secondary",sx:{fontStyle:s.descripcion?"normal":"italic"},children:s.descripcion||"Haz clic para agregar una descripci√≥n..."})})]})]})})})]})},s.id))})})]})},r))})}),!Y&&!B&&e.jsx(hr,{color:"primary",onClick:de,sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(45deg, #4caf50 0%, #2e7d32 100%)","&:hover":{background:"linear-gradient(45deg, #388e3c 0%, #1b5e20 100%)",transform:"scale(1.1)"},transition:"all 0.3s ease",zIndex:1e3},children:e.jsx(be,{})})]})]})}export{Aa as default};
