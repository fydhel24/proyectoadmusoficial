import{r as u,j as e,$ as B,m as F}from"./app-iQxetvcT.js";import{A as k}from"./app-layout-DZNLsAUN.js";import{A as O}from"./AssignmentTurnedIn-BarlKkjU.js";import{L as W}from"./LocationOn-BvCg2KE7.js";import I from"./MapComponent-2QzMv2oL.js";import{B as i}from"./Box-F6yhJlLA.js";import{P as S,T as o}from"./Typography-Vu44IVe3.js";import{G as l}from"./Grid-CfBvjvwC.js";import{C as d}from"./Card-Lj3f8xs8.js";import{B as b}from"./Button-hUEMcK7z.js";import{A as T}from"./Avatar-DlpHK3OL.js";import{D as w,a as z,b as R}from"./DialogTitle-B_p8MVTw.js";import{D as H}from"./DialogActions-BTeDSk-U.js";import"./button-Br5uzfA2.js";import"./clsx-B-dksMZM.js";import"./avatar-BfsoZtdh.js";import"./createLucideIcon-DcDr_LZ4.js";import"./index-xUTrLbSm.js";import"./index-STaUq66L.js";import"./index-HkiN5Yj1.js";import"./settings-CpjDLTZ2.js";import"./app-logo-icon-4ncQ7Ez_.js";import"./createSvgIcon-ClVcefPA.js";import"./DefaultPropsProvider-ByswQ0ug.js";import"./leaflet-Cr1hrg0e.js";import"./Popup-C0nwbCZT.js";import"./createSimplePaletteValueFilter-DBX30MBl.js";import"./useThemeProps-BAPtVuKn.js";import"./getThemeProps-CQORG8wP.js";import"./isMuiElement-BAKBvZFj.js";import"./useId-CJlvviJa.js";import"./ButtonBase-Dne6GeZ5.js";import"./useTimeout-BYDghXNP.js";import"./TransitionGroupContext-BXJRKgr0.js";import"./CircularProgress-BqVLwA-j.js";import"./useSlot-Ea-Y7OKI.js";import"./Fade-Buv2aBp9.js";import"./Modal-DA_teWuH.js";import"./ownerDocument-DW-IO8s5.js";import"./Portal-Cwx4ynoN.js";function Ee({user:f,horarioSemanal:s,currentWeek:y,weeks:m=[],diasSemana:x,turnos:v,totalAsignaciones:p}){const[C,h]=u.useState(!1),[n,j]=u.useState(null),A=r=>{const t=r.target.value;F.get("/mi-horario",{week_id:t})},E=r=>{j(r),h(!0)},g=()=>{h(!1),j(null)},D=r=>{switch(r){case"ma√±ana":return"‚òÄÔ∏è";case"tarde":return"üå§Ô∏è";case"noche":return"üåô";default:return"‚è∞"}};return e.jsx(k,{children:e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Mi Horario Semanal"}),e.jsx(i,{sx:{minHeight:"100vh",backgroundColor:"#F9FAFB",py:6},children:e.jsxs(i,{sx:{mx:"auto",maxWidth:"6xl",px:4},children:[e.jsx(S,{elevation:3,sx:{mb:6,p:6},children:e.jsxs(i,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{md:"center"},justifyContent:"space-between"},children:[e.jsxs(i,{children:[e.jsx(o,{variant:"h4",component:"h1",sx:{mb:2,fontWeight:"bold"},children:"Mi Horario Semanal"}),e.jsxs(o,{variant:"body1",color:"text.secondary",children:["Bienvenido, ",e.jsx(o,{component:"span",sx:{fontWeight:"semibold"},children:f.name})]})]}),e.jsxs(i,{sx:{mt:{xs:4,md:0}},children:[e.jsx(o,{variant:"subtitle2",sx:{mb:1},children:"Seleccionar semana:"}),e.jsx("select",{onChange:A,value:y.id,style:{borderRadius:4,border:"1px solid #CBD5E0",backgroundColor:"white",padding:"8px 12px",fontSize:"0.875rem",outline:"none"},children:m&&m.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))})]})]})}),e.jsxs(l,{container:!0,spacing:4,sx:{mb:6},children:[e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:2,sx:{textAlign:"center",p:4},children:[e.jsx(o,{variant:"h3",component:"div",color:"primary",children:p}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Asignaciones totales"})]})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:2,sx:{textAlign:"center",p:4},children:[e.jsx(o,{variant:"h3",component:"div",color:"success.main",children:Object.values(s).filter(r=>Object.values(r).some(t=>t!==null)).length}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"D√≠as con trabajo"})]})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(d,{elevation:2,sx:{textAlign:"center",p:4},children:[e.jsx(o,{variant:"h3",component:"div",color:"purple",children:new Set(Object.values(s).flatMap(r=>Object.values(r).filter(t=>t).map(t=>t.company.id))).size}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Empresas diferentes"})]})})]}),e.jsx(i,{sx:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#F3F4F6"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"0.75rem",textTransform:"uppercase",color:"#6B7280"},children:"Turno"}),Object.entries(x).map(([r,t])=>e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"0.75rem",textTransform:"uppercase",color:"#6B7280"},children:t},r))]})}),e.jsx("tbody",{children:Object.entries(v).map(([r,t])=>e.jsxs("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[e.jsx("td",{style:{padding:"12px"},children:e.jsxs(i,{sx:{display:"inline-flex",alignItems:"center",borderRadius:"9999px",px:2,py:1,fontSize:"0.75rem",fontWeight:"medium",...r==="ma√±ana"?{backgroundColor:"#DBEAFE",color:"#1E40AF"}:r==="tarde"?{backgroundColor:"#FEF3C7",color:"#92400E"}:r==="noche"?{backgroundColor:"#EDE9FE",color:"#5B21B6"}:{backgroundColor:"#E5E7EB",color:"#374151"}},children:[e.jsx("span",{style:{marginRight:4},children:D(r)}),r.charAt(0).toUpperCase()+r.slice(1)]})}),Object.keys(x).map(c=>{const a=s[c]&&s[c][r];return e.jsx("td",{style:{padding:"12px",textAlign:"center",verticalAlign:"top"},children:a?e.jsxs(i,{sx:{border:"1px solid #D1FAE5",backgroundColor:"#ECFDF5",p:2,borderRadius:2,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(o,{variant:"subtitle2",sx:{fontWeight:"medium",color:"green.dark"},children:a.company.name}),a.company.direccion&&e.jsx(b,{size:"small",variant:"outlined",startIcon:e.jsx(W,{}),onClick:()=>E(a.company),sx:{mt:1},children:"Ver ubicaci√≥n"})]}):e.jsx(o,{variant:"caption",color:"text.disabled",children:"Libre"})},`${c}-${r}`)})]},r))})]})}),p===0&&e.jsxs(i,{sx:{mt:6,textAlign:"center"},children:[e.jsx(T,{sx:{bgcolor:"grey.300",width:64,height:64,mx:"auto",mb:2},children:e.jsx(O,{sx:{fontSize:40,color:"grey.600"}})}),e.jsx(o,{variant:"h6",color:"text.secondary",children:"No tienes asignaciones esta semana"})]}),e.jsxs(w,{open:C,onClose:g,maxWidth:"md",fullWidth:!0,children:[e.jsx(z,{children:"Ubicaci√≥n de la empresa"}),e.jsx(R,{dividers:!0,children:n?e.jsxs(i,{children:[e.jsx(o,{variant:"subtitle1",sx:{mb:1,fontWeight:"bold"},children:n.name}),n.direccion&&e.jsx(I,{nombre:n.name,direccion:n.direccion})]}):e.jsx(o,{variant:"body2",children:"No se encontr√≥ la empresa seleccionada."})}),e.jsx(H,{children:e.jsx(b,{onClick:g,color:"primary",children:"Cerrar"})})]})]})})]})})}export{Ee as default};
