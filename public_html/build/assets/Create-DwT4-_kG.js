import{r as g,j as e,m as w}from"./app-hmuC0z_W.js";import{A as _}from"./app-layout-tfxOdOKB.js";import{F as C}from"./file-text-C4ZaHWsY.js";import{C as q}from"./calendar-CV553bNn.js";import{T as o}from"./trash-2-Ctgi2-51.js";import{C as h}from"./circle-check-BBR3rszY.js";import{P as m}from"./plus-DZWHNTVH.js";import{a as x,T as f}from"./trending-up-P3e1DyUH.js";import{C as j}from"./circle-alert-BJbv9wPw.js";import{S as E}from"./save-CNKRg44K.js";import"./button-BdWLbofJ.js";import"./clsx-B-dksMZM.js";import"./avatar-SH5xSAMo.js";import"./createLucideIcon-B2A0n4jm.js";import"./index-BeDZ4tg0.js";import"./index-B2CGEqEW.js";import"./index-CDmN9uZR.js";import"./settings-B81NYrWU.js";import"./app-logo-icon-DF-2vurZ.js";import"./createSvgIcon-DmtCSiy2.js";import"./DefaultPropsProvider-B9G9mrQg.js";const W=({empresas:b})=>{const[t,d]=g.useState({tipo_periodo:"semanal",fecha_reporte:new Date().toISOString().split("T")[0],fecha_inicio:"",fecha_fin:"",observaciones:"",recomendaciones:"",actividades:[],estrategias:[],resultados:[],dificultades:[],metas:[],seguimiento_empresa_ids:[]}),[i,v]=g.useState({}),u=a=>{d({...t,[a.target.name]:a.target.value})},l=(a,s,r,y)=>{const p=[...t[a]];p[s][r]=y,d({...t,[a]:p})},c=(a,s)=>{d({...t,[a]:[...t[a],s]})},n=(a,s)=>{const r=[...t[a]];r.splice(s,1),d({...t,[a]:r})},N=a=>{a.preventDefault();const s={};(!t.actividades||t.actividades.length===0)&&(s.actividades="Agrega al menos una actividad"),(!t.estrategias||t.estrategias.length===0)&&(s.estrategias="Agrega al menos una estrategia"),(!t.resultados||t.resultados.length===0)&&(s.resultados="Agrega al menos unresultado"),(!t.dificultades||t.dificultades.length===0)&&(s.dificultades="Agrega al menos una dificultad"),(!t.metas||t.metas.length===0)&&(s.metas="Agrega al menos una meta"),v(s),!(Object.keys(s).length>0)&&w.post("/reportes",t)};return e.jsx(_,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 px-4 py-8",children:e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-6 rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-blue-600 p-2",children:e.jsx(C,{className:"h-6 w-6 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Crear Reporte"})]}),e.jsx("p",{className:"ml-14 text-slate-600",children:"Complete la información del reporte periódico"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-5 flex items-center gap-2 border-b border-slate-200 pb-3",children:[e.jsx(q,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Información General"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Tipo de Periodo"}),e.jsxs("select",{name:"tipo_periodo",value:t.tipo_periodo,onChange:u,className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-slate-800 transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500",required:!0,disabled:!0,children:[e.jsx("option",{value:"diario",children:"Diario"}),e.jsx("option",{value:"semanal",children:"Semanal"}),e.jsx("option",{value:"mensual",children:"Mensual"})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"rounded-lg border border-slate-300 bg-white p-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-slate-800",children:"Actividades realizadas (Desde - Hasta)"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Desde"}),e.jsx("input",{type:"date",name:"fecha_inicio",value:t.fecha_inicio,onChange:u,className:"w-full rounded-lg border border-slate-300 px-4 py-2.5 transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Hasta"}),e.jsx("input",{type:"date",name:"fecha_fin",value:t.fecha_fin,onChange:u,className:"w-full rounded-lg border border-slate-300 px-4 py-2.5 transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500",required:!0})]})]})]})})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Empresas en seguimiento"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("select",{value:"",onChange:a=>{const s=parseInt(a.target.value,10);t.seguimiento_empresa_ids.includes(s)||d({...t,seguimiento_empresa_ids:[...t.seguimiento_empresa_ids,s]})},className:"w-full rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-slate-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Seleccione una empresa"}),b.filter(a=>!t.seguimiento_empresa_ids.includes(a.id)).map(a=>e.jsx("option",{value:a.id,children:a.nombre_empresa},a.id))]})}),i.seguimiento_empresa_ids&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.seguimiento_empresa_ids}),t.seguimiento_empresa_ids.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold text-slate-700",children:"Empresas seleccionadas:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto border border-slate-200 text-sm text-slate-700",children:[e.jsx("thead",{className:"bg-slate-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-3 py-2",children:"Empresa"}),e.jsx("th",{className:"border px-3 py-2",children:"Estado"}),e.jsx("th",{className:"border px-3 py-2",children:"Fecha Inicio"}),e.jsx("th",{className:"border px-3 py-2",children:"Fecha Fin"}),e.jsx("th",{className:"border px-3 py-2",children:"Descripción"}),e.jsx("th",{className:"border px-3 py-2",children:"Celular"}),e.jsx("th",{className:"border px-3 py-2",children:"Paquete"}),e.jsx("th",{className:"border px-3 py-2",children:"Responsable"}),e.jsx("th",{className:"border px-3 py-2 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:t.seguimiento_empresa_ids.map(a=>{const s=b.find(r=>r.id===a);return s?e.jsxs("tr",{children:[e.jsx("td",{className:"border px-3 py-2",children:s.nombre_empresa}),e.jsx("td",{className:"border px-3 py-2",children:s.estado}),e.jsx("td",{className:"border px-3 py-2",children:s.fecha_inicio}),e.jsx("td",{className:"border px-3 py-2",children:s.fecha_fin}),e.jsx("td",{className:"border px-3 py-2",children:s.descripcion}),e.jsx("td",{className:"border px-3 py-2",children:s.celular}),e.jsx("td",{className:"border px-3 py-2",children:s.paquete??"—"}),e.jsx("td",{className:"border px-3 py-2",children:s.usuario??"—"}),e.jsx("td",{className:"border px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>d({...t,seguimiento_empresa_ids:t.seguimiento_empresa_ids.filter(r=>r!==a)}),className:"text-red-600 hover:text-red-800",title:"Eliminar",children:e.jsx(o,{className:"h-4 w-4"})})})]},s.id):null})})]})})]})]}),e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-5 md:grid-cols-2",children:e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-slate-700",children:"Observaciones"}),e.jsx("textarea",{name:"observaciones",value:t.observaciones,onChange:u,rows:4,placeholder:"Ingrese observaciones generales...",className:"w-full resize-none rounded-lg border border-slate-300 px-4 py-2.5 transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500",required:!0})]})})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between border-b border-slate-200 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Actividades"})]}),e.jsxs("button",{type:"button",onClick:()=>c("actividades",{tipo_actividad:"",descripcion:"",fecha_actividad:"",observaciones:""}),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(m,{className:"h-4 w-4"}),"Añadir Actividad"]})]}),e.jsxs("div",{className:"space-y-3",children:[i.actividades&&e.jsx("div",{className:"mb-2 text-sm text-red-600",children:i.actividades}),t.actividades.length===0?e.jsxs("div",{className:"py-8 text-center text-slate-500",children:[e.jsx(h,{className:"mx-auto mb-2 h-12 w-12 opacity-30"}),e.jsx("p",{children:"No hay actividades registradas"})]}):t.actividades.map((a,s)=>e.jsxs("div",{className:"grid grid-cols-1 gap-3 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-5",children:[e.jsx("input",{placeholder:"Tipo de actividad",required:!0,value:a.tipo_actividad||"",onChange:r=>l("actividades",s,"tipo_actividad",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{placeholder:"Descripción",required:!0,value:a.descripcion||"",onChange:r=>l("actividades",s,"descripcion",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"date",required:!0,value:a.fecha_actividad||"",onChange:r=>l("actividades",s,"fecha_actividad",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{placeholder:"Observaciones",required:!0,value:a.observaciones||"",onChange:r=>l("actividades",s,"observaciones",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{type:"button",onClick:()=>n("actividades",s),className:"flex items-center justify-center gap-2 rounded-lg bg-red-50 px-3 py-2 text-sm font-medium text-red-600 transition-colors hover:bg-red-100",children:[e.jsx(o,{className:"h-4 w-4"}),"Eliminar"]})]},s))]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between border-b border-slate-200 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Estrategias Utilizadas"})]}),e.jsxs("button",{type:"button",onClick:()=>c("estrategias",{metodo_estrategia:"",herramientas_usadas:"",resultado_esperado:""}),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(m,{className:"h-4 w-4"}),"Añadir Estrategia"]})]}),e.jsxs("div",{className:"space-y-3",children:[i.estrategias&&e.jsx("div",{className:"mb-2 text-sm text-red-600",children:i.estrategias}),t.estrategias.length===0?e.jsxs("div",{className:"py-8 text-center text-slate-500",children:[e.jsx(x,{className:"mx-auto mb-2 h-12 w-12 opacity-30"}),e.jsx("p",{children:"No hay estrategias registradas"})]}):t.estrategias.map((a,s)=>e.jsxs("div",{className:"grid grid-cols-1 gap-3 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-4",children:[e.jsx("textarea",{placeholder:"Método o Estrategia",required:!0,value:a.metodo_estrategia||"",onChange:r=>l("estrategias",s,"metodo_estrategia",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{placeholder:"Herramientas Usadas",required:!0,value:a.herramientas_usadas||"",onChange:r=>l("estrategias",s,"herramientas_usadas",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{placeholder:"Resultado Esperado",required:!0,value:a.resultado_esperado||"",onChange:r=>l("estrategias",s,"resultado_esperado",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{type:"button",onClick:()=>n("estrategias",s),className:"flex items-center justify-center gap-2 rounded-lg bg-red-50 px-3 py-2 text-sm font-medium text-red-600 transition-colors hover:bg-red-100",children:[e.jsx(o,{className:"h-4 w-4"}),"Eliminar"]})]},s))]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between border-b border-slate-200 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Resultados del Equipo"})]}),e.jsxs("button",{type:"button",onClick:()=>c("resultados",{indicador:"",meta_mes:"",resultado_real:"",observaciones:""}),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(m,{className:"h-4 w-4"}),"Añadir Resultado"]})]}),e.jsxs("div",{className:"space-y-3",children:[i.resultados&&e.jsx("div",{className:"mb-2 text-sm text-red-600",children:i.resultados}),t.resultados.length===0?e.jsxs("div",{className:"py-8 text-center text-slate-500",children:[e.jsx(f,{className:"mx-auto mb-2 h-12 w-12 opacity-30"}),e.jsx("p",{children:"No hay resultados registrados"})]}):t.resultados.map((a,s)=>e.jsxs("div",{className:"grid grid-cols-1 gap-3 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-4",children:[e.jsx("input",{placeholder:"Indicador",required:!0,value:a.indicador||"",onChange:r=>l("resultados",s,"indicador",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{placeholder:"Meta del Mes",required:!0,value:a.meta_mes||"",onChange:r=>l("resultados",s,"meta_mes",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{placeholder:"Resultado Real",required:!0,value:a.resultado_real||"",onChange:r=>l("resultados",s,"resultado_real",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{type:"button",onClick:()=>n("resultados",s),className:"flex items-center justify-center gap-2 rounded-lg bg-red-50 px-3 py-2 text-sm font-medium text-red-600 transition-colors hover:bg-red-100",children:[e.jsx(o,{className:"h-4 w-4"}),"Eliminar"]})]},s))]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between border-b border-slate-200 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Dificultades"})]}),e.jsxs("button",{type:"button",onClick:()=>c("dificultades",{tipo:"",descripcion:"",impacto:"",accion_tomada:""}),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(m,{className:"h-4 w-4"}),"Añadir Dificultad"]})]}),e.jsxs("div",{className:"space-y-3",children:[i.dificultades&&e.jsx("div",{className:"mb-2 text-sm text-red-600",children:i.dificultades}),t.dificultades.length===0?e.jsxs("div",{className:"py-8 text-center text-slate-500",children:[e.jsx(j,{className:"mx-auto mb-2 h-12 w-12 opacity-30"}),e.jsx("p",{children:"No hay dificultades registradas"})]}):t.dificultades.map((a,s)=>e.jsxs("div",{className:"grid grid-cols-1 gap-3 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-4",children:[e.jsx("input",{placeholder:"Tipo",required:!0,value:a.tipo||"",onChange:r=>l("dificultades",s,"tipo",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{placeholder:"Descripción",required:!0,value:a.descripcion||"",onChange:r=>l("dificultades",s,"descripcion",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{placeholder:"Impacto",required:!0,value:a.impacto||"",onChange:r=>l("dificultades",s,"impacto",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{type:"button",onClick:()=>n("dificultades",s),className:"flex items-center justify-center gap-2 rounded-lg bg-red-50 px-3 py-2 text-sm font-medium text-red-600 transition-colors hover:bg-red-100",children:[e.jsx(o,{className:"h-4 w-4"}),"Eliminar"]})]},s))]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between border-b border-slate-200 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Metas Siguientes"})]}),e.jsxs("button",{type:"button",onClick:()=>c("metas",{objetivo:"",accion_implementar:"",responsable:"",fecha_cumplimiento:""}),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(m,{className:"h-4 w-4"}),"Añadir Meta"]})]}),e.jsxs("div",{className:"space-y-3",children:[i.metas&&e.jsx("div",{className:"mb-2 text-sm text-red-600",children:i.metas}),t.metas.length===0?e.jsxs("div",{className:"py-8 text-center text-slate-500",children:[e.jsx(x,{className:"mx-auto mb-2 h-12 w-12 opacity-30"}),e.jsx("p",{children:"No hay metas registradas"})]}):t.metas.map((a,s)=>e.jsxs("div",{className:"grid grid-cols-1 gap-3 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-5",children:[e.jsx("textarea",{placeholder:"Objetivo",required:!0,value:a.objetivo||"",onChange:r=>l("metas",s,"objetivo",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{placeholder:"Acción a Implementar",required:!0,value:a.accion_implementar||"",onChange:r=>l("metas",s,"accion_implementar",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{placeholder:"Responsable",required:!0,value:a.responsable||"",onChange:r=>l("metas",s,"responsable",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"date",value:a.fecha_cumplimiento||"",onChange:r=>l("metas",s,"fecha_cumplimiento",r.target.value),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{type:"button",onClick:()=>n("metas",s),className:"flex items-center justify-center gap-2 rounded-lg bg-red-50 px-3 py-2 text-sm font-medium text-red-600 transition-colors hover:bg-red-100",children:[e.jsx(o,{className:"h-4 w-4"}),"Eliminar"]})]},s))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("button",{type:"button",className:"rounded-lg border border-slate-300 px-6 py-3 font-medium text-slate-700 transition-colors hover:bg-slate-50",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-6 py-3 font-medium text-white shadow-sm transition-colors hover:bg-blue-700",children:[e.jsx(E,{className:"h-5 w-5"}),"Guardar Reporte"]})]})]})]})})})};export{W as default};
